{"highlights":[{"content_html":"<h1 id=\"parts\">Parts</h1>\n<ol>\n<li><a href=\"/posts/math-for-quant-part-1.html\">Bridging The Gap</a></li>\n</ol>","metadata":{"date":"Wed, 14 May 2025 00:00:00 GMT","slug":"math-for-quant","title":"Math For Quant"},"slug":"math-for-quant","toc":"<div class=\"toc\">\n<ul>\n<li><a href=\"#parts\">Parts</a></li>\n</ul>\n</div>\n"},{"content_html":"<h1 id=\"parts\">PARTS:</h1>\n<ol>\n<li><a href=\"/posts/weather-ai-part-1.html\">Ideas &amp; Looking At The Data</a></li>\n<li><a href=\"/posts/weather-ai-part-2.html\">Fighting The Data</a></li>\n</ol>","metadata":{"date":"Tue, 08 Apr 2025 00:00:00 GMT","slug":"weather-ai","title":"Weather Forecasting"},"slug":"weather-ai","toc":"<div class=\"toc\">\n<ul>\n<li><a href=\"#parts\">PARTS:</a></li>\n</ul>\n</div>\n"}],"posts":[{"content_html":"<h1 id=\"introduction\">Introduction:</h1>\n<p>Ever wonder why the weather app says there's heavy rain today, while you're sitting under the burning sun? Me too.  <br />\nApparently it's not as easy as one might imagine, what we have today is borderline magic. <br />\nBut still curiosity got the better of me, so I decided to start this project, to uncover what makes it so challenging and maybe learn something along the way.<br />\n<br></p>\n<hr />\n<h1 id=\"but-how-does-weather-even-work\">But How Does Weather Even Work?</h1>\n<p>I remember the weather related chapters used to be some of the most interesting chapters in geography, back in school. Even more so than the science classes (I'm a science student). It was one of those chapters that just made pure logical sense, without overwhelming the students with math.<br />\nTo better understand the numerical observations, we must first qualitatively understand what weather patterns on Earth actually look like. This part will try to cover as much as possible in a reasonable amount of time. (excuse the use of non-technical terms, it's meant to give an idea without getting into the jargon)  </p>\n<h2 id=\"the-basic-mechanics\">The Basic Mechanics:</h2>\n<h3 id=\"convection\">Convection:</h3>\n<p>Okay so this is typically common-knowledge, but as a refresher, <strong>hot-air is typically lighter (less dense) than cold-air</strong>. This causes hot air to rise up into the atmosphere, causing a <strong>Vertical wind current</strong>.    </p>\n<h3 id=\"drop-in-temperature-with-height\">Drop In Temperature with Height:</h3>\n<p>The temperature usually drops at the <strong>Normal lapse rate</strong> (i.e 6.5 \u00b0C every 1km).<br />\nOne might deem this as common sense, however, the reason is more nuanced than you might think. The atmosphere actually <strong>cannot absorb incoming energy from the sun</strong>, the <strong>heat supply actually comes from the earth</strong> (as it is radiated back into the atmosphere). The main reason has to do with <strong>long and short waves</strong> (terrestrial &amp; solar radiation), but it would require a lot more context to explain. With this highly simplified line of thinking, one can easily imagine the drop in temperature as we get farther away from the surface.</p>\n<h3 id=\"drop-in-pressure-with-height\">Drop In Pressure with Height:</h3>\n<p>Again this is due to the effects of gravity on air. (treating it as a collection of particles).</p>\n<h3 id=\"pressure-differences-drive-wind\">Pressure Differences Drive Wind:</h3>\n<p>Air always moves from <strong>high pressure to low pressure</strong>. Now this pressure difference may be caused in a number of ways, like, <strong>temperature differences</strong> causing hot air to rise, and leaving behind an area of low pressure, or <strong>high relative humidity</strong>, etc.</p>\n<h3 id=\"water-heatscools-faster-than-land\">Water Heats/Cools Faster than Land:</h3>\n<p>This gives rise to daily effects like, <strong>land breeze &amp; sea breeze</strong> (due to temperature differences), as well as yearly effects as we will see ahead.</p>\n<h2 id=\"advanced-mechanics\">Advanced Mechanics:</h2>\n<h3 id=\"the-pressure-belts\">The Pressure Belts:</h3>\n<p>There are four kinds of pressure belts on earth:    </p>\n<ol>\n<li>Equitorial <strong>LOW</strong> pressure belt (ITCZ).</li>\n<li>Subtropical <strong>HIGH</strong> pressure belt.</li>\n<li>Subpolar <strong>LOW</strong> pressure belt.</li>\n<li>polar <strong>HIGH</strong> pressure belt.</li>\n</ol>\n<p>This image explains it much better than words can:  </p>\n<p><br></p>\n<p><a href=\"https://www.researchgate.net/figure/Ideal-Zonal-Pressure-Belts-An-imaginary-uniform-Earth-with-idealized-zonal-continuous_fig3_273949389\"><img src=\"https://www.researchgate.net/profile/Mesut-Demircan/publication/273949389/figure/fig3/AS:669379721187338@1536603970467/Ideal-Zonal-Pressure-Belts-An-imaginary-uniform-Earth-with-idealized-zonal-continuous.ppm\" alt=\"An imaginary uniform Earth with idealized zonal (continuous) pressure belts.\" class=\"invertible\"/></a></p>\n<p><br></p>\n<p>In essence however, hot air rises at the equator, and cold air descends at the tropics. Same for subpolar and polar, however this time its more to do with the rotation of the earth driving it. (Explaining the whole mechanism will take too much time for a refresher).<br />\nI would also like to bring your attention to the names of these winds, and their direction, it will be important later.</p>\n<h3 id=\"ocean-currents\">Ocean Currents:</h3>\n<p>There are many so look at this figure instead:</p>\n<p><br></p>\n<p><a href=\"https://www.researchgate.net/figure/The-major-ocean-currents-the-red-arrows-illustrate-warm-water-currents-and-the-blue-are_fig2_264880631\"><img src=\"https://www.researchgate.net/profile/Karin-Thomas/publication/264880631/figure/fig2/AS:295907590459392@1447561275071/The-major-ocean-currents-the-red-arrows-illustrate-warm-water-currents-and-the-blue-are.png\" alt=\"The major ocean currents, the red arrows illustrate warm water currents and the blue are cold water currents.\"/></a></p>\n<p><br></p>\n<p>Especially pay attention to the <strong>Peruvian current</strong>. It is infact not a permanent current, it's appearance marks El Nino which will be explored ahead.</p>\n<h3 id=\"rain-shadow-returning-monsoons\">Rain Shadow &amp; Returning Monsoons:</h3>\n<p>Topological protrusions like mountains can cause significant changes to the local weather. It may block the incoming rain and cause heavy precipitation on the <strong>Windward side</strong>, leaving the other side in <strong>Rain shadow</strong>. \nRain shadow looks something like this:  </p>\n<p><br></p>\n<p><a href=\"https://www.researchgate.net/figure/Precipitation-effects-of-moisture-laden-air-passing-over-a-mountain-range-Precipitation_fig6_226689513\"><img src=\"https://www.researchgate.net/profile/William-Hay-2/publication/226689513/figure/fig6/AS:668988686225415@1536510740573/Precipitation-effects-of-moisture-laden-air-passing-over-a-mountain-range-Precipitation.png\" alt=\"Precipitation effects of moisture-laden air passing over a mountain range. Precipitation occurs on the windward side of the range, and a rain shadow develops in its lee. RH relative humidity\"/></a></p>\n<p><br></p>\n<p>Since we will be doing a lot of heatmap-type graphs later here is a more technical version. (shamelessly copy-pasted, you can read the actual paper linked with it).</p>\n<p><br></p>\n<p><a href=\"https://www.researchgate.net/figure/a-Topography-map-and-location-of-the-measurement-sites-in-the-rain-shadow-region-of-the_fig1_374810410\"><img src=\"https://www.researchgate.net/publication/374810410/figure/fig1/AS:11431281292089982@1732416879462/a-Topography-map-and-location-of-the-measurement-sites-in-the-rain-shadow-region-of-the.png\" alt=\"(a) Topography map and location of the measurement sites in the rain shadow region of the Western Ghats. (b) Hovmoller diagram of the precipitabe water. Hovmoller diagram is generated using hourly averaged data over the region (17\u00b0 N to 20.5\u00b0 N) and (70\u00b0 E to 85\u00b0 E) for the period 25 (00 UTC)-31 (23 UTC) May 2019 (0.5\u2009\u00d7\u20090.625 degree resolution data from MERRA-2 Model M2T1NXLND v5.12.4 product).\"/></a></p>\n<p><br></p>\n<p>Returning Monsoons is a more Indian sub-continent specific term. When the monsoon hit the <strong>himalayas</strong>, they are <strong>blocked</strong> and unable to pass (again excuse the use of non-technical and inaccurate language), and as the sun slowly moves downward the pressure belts start shifting, and the <strong>low pressure zone over the northern plains gets depleted</strong>. This causes the monsoon winds to <strong>blow backwards</strong> making it seem like they are \"retreating\".</p>\n<h3 id=\"el-nino-and-la-nina\">El Nino and La Nina:</h3>\n<p>El Nino and La Nina are phases of the <strong>El Nino-Southern Oscillation (ENSO)</strong>, driven by shifts in sea surface temperatures and atmospheric pressure across the tropical Pacific. These phases influence global weather patterns, notably the Indian monsoon, by altering wind and moisture flows. The <strong>Peruvian (Humboldt) Current</strong>, a cold ocean current off South America's coast, plays a key role in these dynamics.</p>\n<h4 id=\"el-nino-effects\">El Nino Effects</h4>\n<p>During El Nino, weakened trade winds reduce the westward push of warm water, allowing it to flow back toward South America. This warms the eastern Pacific and suppresses the Peruvian Current's cold upwelling, disrupting nutrient-rich waters. For India, this often weakens the monsoon circulation, leading to below-average rainfall and potential droughts, as the usual low-pressure system over the subcontinent loses strength.</p>\n<h4 id=\"la-nina-effects\">La Nina Effects</h4>\n<p>In La Nina, stronger trade winds drive warm water toward Asia, intensifying the Peruvian Current's cold upwelling along South America. This cools the eastern Pacific, enhancing atmospheric stability there. For India, La Nina strengthens monsoon winds, increasing moisture inflow from the Indian Ocean, often resulting in above-average rainfall, though excessive rain can cause flooding in vulnerable areas.</p>\n<hr />\n<h1 id=\"the-old-way-nwp\">The Old Way (NWP):</h1>\n<p>We will be exploring this in later posts so it is better not to cover it here.\nAnd honestly, the wikipedia article  <a href=\"https://en.wikipedia.org/wiki/Numerical_weather_prediction\">Numerical Weather Prediction</a> does a better job explaining this than me.</p>\n<p><br>    </p>\n<hr>\n\n<!-- \n# The Old Way: Crunching Numbers\nWay back, predicting weather meant solving big equations-like how fluids move (Navier-Stokes, if you're nerdy). Think of it as slicing the sky into a grid and calculating what happens next. That's numerical weather prediction (NWP). Supercomputers run this for days, tweaking it with real data so it doesn't go off the rails. ERA5, my file, comes from that-past weather re-simulated with today's tech. It's a cheat sheet of what happened in 2024, and I'm using it to jumpstart my own model.\n\nBut here's the catch: those equations are slow, and tiny mistakes explode fast. Chaos, right? That's why I'm not stopping there.\n\n# The New Way: AI's Turn\nThen there's AI. I ran into GenCast-Google's trick from late 2024. It's this crazy model that skips the physics and learns patterns from piles of ERA5 data, spitting out 15-day forecasts in minutes. Wild. Or nowcasting-quick 0-6 hour guesses from radar pics. I'm aiming simpler: a day ahead with a neural network (CNN). Maybe I can nudge it with sparse data later, GenCast-style. It's less \"solve the universe\" and more \"spot the trends\"-faster, scrappier. -->\n\n<h1 id=\"peeking-at-the-data\">Peeking at the Data:</h1>\n<p>So after a few hours of research I stumbled upon <a href=\"https://cds.climate.copernicus.eu/datasets/reanalysis-era5-single-levels?tab=overview\"><strong>ERA5</strong></a>, it's probably the best historical dataset available for free. I did consider trying to get IMD data specific to India, but I guess ERA5 is good enough for a prototype. \nThe dataset on its own is probably very huge (~ few Petabytes), so I decided to get only a few months and a few timestamps worth of data from <strong>2024</strong>, i.e, <strong>Sep, Oct, Nov, Dec</strong>. And roughly <strong>4 hour</strong> intervals.<br />\nThe website conviniently provides it's api guide, as well as auto-generation of the api request. <br />\nhere is the code:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">cdsapi</span>\n\n<span class=\"n\">dataset</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;reanalysis-era5-single-levels&quot;</span>\n<span class=\"n\">request</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s2\">&quot;product_type&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;reanalysis&quot;</span><span class=\"p\">],</span>\n    <span class=\"s2\">&quot;variable&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;10m_u_component_of_wind&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;10m_v_component_of_wind&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;2m_temperature&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;mean_sea_level_pressure&quot;</span>\n    <span class=\"p\">],</span>\n    <span class=\"s2\">&quot;year&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;2024&quot;</span><span class=\"p\">],</span>\n    <span class=\"s2\">&quot;month&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;09&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;10&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;11&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;12&quot;</span><span class=\"p\">],</span>\n    <span class=\"s2\">&quot;day&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;01&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;02&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;03&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;04&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;05&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;06&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;07&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;08&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;09&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;10&quot;</span><span class=\"p\">,</span>\n             <span class=\"s2\">&quot;11&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;12&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;13&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;14&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;15&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;16&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;17&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;18&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;19&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;20&quot;</span><span class=\"p\">,</span>\n             <span class=\"s2\">&quot;21&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;22&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;23&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;24&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;25&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;26&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;27&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;28&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;29&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;30&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;31&quot;</span><span class=\"p\">],</span>\n    <span class=\"s2\">&quot;time&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;00:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;01:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;04:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;08:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;12:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;16:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;20:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;23:00&quot;</span><span class=\"p\">],</span>\n    <span class=\"s2\">&quot;data_format&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;netcdf&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;download_format&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;unarchived&quot;</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">cdsapi</span><span class=\"o\">.</span><span class=\"n\">Client</span><span class=\"p\">()</span>\n<span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">retrieve</span><span class=\"p\">(</span><span class=\"n\">dataset</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">download</span><span class=\"p\">()</span>\n</code></pre></div>\n\n<p>(NOTE: apparently you're supposed to have a <code>.cdsapirc</code>, for authentication. But it's also supposed to be in <code>$HOME</code>, which makes it worse, and I spent a few hours figuring out how to have everything contained in the project folder itself (didn't work in the end))</p>\n<p>If you didn't notice it yet, this was a really bad idea, here is why:   </p>\n<ul>\n<li>I talked about weather patterns and stuff before, so it's kind of ironic, having <strong>4 consecutive months of weather data</strong> instead of spaced out ones.</li>\n<li>For our use case, we wanted to <strong>Nowcast</strong> i.e predict hourly or even more fine-grained- having our original data itself be spaced by <strong>4 hours</strong>, makes it less than ideal. We might have to either <strong>Re-download</strong> with hourly data, or <strong>interpolate locally</strong> (which seems to be a lot of work) in the future.</li>\n</ul>\n<p>A few other problems exist, but those are the major problems that I might have to tackle in the future. Now, on to the fun part.    </p>\n<p>I did some searching and came across this library called <code>cartopy</code> (<a href=\"https://scitools.org.uk/cartopy/docs/latest/\">link</a>, <a href=\"https://github.com/SciTools/cartopy\">github</a>), that seems to integrate seamlessly with <code>matplotlib</code>, and displays maps.</p>\n<p>Here are some plots:</p>\n<p><br></p>\n<p><img src=\"/static/images/Weatherai/temp_2024-09-30T00-00.png\" class=\"invertible\">\n<br>\n<img src=\"/static/images/Weatherai/temp_2024-09-30T01-00.png\" class=\"invertible\">\n<br>\n<img src=\"/static/images/Weatherai/temp_2024-09-30T04-00.png\" class=\"invertible\">\n<br>\n<img src=\"/static/images/Weatherai/temp_2024-09-30T12-00.png\" class=\"invertible\"></p>\n<p><br></p>\n<p>I got some initial output but It was simply a test and I've already ran into a lot of roadblocks. I am going to have to start from scratch, add total precipitation(tp), total cloud cover (tcc) and possibly switch to GRIB next time. Also have to look at the official docs, and make a project spec. See you next time.</p>\n<p><strong>You can read the next part <a href=\"weather-ai-part-2.html\">here</a></strong></p>","metadata":{"date":"Thu, 10 Apr 2025 00:00:00 GMT","slug":"weather-ai-part-1","tags":["python","blog","weather"],"title":"Forecasting Weather (Part 1): Ideas & Looking At The Data"},"slug":"weather-ai-part-1","toc":"<div class=\"toc\">\n<ul>\n<li><a href=\"#introduction\">Introduction:</a></li>\n<li><a href=\"#but-how-does-weather-even-work\">But How Does Weather Even Work?</a><ul>\n<li><a href=\"#the-basic-mechanics\">The Basic Mechanics:</a><ul>\n<li><a href=\"#convection\">Convection:</a></li>\n<li><a href=\"#drop-in-temperature-with-height\">Drop In Temperature with Height:</a></li>\n<li><a href=\"#drop-in-pressure-with-height\">Drop In Pressure with Height:</a></li>\n<li><a href=\"#pressure-differences-drive-wind\">Pressure Differences Drive Wind:</a></li>\n<li><a href=\"#water-heatscools-faster-than-land\">Water Heats/Cools Faster than Land:</a></li>\n</ul>\n</li>\n<li><a href=\"#advanced-mechanics\">Advanced Mechanics:</a><ul>\n<li><a href=\"#the-pressure-belts\">The Pressure Belts:</a></li>\n<li><a href=\"#ocean-currents\">Ocean Currents:</a></li>\n<li><a href=\"#rain-shadow-returning-monsoons\">Rain Shadow &amp; Returning Monsoons:</a></li>\n<li><a href=\"#el-nino-and-la-nina\">El Nino and La Nina:</a><ul>\n<li><a href=\"#el-nino-effects\">El Nino Effects</a></li>\n<li><a href=\"#la-nina-effects\">La Nina Effects</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#the-old-way-nwp\">The Old Way (NWP):</a></li>\n<li><a href=\"#peeking-at-the-data\">Peeking at the Data:</a></li>\n</ul>\n</div>\n"},{"content_html":"<p><strong>You can read the previous part <a href=\"weather-ai-part-1.html\">here</a>.</strong></p>\n<h1 id=\"overview\">Overview</h1>\n<p>Last time was a disaster&mdash;I realized I had naively thrown together some code without really knowing what I was doing. We were also missing the key variables, i.e., <strong>total precipitation (tp)</strong> and <strong>total cloud cover (tcc)</strong>. As I dug into the data, I hit a ton of errors and weird quirks. Things got worse because I was lazy and tried using AI to fix them, but that flopped, so I ditched it halfway through.\nIn this post, I want to walk through all the errors in the order I stumbled into them and finally get to writing some helper functions to plot and visualize the data.</p>\n<p><br></p>\n<h1 id=\"the-right-data\">The Right Data</h1>\n<p>Okay, so having data spaced at <strong>4 hour intervals</strong>, for a now-casting project, was far from ideal. So instead I decided to take only 1 month of data but have complete hourly data.\nI also included <strong>total precipitation (tp)</strong>, <strong>total cloud cover (tcc)</strong>, and <strong>geopotential (z)</strong> (because we might need it to augment the model with topological data constraints, but we'll see).\nI also switched to <strong>GRIB</strong> instead of <strong>NetCDF</strong>, the reasons are as you will see ahead.</p>\n<p>Also we needed the best month to get the data from, with plenty of activity going on, so I picked <strong>July 2024</strong>.</p>\n<p>So the final download request looked like:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">cdsapi</span>\n\n<span class=\"n\">dataset</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;reanalysis-era5-single-levels&quot;</span>\n<span class=\"n\">request</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s2\">&quot;product_type&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;reanalysis&quot;</span><span class=\"p\">],</span>\n    <span class=\"s2\">&quot;variable&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;2m_temperature&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;10m_u_component_of_wind&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;10m_v_component_of_wind&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;relative_humidity&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;total_precipitation&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;surface_pressure&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;total_cloud_cover&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;geopotential&quot;</span>\n    <span class=\"p\">],</span>\n    <span class=\"s2\">&quot;year&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;2024&quot;</span><span class=\"p\">],</span>\n    <span class=\"s2\">&quot;month&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;07&quot;</span><span class=\"p\">],</span>\n    <span class=\"s2\">&quot;day&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;01&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;02&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;03&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;04&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;05&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;06&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;07&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;08&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;09&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;10&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;11&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;12&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;13&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;14&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;15&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;16&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;17&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;18&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;19&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;20&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;21&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;22&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;23&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;24&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;25&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;26&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;27&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;28&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;29&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;30&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;31&quot;</span>\n    <span class=\"p\">],</span>\n    <span class=\"s2\">&quot;time&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s2\">&quot;00:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;01:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;02:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;03:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;04:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;05:00&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;06:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;07:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;08:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;09:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;10:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;11:00&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;12:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;13:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;14:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;15:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;16:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;17:00&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;18:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;19:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;20:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;21:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;22:00&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;23:00&quot;</span>\n    <span class=\"p\">],</span>\n    <span class=\"s2\">&quot;data_format&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;grib&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;download_format&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;unarchived&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;area&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;global&quot;</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">client</span> <span class=\"o\">=</span> <span class=\"n\">cdsapi</span><span class=\"o\">.</span><span class=\"n\">Client</span><span class=\"p\">()</span>\n<span class=\"n\">client</span><span class=\"o\">.</span><span class=\"n\">retrieve</span><span class=\"p\">(</span><span class=\"n\">dataset</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">download</span><span class=\"p\">()</span>\n</code></pre></div>\n\n<p>(I saved the file as <code>era5_july2024_global_hourly.grib</code>)    </p>\n<p><br></p>\n<h1 id=\"problem-1-heterogenous-data\">Problem 1: Heterogenous Data</h1>\n<p>I didn't know the structure of the data I was using, so it was quite the headache to figure stuff out. I did come across this website: <a href=\"https://codes.ecmwf.int/grib/param-db/\">ECMWF Parameter Database</a>. But It was already too late. </p>\n<p>(NOTE: the next part is before I switched to GRIB)</p>\n<p>So excited to try out the new dataset, I did:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">xarray</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">xr</span>\n\n<span class=\"c1\"># Load the NetCDF file</span>\n<span class=\"n\">ds</span> <span class=\"o\">=</span> <span class=\"n\">xr</span><span class=\"o\">.</span><span class=\"n\">open_dataset</span><span class=\"p\">(</span><span class=\"s2\">&quot;era5_july2024_global_hourly.nc&quot;</span><span class=\"p\">,</span> <span class=\"n\">engine</span><span class=\"o\">=</span><span class=\"s2\">&quot;netcdf4&quot;</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Print the dataset summary</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">ds</span><span class=\"p\">)</span>\n</code></pre></div>\n\n<p>and gracefully got the error:</p>\n<div class=\"error-block\">\n<details>\n<summary>OSError: NetCDF: Unknown file format</summary>\n<pre>\n---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\file_manager.py:211, in CachingFileManager._acquire_with_cache_info(self, needs_lock)\n    210 try:\n--> 211     file = self._cache[self._key]\n    212 except KeyError:\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\lru_cache.py:56, in LRUCache.__getitem__(self, key)\n    55 with self._lock:\n---> 56     value = self._cache[key]\n    57     self._cache.move_to_end(key)\n\nKeyError: [<class 'netCDF4._netCDF4.Dataset'>, ('c:\\\\dev\\\\weather\\\\era5_july2024_global_hourly.nc',), 'r', (('clobber', True), ('diskless', False), ('format', 'NETCDF4'), ('persist', False)), 'df0025b7-69bf-4128-8320-5d00cce38840']\n\nDuring handling of the above exception, another exception occurred:\n\nOSError                                   Traceback (most recent call last)\nCell In[4], line 4\n    1 import xarray as xr\n    3 # Load the NetCDF file\n----> 4 ds = xr.open_dataset(\"era5_july2024_global_hourly.nc\", engine=\"netcdf4\")\n    6 # Print the dataset summary\n    7 print(ds)\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\api.py:687, in open_dataset(filename_or_obj, engine, chunks, cache, decode_cf, mask_and_scale, decode_times, decode_timedelta, use_cftime, concat_characters, decode_coords, drop_variables, inline_array, chunked_array_type, from_array_kwargs, backend_kwargs, **kwargs)\n    675 decoders = _resolve_decoders_kwargs(\n    676     decode_cf,\n    677     open_backend_dataset_parameters=backend.open_dataset_parameters,\n(...)\n    683     decode_coords=decode_coords,\n    684 )\n    686 overwrite_encoded_chunks = kwargs.pop(\"overwrite_encoded_chunks\", None)\n--> 687 backend_ds = backend.open_dataset(\n    688     filename_or_obj,\n    689     drop_variables=drop_variables,\n    690     **decoders,\n    691     **kwargs,\n    692 )\n    693 ds = _dataset_from_backend_dataset(\n    694     backend_ds,\n    695     filename_or_obj,\n(...)\n    705     **kwargs,\n    706 )\n    707 return ds\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\netCDF4_.py:666, in NetCDF4BackendEntrypoint.open_dataset(self, filename_or_obj, mask_and_scale, decode_times, concat_characters, decode_coords, drop_variables, use_cftime, decode_timedelta, group, mode, format, clobber, diskless, persist, auto_complex, lock, autoclose)\n    644 def open_dataset(\n    645     self,\n    646     filename_or_obj: str | os.PathLike[Any] | ReadBuffer | AbstractDataStore,\n(...)\n    663     autoclose=False,\n    664 ) -> Dataset:\n    665     filename_or_obj = _normalize_path(filename_or_obj)\n--> 666     store = NetCDF4DataStore.open(\n    667         filename_or_obj,\n    668         mode=mode,\n    669         format=format,\n    670         group=group,\n    671         clobber=clobber,\n    672         diskless=diskless,\n    673         persist=persist,\n    674         auto_complex=auto_complex,\n    675         lock=lock,\n    676         autoclose=autoclose,\n    677     )\n    679     store_entrypoint = StoreBackendEntrypoint()\n    680     with close_on_error(store):\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\netCDF4_.py:452, in NetCDF4DataStore.open(cls, filename, mode, format, group, clobber, diskless, persist, auto_complex, lock, lock_maker, autoclose)\n    448     kwargs[\"auto_complex\"] = auto_complex\n    449 manager = CachingFileManager(\n    450     netCDF4.Dataset, filename, mode=mode, kwargs=kwargs\n    451 )\n--> 452 return cls(manager, group=group, mode=mode, lock=lock, autoclose=autoclose)\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\netCDF4_.py:393, in NetCDF4DataStore.__init__(self, manager, group, mode, lock, autoclose)\n    391 self._group = group\n    392 self._mode = mode\n--> 393 self.format = self.ds.data_model\n    394 self._filename = self.ds.filepath()\n    395 self.is_remote = is_remote_uri(self._filename)\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\netCDF4_.py:461, in NetCDF4DataStore.ds(self)\n    459 @property\n    460 def ds(self):\n--> 461     return self._acquire()\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\netCDF4_.py:455, in NetCDF4DataStore._acquire(self, needs_lock)\n    454 def _acquire(self, needs_lock=True):\n--> 455     with self._manager.acquire_context(needs_lock) as root:\n    456         ds = _nc4_require_group(root, self._group, self._mode)\n    457     return ds\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\contextlib.py:137, in _GeneratorContextManager.__enter__(self)\n    135 del self.args, self.kwds, self.func\n    136 try:\n--> 137     return next(self.gen)\n    138 except StopIteration:\n    139     raise RuntimeError(\"generator didn't yield\") from None\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\file_manager.py:199, in CachingFileManager.acquire_context(self, needs_lock)\n    196 @contextlib.contextmanager\n    197 def acquire_context(self, needs_lock=True):\n    198     \"\"\"Context manager for acquiring a file.\"\"\"\n--> 199     file, cached = self._acquire_with_cache_info(needs_lock)\n    200     try:\n    201         yield file\n\nFile c:\\Users\\*****\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\xarray\\backends\\file_manager.py:217, in CachingFileManager._acquire_with_cache_info(self, needs_lock)\n    215     kwargs = kwargs.copy()\n    216     kwargs[\"mode\"] = self._mode\n--> 217 file = self._opener(*self._args, **kwargs)\n    218 if self._mode == \"w\":\n    219     # ensure file doesn't get overridden when opened again\n    220     self._mode = \"a\"\n\nFile src\\\\netCDF4\\\\_netCDF4.pyx:2521, in netCDF4._netCDF4.Dataset.__init__()\n\nFile src\\\\netCDF4\\\\_netCDF4.pyx:2158, in netCDF4._netCDF4._ensure_nc_success()\n\n**OSError: [Errno -51] NetCDF: Unknown file format: 'c:\\\\dev\\\\weather\\\\era5_july2024_global_hourly.nc'**\n</pre>\n</details>\n</div>\n\n<p>I should be crying (I did)&mdash;but I thought \"maybe the download got corrupted\". So I tried about thrice just to make sure&mdash; But that wasn't it. </p>\n<p>So the thing is&mdash; <strong>This did not happen with the original test dataset</strong>. Which troubled me to no end. I speculated that one of the variables messed up the data, so after several tries selectively removing and downloading and testing, I narrowed the suspect down to <strong>Total Precipitation (tp)</strong>. (This did take a lot of time as the datasets weren't small ~19GB).</p>\n<p>Then I noticed that the ERA5 website says that the NetCDF version is <strong>\"experimental\"</strong>. So I switched over to the <strong>GRIB</strong> format. \nQuite conveniently a library called <code>cfgrib</code> is available, and also works with xarray.</p>\n<p>So I tried again with the GRIB version:   </p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">xarray</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">xr</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">numpy</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">np</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">pandas</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">pd</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">os</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">matplotlib.pyplot</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">plt</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">cfgrib</span>\n\n<span class=\"n\">grib_ds</span> <span class=\"o\">=</span> <span class=\"n\">xr</span><span class=\"o\">.</span><span class=\"n\">open_dataset</span><span class=\"p\">(</span><span class=\"s2\">&quot;era5_july2024_global_hourly.grib&quot;</span><span class=\"p\">,</span> <span class=\"n\">engine</span><span class=\"o\">=</span><span class=\"s2\">&quot;cfgrib&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">grib_ds</span>\n</code></pre></div>\n\n<p>It didn't work, But more importantly it showed something really insightful:</p>\n<div class=\"error-block\">\n<details>\n<summary>Skipping variable: paramId==228 shortName='tp'</summary>\n<pre>\nskipping variable: paramId==228 shortName='tp'\nTraceback (most recent call last):\n  File \"c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\cfgrib\\dataset.py\", line 725, in build_dataset_components\n    dict_merge(variables, coord_vars)\n  File \"c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\cfgrib\\dataset.py\", line 641, in dict_merge\n    raise DatasetBuildError(\ncfgrib.dataset.DatasetBuildError: key present and new value is different: key='time' value=Variable(dimensions=('time',), data=array([1719792000, 1719795600, 1719799200, 1719802800, 1719806400,\n       1719810000, 1719813600, 1719817200, 1719820800, 1719824400,\n       1719828000, 1719831600, 1719835200, 1719838800, 1719842400,\n       1719846000, 1719849600, 1719853200, 1719856800, 1719860400,\n       1719864000, 1719867600, 1719871200, 1719874800, 1719878400,\n       1719882000, 1719885600, 1719889200, 1719892800, 1719896400,\n       1719900000, 1719903600, 1719907200, 1719910800, 1719914400,\n       1719918000, 1719921600, 1719925200, 1719928800, 1719932400,\n       1719936000, 1719939600, 1719943200, 1719946800, 1719950400,\n       1719954000, 1719957600, 1719961200, 1719964800, 1719968400,\n       1719972000, 1719975600, 1719979200, 1719982800, 1719986400,\n       1719990000, 1719993600, 1719997200, 1720000800, 1720004400,\n       1720008000, 1720011600, 1720015200, 1720018800, 1720022400,\n       1720026000, 1720029600, 1720033200, 1720036800, 1720040400,\n       1720044000, 1720047600, 1720051200, 1720054800, 1720058400,\n       1720062000, 1720065600, 1720069200, 1720072800, 1720076400,\n       1720080000, 1720083600, 1720087200, 1720090800, 1720094400,\n       1720098000, 1720101600, 1720105200, 1720108800, 1720112400,\n       1720116000, 1720119600, 1720123200, 1720126800, 1720130400,\n       1720134000, 1720137600, 1720141200, 1720144800, 1720148400,\n       1720152000, 1720155600, 1720159200, 1720162800, 1720166400,\n       1720170000, 1720173600, 1720177200, 1720180800, 1720184400,\n       1720188000, 1720191600, 1720195200, 1720198800, 1720202400,\n       1720206000, 1720209600, 1720213200, 1720216800, 1720220400,\n       1720224000, 1720227600, 1720231200, 1720234800, 1720238400,\n       1720242000, 1720245600, 1720249200, 1720252800, 1720256400,\n       1720260000, 1720263600, 1720267200, 1720270800, 1720274400,\n       1720278000, 1720281600, 1720285200, 1720288800, 1720292400,\n       1720296000, 1720299600, 1720303200, 1720306800, 1720310400,\n       1720314000, 1720317600, 1720321200, 1720324800, 1720328400,\n       1720332000, 1720335600, 1720339200, 1720342800, 1720346400,\n       1720350000, 1720353600, 1720357200, 1720360800, 1720364400,\n       1720368000, 1720371600, 1720375200, 1720378800, 1720382400,\n       1720386000, 1720389600, 1720393200, 1720396800, 1720400400,\n       1720404000, 1720407600, 1720411200, 1720414800, 1720418400,\n       1720422000, 1720425600, 1720429200, 1720432800, 1720436400,\n       1720440000, 1720443600, 1720447200, 1720450800, 1720454400,\n       1720458000, 1720461600, 1720465200, 1720468800, 1720472400,\n       1720476000, 1720479600, 1720483200, 1720486800, 1720490400,\n       1720494000, 1720497600, 1720501200, 1720504800, 1720508400,\n       1720512000, 1720515600, 1720519200, 1720522800, 1720526400,\n       1720530000, 1720533600, 1720537200, 1720540800, 1720544400,\n       1720548000, 1720551600, 1720555200, 1720558800, 1720562400,\n       1720566000, 1720569600, 1720573200, 1720576800, 1720580400,\n       1720584000, 1720587600, 1720591200, 1720594800, 1720598400,\n       1720602000, 1720605600, 1720609200, 1720612800, 1720616400,\n       1720620000, 1720623600, 1720627200, 1720630800, 1720634400,\n       1720638000, 1720641600, 1720645200, 1720648800, 1720652400,\n       1720656000, 1720659600, 1720663200, 1720666800, 1720670400,\n       1720674000, 1720677600, 1720681200, 1720684800, 1720688400,\n       1720692000, 1720695600, 1720699200, 1720702800, 1720706400,\n       1720710000, 1720713600, 1720717200, 1720720800, 1720724400,\n       1720728000, 1720731600, 1720735200, 1720738800, 1720742400,\n       1720746000, 1720749600, 1720753200, 1720756800, 1720760400,\n       1720764000, 1720767600, 1720771200, 1720774800, 1720778400,\n       1720782000, 1720785600, 1720789200, 1720792800, 1720796400,\n       1720800000, 1720803600, 1720807200, 1720810800, 1720814400,\n       1720818000, 1720821600, 1720825200, 1720828800, 1720832400,\n       1720836000, 1720839600, 1720843200, 1720846800, 1720850400,\n       1720854000, 1720857600, 1720861200, 1720864800, 1720868400,\n       1720872000, 1720875600, 1720879200, 1720882800, 1720886400,\n       1720890000, 1720893600, 1720897200, 1720900800, 1720904400,\n       1720908000, 1720911600, 1720915200, 1720918800, 1720922400,\n       1720926000, 1720929600, 1720933200, 1720936800, 1720940400,\n       1720944000, 1720947600, 1720951200, 1720954800, 1720958400,\n       1720962000, 1720965600, 1720969200, 1720972800, 1720976400,\n       1720980000, 1720983600, 1720987200, 1720990800, 1720994400,\n       1720998000, 1721001600, 1721005200, 1721008800, 1721012400,\n       1721016000, 1721019600, 1721023200, 1721026800, 1721030400,\n       1721034000, 1721037600, 1721041200, 1721044800, 1721048400,\n       1721052000, 1721055600, 1721059200, 1721062800, 1721066400,\n       1721070000, 1721073600, 1721077200, 1721080800, 1721084400,\n       1721088000, 1721091600, 1721095200, 1721098800, 1721102400,\n       1721106000, 1721109600, 1721113200, 1721116800, 1721120400,\n       1721124000, 1721127600, 1721131200, 1721134800, 1721138400,\n       1721142000, 1721145600, 1721149200, 1721152800, 1721156400,\n       1721160000, 1721163600, 1721167200, 1721170800, 1721174400,\n       1721178000, 1721181600, 1721185200, 1721188800, 1721192400,\n       1721196000, 1721199600, 1721203200, 1721206800, 1721210400,\n       1721214000, 1721217600, 1721221200, 1721224800, 1721228400,\n       1721232000, 1721235600, 1721239200, 1721242800, 1721246400,\n       1721250000, 1721253600, 1721257200, 1721260800, 1721264400,\n       1721268000, 1721271600, 1721275200, 1721278800, 1721282400,\n       1721286000, 1721289600, 1721293200, 1721296800, 1721300400,\n       1721304000, 1721307600, 1721311200, 1721314800, 1721318400,\n       1721322000, 1721325600, 1721329200, 1721332800, 1721336400,\n       1721340000, 1721343600, 1721347200, 1721350800, 1721354400,\n       1721358000, 1721361600, 1721365200, 1721368800, 1721372400,\n       1721376000, 1721379600, 1721383200, 1721386800, 1721390400,\n       1721394000, 1721397600, 1721401200, 1721404800, 1721408400,\n       1721412000, 1721415600, 1721419200, 1721422800, 1721426400,\n       1721430000, 1721433600, 1721437200, 1721440800, 1721444400,\n       1721448000, 1721451600, 1721455200, 1721458800, 1721462400,\n       1721466000, 1721469600, 1721473200, 1721476800, 1721480400,\n       1721484000, 1721487600, 1721491200, 1721494800, 1721498400,\n       1721502000, 1721505600, 1721509200, 1721512800, 1721516400,\n       1721520000, 1721523600, 1721527200, 1721530800, 1721534400,\n       1721538000, 1721541600, 1721545200, 1721548800, 1721552400,\n       1721556000, 1721559600, 1721563200, 1721566800, 1721570400,\n       1721574000, 1721577600, 1721581200, 1721584800, 1721588400,\n       1721592000, 1721595600, 1721599200, 1721602800, 1721606400,\n       1721610000, 1721613600, 1721617200, 1721620800, 1721624400,\n       1721628000, 1721631600, 1721635200, 1721638800, 1721642400,\n       1721646000, 1721649600, 1721653200, 1721656800, 1721660400,\n       1721664000, 1721667600, 1721671200, 1721674800, 1721678400,\n       1721682000, 1721685600, 1721689200, 1721692800, 1721696400,\n       1721700000, 1721703600, 1721707200, 1721710800, 1721714400,\n       1721718000, 1721721600, 1721725200, 1721728800, 1721732400,\n       1721736000, 1721739600, 1721743200, 1721746800, 1721750400,\n       1721754000, 1721757600, 1721761200, 1721764800, 1721768400,\n       1721772000, 1721775600, 1721779200, 1721782800, 1721786400,\n       1721790000, 1721793600, 1721797200, 1721800800, 1721804400,\n       1721808000, 1721811600, 1721815200, 1721818800, 1721822400,\n       1721826000, 1721829600, 1721833200, 1721836800, 1721840400,\n       1721844000, 1721847600, 1721851200, 1721854800, 1721858400,\n       1721862000, 1721865600, 1721869200, 1721872800, 1721876400,\n       1721880000, 1721883600, 1721887200, 1721890800, 1721894400,\n       1721898000, 1721901600, 1721905200, 1721908800, 1721912400,\n       1721916000, 1721919600, 1721923200, 1721926800, 1721930400,\n       1721934000, 1721937600, 1721941200, 1721944800, 1721948400,\n       1721952000, 1721955600, 1721959200, 1721962800, 1721966400,\n       1721970000, 1721973600, 1721977200, 1721980800, 1721984400,\n       1721988000, 1721991600, 1721995200, 1721998800, 1722002400,\n       1722006000, 1722009600, 1722013200, 1722016800, 1722020400,\n       1722024000, 1722027600, 1722031200, 1722034800, 1722038400,\n       1722042000, 1722045600, 1722049200, 1722052800, 1722056400,\n       1722060000, 1722063600, 1722067200, 1722070800, 1722074400,\n       1722078000, 1722081600, 1722085200, 1722088800, 1722092400,\n       1722096000, 1722099600, 1722103200, 1722106800, 1722110400,\n       1722114000, 1722117600, 1722121200, 1722124800, 1722128400,\n       1722132000, 1722135600, 1722139200, 1722142800, 1722146400,\n       1722150000, 1722153600, 1722157200, 1722160800, 1722164400,\n       1722168000, 1722171600, 1722175200, 1722178800, 1722182400,\n       1722186000, 1722189600, 1722193200, 1722196800, 1722200400,\n       1722204000, 1722207600, 1722211200, 1722214800, 1722218400,\n       1722222000, 1722225600, 1722229200, 1722232800, 1722236400,\n       1722240000, 1722243600, 1722247200, 1722250800, 1722254400,\n       1722258000, 1722261600, 1722265200, 1722268800, 1722272400,\n       1722276000, 1722279600, 1722283200, 1722286800, 1722290400,\n       1722294000, 1722297600, 1722301200, 1722304800, 1722308400,\n       1722312000, 1722315600, 1722319200, 1722322800, 1722326400,\n       1722330000, 1722333600, 1722337200, 1722340800, 1722344400,\n       1722348000, 1722351600, 1722355200, 1722358800, 1722362400,\n       1722366000, 1722369600, 1722373200, 1722376800, 1722380400,\n       1722384000, 1722387600, 1722391200, 1722394800, 1722398400,\n       1722402000, 1722405600, 1722409200, 1722412800, 1722416400,\n       1722420000, 1722423600, 1722427200, 1722430800, 1722434400,\n       1722438000, 1722441600, 1722445200, 1722448800, 1722452400,\n       1722456000, 1722459600, 1722463200, 1722466800])) new_value=Variable(dimensions=('time',), data=array([1719770400, 1719813600, 1719856800, 1719900000, 1719943200,\n       1719986400, 1720029600, 1720072800, 1720116000, 1720159200,\n       1720202400, 1720245600, 1720288800, 1720332000, 1720375200,\n       1720418400, 1720461600, 1720504800, 1720548000, 1720591200,\n       1720634400, 1720677600, 1720720800, 1720764000, 1720807200,\n       1720850400, 1720893600, 1720936800, 1720980000, 1721023200,\n       1721066400, 1721109600, 1721152800, 1721196000, 1721239200,\n       1721282400, 1721325600, 1721368800, 1721412000, 1721455200,\n       1721498400, 1721541600, 1721584800, 1721628000, 1721671200,\n       1721714400, 1721757600, 1721800800, 1721844000, 1721887200,\n       1721930400, 1721973600, 1722016800, 1722060000, 1722103200,\n       1722146400, 1722189600, 1722232800, 1722276000, 1722319200,\n       1722362400, 1722405600, 1722448800]))\n</pre>\n</details>\n</div>\n\n<p>That was it! it was <code>tp</code>. Furthermore, it showed me exactly why the data was different. It is because the <strong>timestamps are different</strong>. <code>tp</code> was different from the other variables, which made the dataset heterogenous and xarray was unable to load it. (xarray always assumes homogenous data, tried to merge it, and failed).\nSo what do we do? After some searching I realized that cfgrib has its own load function that can auto-detect the different datasets present in the file. Something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">xarray</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">xr</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">numpy</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">np</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">pandas</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">pd</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">os</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">matplotlib.pyplot</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">plt</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">cfgrib</span>\n\n<span class=\"n\">dataset</span> <span class=\"o\">=</span> <span class=\"n\">cfgrib</span><span class=\"o\">.</span><span class=\"n\">open_datasets</span><span class=\"p\">(</span><span class=\"s2\">&quot;era5_july2024_global_hourly.grib&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">ds1</span> <span class=\"o\">=</span> <span class=\"n\">dataset</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"n\">ds2</span> <span class=\"o\">=</span> <span class=\"n\">dataset</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n</code></pre></div>\n\n<p>No Errors! Finally. There were in-fact two datasets in that file.</p>\n<p>Here is ds1 (everything except tp): \n[Sorry I'm lazy but please view these two outputs in <code>lightmode</code> (toggle theme)]</p>\n<div class=\"output-block\">\n<details>\n<summary>Dataset 1 (Xarray Dataset)</summary>\n<pre>\n<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1f1f1f;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"\u25ba\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"\u25bc\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 19GB\nDimensions:     (time: 744, latitude: 721, longitude: 1440)\nCoordinates:\n    number      int64 8B 0\n  * time        (time) datetime64[ns] 6kB 2024-07-01 ... 2024-07-31T23:00:00\n    step        timedelta64[ns] 8B 00:00:00\n    surface     float64 8B 0.0\n  * latitude    (latitude) float64 6kB 90.0 89.75 89.5 ... -89.5 -89.75 -90.0\n  * longitude   (longitude) float64 12kB 0.0 0.25 0.5 0.75 ... 359.2 359.5 359.8\n    valid_time  (time) datetime64[ns] 6kB 2024-07-01 ... 2024-07-31T23:00:00\nData variables:\n    z           (time, latitude, longitude) float32 3GB ...\n    sp          (time, latitude, longitude) float32 3GB ...\n    tcc         (time, latitude, longitude) float32 3GB ...\n    u10         (time, latitude, longitude) float32 3GB ...\n    v10         (time, latitude, longitude) float32 3GB ...\n    t2m         (time, latitude, longitude) float32 3GB ...\nAttributes:\n    GRIB_edition:            1\n    GRIB_centre:             ecmf\n    GRIB_centreDescription:  European Centre for Medium-Range Weather Forecasts\n    GRIB_subCentre:          0\n    Conventions:             CF-1.7\n    institution:             European Centre for Medium-Range Weather Forecasts</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-78a2e840-2d58-4cd7-b21a-46166c1df235' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-78a2e840-2d58-4cd7-b21a-46166c1df235' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 744</li><li><span class='xr-has-index'>latitude</span>: 721</li><li><span class='xr-has-index'>longitude</span>: 1440</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-d71f865d-781c-47ad-a127-a7cbb87263f4' class='xr-section-summary-in' type='checkbox'  checked><label for='section-d71f865d-781c-47ad-a127-a7cbb87263f4' class='xr-section-summary' >Coordinates: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>number</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-ad21dc15-911d-4202-8a0e-7aacca8a2cc8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ad21dc15-911d-4202-8a0e-7aacca8a2cc8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5667e1ee-f7a7-4477-b704-79793a339f67' class='xr-var-data-in' type='checkbox'><label for='data-5667e1ee-f7a7-4477-b704-79793a339f67' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>ensemble member numerical id</dd><dt><span>units :</span></dt><dd>1</dd><dt><span>standard_name :</span></dt><dd>realization</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-07-01 ... 2024-07-31T23:00:00</div><input id='attrs-cdea648c-a1e6-4639-b9df-ce01f97caac8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cdea648c-a1e6-4639-b9df-ce01f97caac8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b8f7d9a4-f54d-4711-b91b-a581698da5ea' class='xr-var-data-in' type='checkbox'><label for='data-b8f7d9a4-f54d-4711-b91b-a581698da5ea' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>initial time of forecast</dd><dt><span>standard_name :</span></dt><dd>forecast_reference_time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-07-01T00:00:00.000000000&#x27;, &#x27;2024-07-01T01:00:00.000000000&#x27;,\n       &#x27;2024-07-01T02:00:00.000000000&#x27;, ..., &#x27;2024-07-31T21:00:00.000000000&#x27;,\n       &#x27;2024-07-31T22:00:00.000000000&#x27;, &#x27;2024-07-31T23:00:00.000000000&#x27;],\n      shape=(744,), dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>step</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>timedelta64[ns]</div><div class='xr-var-preview xr-preview'>00:00:00</div><input id='attrs-a03040b7-6218-480e-a12f-bd4a04459168' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a03040b7-6218-480e-a12f-bd4a04459168' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0f330e7b-4436-4439-95f6-04714f8defe8' class='xr-var-data-in' type='checkbox'><label for='data-0f330e7b-4436-4439-95f6-04714f8defe8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time since forecast_reference_time</dd><dt><span>standard_name :</span></dt><dd>forecast_period</dd></dl></div><div class='xr-var-data'><pre>array(0, dtype=&#x27;timedelta64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>surface</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0</div><input id='attrs-07e68e86-4466-4906-a9e7-d9e49b98b608' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-07e68e86-4466-4906-a9e7-d9e49b98b608' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-12c341cc-6e10-486e-bc0f-483e224e9979' class='xr-var-data-in' type='checkbox'><label for='data-12c341cc-6e10-486e-bc0f-483e224e9979' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>original GRIB coordinate for key: level(surface)</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array(0.)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>latitude</span></div><div class='xr-var-dims'>(latitude)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>90.0 89.75 89.5 ... -89.75 -90.0</div><input id='attrs-b97bdea6-4fb8-4f3b-845f-186d63c39ffe' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b97bdea6-4fb8-4f3b-845f-186d63c39ffe' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1bb62bf5-ce36-4ecc-948d-8546b865338c' class='xr-var-data-in' type='checkbox'><label for='data-1bb62bf5-ce36-4ecc-948d-8546b865338c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>stored_direction :</span></dt><dd>decreasing</dd></dl></div><div class='xr-var-data'><pre>array([ 90.  ,  89.75,  89.5 , ..., -89.5 , -89.75, -90.  ], shape=(721,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>longitude</span></div><div class='xr-var-dims'>(longitude)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.25 0.5 ... 359.2 359.5 359.8</div><input id='attrs-ff9b1412-8ba0-4f97-9a63-0f709273e83c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ff9b1412-8ba0-4f97-9a63-0f709273e83c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e12eeff2-41c0-477b-8361-aa6994b92e8e' class='xr-var-data-in' type='checkbox'><label for='data-e12eeff2-41c0-477b-8361-aa6994b92e8e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>longitude</dd></dl></div><div class='xr-var-data'><pre>array([0.0000e+00, 2.5000e-01, 5.0000e-01, ..., 3.5925e+02, 3.5950e+02,\n       3.5975e+02], shape=(1440,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>valid_time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-07-01 ... 2024-07-31T23:00:00</div><input id='attrs-5f567152-c75e-424f-9900-5b69de3744fc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5f567152-c75e-424f-9900-5b69de3744fc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-49b2447e-c800-4f7f-a121-a8a689471100' class='xr-var-data-in' type='checkbox'><label for='data-49b2447e-c800-4f7f-a121-a8a689471100' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>long_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-07-01T00:00:00.000000000&#x27;, &#x27;2024-07-01T01:00:00.000000000&#x27;,\n       &#x27;2024-07-01T02:00:00.000000000&#x27;, &#x27;2024-07-01T03:00:00.000000000&#x27;,\n       &#x27;2024-07-01T04:00:00.000000000&#x27;, &#x27;2024-07-01T05:00:00.000000000&#x27;,\n       &#x27;2024-07-01T06:00:00.000000000&#x27;, &#x27;2024-07-01T07:00:00.000000000&#x27;,\n       &#x27;2024-07-01T08:00:00.000000000&#x27;, &#x27;2024-07-01T09:00:00.000000000&#x27;,\n       &#x27;2024-07-01T10:00:00.000000000&#x27;, &#x27;2024-07-01T11:00:00.000000000&#x27;,\n       &#x27;2024-07-01T12:00:00.000000000&#x27;, &#x27;2024-07-01T13:00:00.000000000&#x27;,\n       &#x27;2024-07-01T14:00:00.000000000&#x27;, &#x27;2024-07-01T15:00:00.000000000&#x27;,\n       &#x27;2024-07-01T16:00:00.000000000&#x27;, &#x27;2024-07-01T17:00:00.000000000&#x27;,\n       &#x27;2024-07-01T18:00:00.000000000&#x27;, &#x27;2024-07-01T19:00:00.000000000&#x27;,\n       &#x27;2024-07-01T20:00:00.000000000&#x27;, &#x27;2024-07-01T21:00:00.000000000&#x27;,\n       &#x27;2024-07-01T22:00:00.000000000&#x27;, &#x27;2024-07-01T23:00:00.000000000&#x27;,\n       &#x27;2024-07-02T00:00:00.000000000&#x27;, &#x27;2024-07-02T01:00:00.000000000&#x27;,\n       &#x27;2024-07-02T02:00:00.000000000&#x27;, &#x27;2024-07-02T03:00:00.000000000&#x27;,\n       &#x27;2024-07-02T04:00:00.000000000&#x27;, &#x27;2024-07-02T05:00:00.000000000&#x27;,\n       &#x27;2024-07-02T06:00:00.000000000&#x27;, &#x27;2024-07-02T07:00:00.000000000&#x27;,\n       &#x27;2024-07-02T08:00:00.000000000&#x27;, &#x27;2024-07-02T09:00:00.000000000&#x27;,\n       &#x27;2024-07-02T10:00:00.000000000&#x27;, &#x27;2024-07-02T11:00:00.000000000&#x27;,\n       &#x27;2024-07-02T12:00:00.000000000&#x27;, &#x27;2024-07-02T13:00:00.000000000&#x27;,\n       &#x27;2024-07-02T14:00:00.000000000&#x27;, &#x27;2024-07-02T15:00:00.000000000&#x27;,\n...\n       &#x27;2024-07-30T10:00:00.000000000&#x27;, &#x27;2024-07-30T11:00:00.000000000&#x27;,\n       &#x27;2024-07-30T12:00:00.000000000&#x27;, &#x27;2024-07-30T13:00:00.000000000&#x27;,\n       &#x27;2024-07-30T14:00:00.000000000&#x27;, &#x27;2024-07-30T15:00:00.000000000&#x27;,\n       &#x27;2024-07-30T16:00:00.000000000&#x27;, &#x27;2024-07-30T17:00:00.000000000&#x27;,\n       &#x27;2024-07-30T18:00:00.000000000&#x27;, &#x27;2024-07-30T19:00:00.000000000&#x27;,\n       &#x27;2024-07-30T20:00:00.000000000&#x27;, &#x27;2024-07-30T21:00:00.000000000&#x27;,\n       &#x27;2024-07-30T22:00:00.000000000&#x27;, &#x27;2024-07-30T23:00:00.000000000&#x27;,\n       &#x27;2024-07-31T00:00:00.000000000&#x27;, &#x27;2024-07-31T01:00:00.000000000&#x27;,\n       &#x27;2024-07-31T02:00:00.000000000&#x27;, &#x27;2024-07-31T03:00:00.000000000&#x27;,\n       &#x27;2024-07-31T04:00:00.000000000&#x27;, &#x27;2024-07-31T05:00:00.000000000&#x27;,\n       &#x27;2024-07-31T06:00:00.000000000&#x27;, &#x27;2024-07-31T07:00:00.000000000&#x27;,\n       &#x27;2024-07-31T08:00:00.000000000&#x27;, &#x27;2024-07-31T09:00:00.000000000&#x27;,\n       &#x27;2024-07-31T10:00:00.000000000&#x27;, &#x27;2024-07-31T11:00:00.000000000&#x27;,\n       &#x27;2024-07-31T12:00:00.000000000&#x27;, &#x27;2024-07-31T13:00:00.000000000&#x27;,\n       &#x27;2024-07-31T14:00:00.000000000&#x27;, &#x27;2024-07-31T15:00:00.000000000&#x27;,\n       &#x27;2024-07-31T16:00:00.000000000&#x27;, &#x27;2024-07-31T17:00:00.000000000&#x27;,\n       &#x27;2024-07-31T18:00:00.000000000&#x27;, &#x27;2024-07-31T19:00:00.000000000&#x27;,\n       &#x27;2024-07-31T20:00:00.000000000&#x27;, &#x27;2024-07-31T21:00:00.000000000&#x27;,\n       &#x27;2024-07-31T22:00:00.000000000&#x27;, &#x27;2024-07-31T23:00:00.000000000&#x27;],\n      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-8c8f5fdb-974c-442b-b058-0fccaa12921d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-8c8f5fdb-974c-442b-b058-0fccaa12921d' class='xr-section-summary' >Data variables: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>z</span></div><div class='xr-var-dims'>(time, latitude, longitude)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-0b9e8a6a-dfef-4125-99fe-f7dabf841fe5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0b9e8a6a-dfef-4125-99fe-f7dabf841fe5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-15ee03b1-1bd6-4379-926c-ae8146412d4a' class='xr-var-data-in' type='checkbox'><label for='data-15ee03b1-1bd6-4379-926c-ae8146412d4a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>GRIB_paramId :</span></dt><dd>129</dd><dt><span>GRIB_dataType :</span></dt><dd>an</dd><dt><span>GRIB_numberOfPoints :</span></dt><dd>1038240</dd><dt><span>GRIB_typeOfLevel :</span></dt><dd>surface</dd><dt><span>GRIB_stepUnits :</span></dt><dd>1</dd><dt><span>GRIB_stepType :</span></dt><dd>instant</dd><dt><span>GRIB_gridType :</span></dt><dd>regular_ll</dd><dt><span>GRIB_uvRelativeToGrid :</span></dt><dd>0</dd><dt><span>GRIB_NV :</span></dt><dd>0</dd><dt><span>GRIB_Nx :</span></dt><dd>1440</dd><dt><span>GRIB_Ny :</span></dt><dd>721</dd><dt><span>GRIB_cfName :</span></dt><dd>geopotential</dd><dt><span>GRIB_cfVarName :</span></dt><dd>z</dd><dt><span>GRIB_gridDefinitionDescription :</span></dt><dd>Latitude/Longitude Grid</dd><dt><span>GRIB_iDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_iScansNegatively :</span></dt><dd>0</dd><dt><span>GRIB_jDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_jPointsAreConsecutive :</span></dt><dd>0</dd><dt><span>GRIB_jScansPositively :</span></dt><dd>0</dd><dt><span>GRIB_latitudeOfFirstGridPointInDegrees :</span></dt><dd>90.0</dd><dt><span>GRIB_latitudeOfLastGridPointInDegrees :</span></dt><dd>-90.0</dd><dt><span>GRIB_longitudeOfFirstGridPointInDegrees :</span></dt><dd>0.0</dd><dt><span>GRIB_longitudeOfLastGridPointInDegrees :</span></dt><dd>359.75</dd><dt><span>GRIB_missingValue :</span></dt><dd>3.4028234663852886e+38</dd><dt><span>GRIB_name :</span></dt><dd>Geopotential</dd><dt><span>GRIB_shortName :</span></dt><dd>z</dd><dt><span>GRIB_totalNumber :</span></dt><dd>0</dd><dt><span>GRIB_units :</span></dt><dd>m**2 s**-2</dd><dt><span>long_name :</span></dt><dd>Geopotential</dd><dt><span>units :</span></dt><dd>m**2 s**-2</dd><dt><span>standard_name :</span></dt><dd>geopotential</dd></dl></div><div class='xr-var-data'><pre>[772450560 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sp</span></div><div class='xr-var-dims'>(time, latitude, longitude)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-2ad666b1-f8e2-43c6-91c0-a2f0117351fb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2ad666b1-f8e2-43c6-91c0-a2f0117351fb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cebe030e-a541-482c-8057-0d9e4b4c0593' class='xr-var-data-in' type='checkbox'><label for='data-cebe030e-a541-482c-8057-0d9e4b4c0593' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>GRIB_paramId :</span></dt><dd>134</dd><dt><span>GRIB_dataType :</span></dt><dd>an</dd><dt><span>GRIB_numberOfPoints :</span></dt><dd>1038240</dd><dt><span>GRIB_typeOfLevel :</span></dt><dd>surface</dd><dt><span>GRIB_stepUnits :</span></dt><dd>1</dd><dt><span>GRIB_stepType :</span></dt><dd>instant</dd><dt><span>GRIB_gridType :</span></dt><dd>regular_ll</dd><dt><span>GRIB_uvRelativeToGrid :</span></dt><dd>0</dd><dt><span>GRIB_NV :</span></dt><dd>0</dd><dt><span>GRIB_Nx :</span></dt><dd>1440</dd><dt><span>GRIB_Ny :</span></dt><dd>721</dd><dt><span>GRIB_cfName :</span></dt><dd>surface_air_pressure</dd><dt><span>GRIB_cfVarName :</span></dt><dd>sp</dd><dt><span>GRIB_gridDefinitionDescription :</span></dt><dd>Latitude/Longitude Grid</dd><dt><span>GRIB_iDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_iScansNegatively :</span></dt><dd>0</dd><dt><span>GRIB_jDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_jPointsAreConsecutive :</span></dt><dd>0</dd><dt><span>GRIB_jScansPositively :</span></dt><dd>0</dd><dt><span>GRIB_latitudeOfFirstGridPointInDegrees :</span></dt><dd>90.0</dd><dt><span>GRIB_latitudeOfLastGridPointInDegrees :</span></dt><dd>-90.0</dd><dt><span>GRIB_longitudeOfFirstGridPointInDegrees :</span></dt><dd>0.0</dd><dt><span>GRIB_longitudeOfLastGridPointInDegrees :</span></dt><dd>359.75</dd><dt><span>GRIB_missingValue :</span></dt><dd>3.4028234663852886e+38</dd><dt><span>GRIB_name :</span></dt><dd>Surface pressure</dd><dt><span>GRIB_shortName :</span></dt><dd>sp</dd><dt><span>GRIB_totalNumber :</span></dt><dd>0</dd><dt><span>GRIB_units :</span></dt><dd>Pa</dd><dt><span>long_name :</span></dt><dd>Surface pressure</dd><dt><span>units :</span></dt><dd>Pa</dd><dt><span>standard_name :</span></dt><dd>surface_air_pressure</dd></dl></div><div class='xr-var-data'><pre>[772450560 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tcc</span></div><div class='xr-var-dims'>(time, latitude, longitude)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f6a2b9d7-6526-4c68-97a3-f24b3380c857' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f6a2b9d7-6526-4c68-97a3-f24b3380c857' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-21639a3d-d72e-4d5c-a0c5-a9b6b476732a' class='xr-var-data-in' type='checkbox'><label for='data-21639a3d-d72e-4d5c-a0c5-a9b6b476732a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>GRIB_paramId :</span></dt><dd>164</dd><dt><span>GRIB_dataType :</span></dt><dd>an</dd><dt><span>GRIB_numberOfPoints :</span></dt><dd>1038240</dd><dt><span>GRIB_typeOfLevel :</span></dt><dd>surface</dd><dt><span>GRIB_stepUnits :</span></dt><dd>1</dd><dt><span>GRIB_stepType :</span></dt><dd>instant</dd><dt><span>GRIB_gridType :</span></dt><dd>regular_ll</dd><dt><span>GRIB_uvRelativeToGrid :</span></dt><dd>0</dd><dt><span>GRIB_NV :</span></dt><dd>0</dd><dt><span>GRIB_Nx :</span></dt><dd>1440</dd><dt><span>GRIB_Ny :</span></dt><dd>721</dd><dt><span>GRIB_cfName :</span></dt><dd>cloud_area_fraction</dd><dt><span>GRIB_cfVarName :</span></dt><dd>tcc</dd><dt><span>GRIB_gridDefinitionDescription :</span></dt><dd>Latitude/Longitude Grid</dd><dt><span>GRIB_iDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_iScansNegatively :</span></dt><dd>0</dd><dt><span>GRIB_jDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_jPointsAreConsecutive :</span></dt><dd>0</dd><dt><span>GRIB_jScansPositively :</span></dt><dd>0</dd><dt><span>GRIB_latitudeOfFirstGridPointInDegrees :</span></dt><dd>90.0</dd><dt><span>GRIB_latitudeOfLastGridPointInDegrees :</span></dt><dd>-90.0</dd><dt><span>GRIB_longitudeOfFirstGridPointInDegrees :</span></dt><dd>0.0</dd><dt><span>GRIB_longitudeOfLastGridPointInDegrees :</span></dt><dd>359.75</dd><dt><span>GRIB_missingValue :</span></dt><dd>3.4028234663852886e+38</dd><dt><span>GRIB_name :</span></dt><dd>Total cloud cover</dd><dt><span>GRIB_shortName :</span></dt><dd>tcc</dd><dt><span>GRIB_totalNumber :</span></dt><dd>0</dd><dt><span>GRIB_units :</span></dt><dd>(0 - 1)</dd><dt><span>long_name :</span></dt><dd>Total cloud cover</dd><dt><span>units :</span></dt><dd>(0 - 1)</dd><dt><span>standard_name :</span></dt><dd>cloud_area_fraction</dd></dl></div><div class='xr-var-data'><pre>[772450560 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>u10</span></div><div class='xr-var-dims'>(time, latitude, longitude)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c00e53f8-1059-415a-9941-2e07aa23a314' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c00e53f8-1059-415a-9941-2e07aa23a314' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a90afb5e-4c8d-414f-aac4-c93df4746963' class='xr-var-data-in' type='checkbox'><label for='data-a90afb5e-4c8d-414f-aac4-c93df4746963' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>GRIB_paramId :</span></dt><dd>165</dd><dt><span>GRIB_dataType :</span></dt><dd>an</dd><dt><span>GRIB_numberOfPoints :</span></dt><dd>1038240</dd><dt><span>GRIB_typeOfLevel :</span></dt><dd>surface</dd><dt><span>GRIB_stepUnits :</span></dt><dd>1</dd><dt><span>GRIB_stepType :</span></dt><dd>instant</dd><dt><span>GRIB_gridType :</span></dt><dd>regular_ll</dd><dt><span>GRIB_uvRelativeToGrid :</span></dt><dd>0</dd><dt><span>GRIB_NV :</span></dt><dd>0</dd><dt><span>GRIB_Nx :</span></dt><dd>1440</dd><dt><span>GRIB_Ny :</span></dt><dd>721</dd><dt><span>GRIB_cfName :</span></dt><dd>unknown</dd><dt><span>GRIB_cfVarName :</span></dt><dd>u10</dd><dt><span>GRIB_gridDefinitionDescription :</span></dt><dd>Latitude/Longitude Grid</dd><dt><span>GRIB_iDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_iScansNegatively :</span></dt><dd>0</dd><dt><span>GRIB_jDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_jPointsAreConsecutive :</span></dt><dd>0</dd><dt><span>GRIB_jScansPositively :</span></dt><dd>0</dd><dt><span>GRIB_latitudeOfFirstGridPointInDegrees :</span></dt><dd>90.0</dd><dt><span>GRIB_latitudeOfLastGridPointInDegrees :</span></dt><dd>-90.0</dd><dt><span>GRIB_longitudeOfFirstGridPointInDegrees :</span></dt><dd>0.0</dd><dt><span>GRIB_longitudeOfLastGridPointInDegrees :</span></dt><dd>359.75</dd><dt><span>GRIB_missingValue :</span></dt><dd>3.4028234663852886e+38</dd><dt><span>GRIB_name :</span></dt><dd>10 metre U wind component</dd><dt><span>GRIB_shortName :</span></dt><dd>10u</dd><dt><span>GRIB_totalNumber :</span></dt><dd>0</dd><dt><span>GRIB_units :</span></dt><dd>m s**-1</dd><dt><span>long_name :</span></dt><dd>10 metre U wind component</dd><dt><span>units :</span></dt><dd>m s**-1</dd><dt><span>standard_name :</span></dt><dd>unknown</dd></dl></div><div class='xr-var-data'><pre>[772450560 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>v10</span></div><div class='xr-var-dims'>(time, latitude, longitude)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-55258b05-b9ba-4ef0-928e-6215e73005c6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-55258b05-b9ba-4ef0-928e-6215e73005c6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-67b1f64c-3782-4463-b0be-5ab767058f59' class='xr-var-data-in' type='checkbox'><label for='data-67b1f64c-3782-4463-b0be-5ab767058f59' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>GRIB_paramId :</span></dt><dd>166</dd><dt><span>GRIB_dataType :</span></dt><dd>an</dd><dt><span>GRIB_numberOfPoints :</span></dt><dd>1038240</dd><dt><span>GRIB_typeOfLevel :</span></dt><dd>surface</dd><dt><span>GRIB_stepUnits :</span></dt><dd>1</dd><dt><span>GRIB_stepType :</span></dt><dd>instant</dd><dt><span>GRIB_gridType :</span></dt><dd>regular_ll</dd><dt><span>GRIB_uvRelativeToGrid :</span></dt><dd>0</dd><dt><span>GRIB_NV :</span></dt><dd>0</dd><dt><span>GRIB_Nx :</span></dt><dd>1440</dd><dt><span>GRIB_Ny :</span></dt><dd>721</dd><dt><span>GRIB_cfName :</span></dt><dd>unknown</dd><dt><span>GRIB_cfVarName :</span></dt><dd>v10</dd><dt><span>GRIB_gridDefinitionDescription :</span></dt><dd>Latitude/Longitude Grid</dd><dt><span>GRIB_iDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_iScansNegatively :</span></dt><dd>0</dd><dt><span>GRIB_jDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_jPointsAreConsecutive :</span></dt><dd>0</dd><dt><span>GRIB_jScansPositively :</span></dt><dd>0</dd><dt><span>GRIB_latitudeOfFirstGridPointInDegrees :</span></dt><dd>90.0</dd><dt><span>GRIB_latitudeOfLastGridPointInDegrees :</span></dt><dd>-90.0</dd><dt><span>GRIB_longitudeOfFirstGridPointInDegrees :</span></dt><dd>0.0</dd><dt><span>GRIB_longitudeOfLastGridPointInDegrees :</span></dt><dd>359.75</dd><dt><span>GRIB_missingValue :</span></dt><dd>3.4028234663852886e+38</dd><dt><span>GRIB_name :</span></dt><dd>10 metre V wind component</dd><dt><span>GRIB_shortName :</span></dt><dd>10v</dd><dt><span>GRIB_totalNumber :</span></dt><dd>0</dd><dt><span>GRIB_units :</span></dt><dd>m s**-1</dd><dt><span>long_name :</span></dt><dd>10 metre V wind component</dd><dt><span>units :</span></dt><dd>m s**-1</dd><dt><span>standard_name :</span></dt><dd>unknown</dd></dl></div><div class='xr-var-data'><pre>[772450560 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>t2m</span></div><div class='xr-var-dims'>(time, latitude, longitude)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-7f57efff-ad99-4ed4-b3c2-ff0b734bb5c4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7f57efff-ad99-4ed4-b3c2-ff0b734bb5c4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-36de4c47-a544-4c21-b29f-925bb0456654' class='xr-var-data-in' type='checkbox'><label for='data-36de4c47-a544-4c21-b29f-925bb0456654' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>GRIB_paramId :</span></dt><dd>167</dd><dt><span>GRIB_dataType :</span></dt><dd>an</dd><dt><span>GRIB_numberOfPoints :</span></dt><dd>1038240</dd><dt><span>GRIB_typeOfLevel :</span></dt><dd>surface</dd><dt><span>GRIB_stepUnits :</span></dt><dd>1</dd><dt><span>GRIB_stepType :</span></dt><dd>instant</dd><dt><span>GRIB_gridType :</span></dt><dd>regular_ll</dd><dt><span>GRIB_uvRelativeToGrid :</span></dt><dd>0</dd><dt><span>GRIB_NV :</span></dt><dd>0</dd><dt><span>GRIB_Nx :</span></dt><dd>1440</dd><dt><span>GRIB_Ny :</span></dt><dd>721</dd><dt><span>GRIB_cfName :</span></dt><dd>unknown</dd><dt><span>GRIB_cfVarName :</span></dt><dd>t2m</dd><dt><span>GRIB_gridDefinitionDescription :</span></dt><dd>Latitude/Longitude Grid</dd><dt><span>GRIB_iDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_iScansNegatively :</span></dt><dd>0</dd><dt><span>GRIB_jDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_jPointsAreConsecutive :</span></dt><dd>0</dd><dt><span>GRIB_jScansPositively :</span></dt><dd>0</dd><dt><span>GRIB_latitudeOfFirstGridPointInDegrees :</span></dt><dd>90.0</dd><dt><span>GRIB_latitudeOfLastGridPointInDegrees :</span></dt><dd>-90.0</dd><dt><span>GRIB_longitudeOfFirstGridPointInDegrees :</span></dt><dd>0.0</dd><dt><span>GRIB_longitudeOfLastGridPointInDegrees :</span></dt><dd>359.75</dd><dt><span>GRIB_missingValue :</span></dt><dd>3.4028234663852886e+38</dd><dt><span>GRIB_name :</span></dt><dd>2 metre temperature</dd><dt><span>GRIB_shortName :</span></dt><dd>2t</dd><dt><span>GRIB_totalNumber :</span></dt><dd>0</dd><dt><span>GRIB_units :</span></dt><dd>K</dd><dt><span>long_name :</span></dt><dd>2 metre temperature</dd><dt><span>units :</span></dt><dd>K</dd><dt><span>standard_name :</span></dt><dd>unknown</dd></dl></div><div class='xr-var-data'><pre>[772450560 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f05db433-9c3d-4a73-b082-e14ed0fea9f8' class='xr-section-summary-in' type='checkbox'  ><label for='section-f05db433-9c3d-4a73-b082-e14ed0fea9f8' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-cfbd4c67-e9e2-49c3-9796-64851046882a' class='xr-index-data-in' type='checkbox'/><label for='index-cfbd4c67-e9e2-49c3-9796-64851046882a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2024-07-01 00:00:00&#x27;, &#x27;2024-07-01 01:00:00&#x27;,\n               &#x27;2024-07-01 02:00:00&#x27;, &#x27;2024-07-01 03:00:00&#x27;,\n               &#x27;2024-07-01 04:00:00&#x27;, &#x27;2024-07-01 05:00:00&#x27;,\n               &#x27;2024-07-01 06:00:00&#x27;, &#x27;2024-07-01 07:00:00&#x27;,\n               &#x27;2024-07-01 08:00:00&#x27;, &#x27;2024-07-01 09:00:00&#x27;,\n               ...\n               &#x27;2024-07-31 14:00:00&#x27;, &#x27;2024-07-31 15:00:00&#x27;,\n               &#x27;2024-07-31 16:00:00&#x27;, &#x27;2024-07-31 17:00:00&#x27;,\n               &#x27;2024-07-31 18:00:00&#x27;, &#x27;2024-07-31 19:00:00&#x27;,\n               &#x27;2024-07-31 20:00:00&#x27;, &#x27;2024-07-31 21:00:00&#x27;,\n               &#x27;2024-07-31 22:00:00&#x27;, &#x27;2024-07-31 23:00:00&#x27;],\n              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=744, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>latitude</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-a22c1416-cf16-42e7-84cf-e2d62ec8fb17' class='xr-index-data-in' type='checkbox'/><label for='index-a22c1416-cf16-42e7-84cf-e2d62ec8fb17' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([  90.0,  89.75,   89.5,  89.25,   89.0,  88.75,   88.5,  88.25,   88.0,\n        87.75,\n       ...\n       -87.75,  -88.0, -88.25,  -88.5, -88.75,  -89.0, -89.25,  -89.5, -89.75,\n        -90.0],\n      dtype=&#x27;float64&#x27;, name=&#x27;latitude&#x27;, length=721))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>longitude</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-6b79e960-c417-4fff-bf3a-4805e4db07e1' class='xr-index-data-in' type='checkbox'/><label for='index-6b79e960-c417-4fff-bf3a-4805e4db07e1' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   0.0,   0.25,    0.5,   0.75,    1.0,   1.25,    1.5,   1.75,    2.0,\n         2.25,\n       ...\n        357.5, 357.75,  358.0, 358.25,  358.5, 358.75,  359.0, 359.25,  359.5,\n       359.75],\n      dtype=&#x27;float64&#x27;, name=&#x27;longitude&#x27;, length=1440))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-a4406520-4c41-4b87-8eff-b471815f0110' class='xr-section-summary-in' type='checkbox'  checked><label for='section-a4406520-4c41-4b87-8eff-b471815f0110' class='xr-section-summary' >Attributes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>GRIB_edition :</span></dt><dd>1</dd><dt><span>GRIB_centre :</span></dt><dd>ecmf</dd><dt><span>GRIB_centreDescription :</span></dt><dd>European Centre for Medium-Range Weather Forecasts</dd><dt><span>GRIB_subCentre :</span></dt><dd>0</dd><dt><span>Conventions :</span></dt><dd>CF-1.7</dd><dt><span>institution :</span></dt><dd>European Centre for Medium-Range Weather Forecasts</dd></dl></div></li></ul></div></div>\n</pre>\n</details>\n</div>\n\n<p>And here is ds2 (only for tp):</p>\n<div class=\"output-block\">\n<details>\n<summary>Dataset 2 (Xarray Dataset)</summary>\n<pre>\n<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1f1f1f;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"\u25ba\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"\u25bc\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 3GB\nDimensions:     (time: 63, step: 12, latitude: 721, longitude: 1440)\nCoordinates:\n    number      int64 8B 0\n  * time        (time) datetime64[ns] 504B 2024-06-30T18:00:00 ... 2024-07-31...\n  * step        (step) timedelta64[ns] 96B 01:00:00 02:00:00 ... 12:00:00\n    surface     float64 8B 0.0\n  * latitude    (latitude) float64 6kB 90.0 89.75 89.5 ... -89.5 -89.75 -90.0\n  * longitude   (longitude) float64 12kB 0.0 0.25 0.5 0.75 ... 359.2 359.5 359.8\n    valid_time  (time, step) datetime64[ns] 6kB ...\nData variables:\n    tp          (time, step, latitude, longitude) float32 3GB ...\nAttributes:\n    GRIB_edition:            1\n    GRIB_centre:             ecmf\n    GRIB_centreDescription:  European Centre for Medium-Range Weather Forecasts\n    GRIB_subCentre:          0\n    Conventions:             CF-1.7\n    institution:             European Centre for Medium-Range Weather Forecasts</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-437e0f30-acfa-46f9-9a1b-b1b77947945d' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-437e0f30-acfa-46f9-9a1b-b1b77947945d' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 63</li><li><span class='xr-has-index'>step</span>: 12</li><li><span class='xr-has-index'>latitude</span>: 721</li><li><span class='xr-has-index'>longitude</span>: 1440</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-e2d87c75-0954-45b0-928b-5dfd93b85e84' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e2d87c75-0954-45b0-928b-5dfd93b85e84' class='xr-section-summary' >Coordinates: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>number</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-4ca63d3c-0d09-4cf1-a29d-6b5937610519' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4ca63d3c-0d09-4cf1-a29d-6b5937610519' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ef88c427-3baa-4af8-ae76-bb9fda30a738' class='xr-var-data-in' type='checkbox'><label for='data-ef88c427-3baa-4af8-ae76-bb9fda30a738' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>ensemble member numerical id</dd><dt><span>units :</span></dt><dd>1</dd><dt><span>standard_name :</span></dt><dd>realization</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-06-30T18:00:00 ... 2024-07-...</div><input id='attrs-00928620-7eb1-408f-b503-5c0ea45e44e6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-00928620-7eb1-408f-b503-5c0ea45e44e6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d8bdf2e1-bf1a-465c-beea-66b060d18d66' class='xr-var-data-in' type='checkbox'><label for='data-d8bdf2e1-bf1a-465c-beea-66b060d18d66' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>initial time of forecast</dd><dt><span>standard_name :</span></dt><dd>forecast_reference_time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-06-30T18:00:00.000000000&#x27;, &#x27;2024-07-01T06:00:00.000000000&#x27;,\n       &#x27;2024-07-01T18:00:00.000000000&#x27;, &#x27;2024-07-02T06:00:00.000000000&#x27;,\n       &#x27;2024-07-02T18:00:00.000000000&#x27;, &#x27;2024-07-03T06:00:00.000000000&#x27;,\n       &#x27;2024-07-03T18:00:00.000000000&#x27;, &#x27;2024-07-04T06:00:00.000000000&#x27;,\n       &#x27;2024-07-04T18:00:00.000000000&#x27;, &#x27;2024-07-05T06:00:00.000000000&#x27;,\n       &#x27;2024-07-05T18:00:00.000000000&#x27;, &#x27;2024-07-06T06:00:00.000000000&#x27;,\n       &#x27;2024-07-06T18:00:00.000000000&#x27;, &#x27;2024-07-07T06:00:00.000000000&#x27;,\n       &#x27;2024-07-07T18:00:00.000000000&#x27;, &#x27;2024-07-08T06:00:00.000000000&#x27;,\n       &#x27;2024-07-08T18:00:00.000000000&#x27;, &#x27;2024-07-09T06:00:00.000000000&#x27;,\n       &#x27;2024-07-09T18:00:00.000000000&#x27;, &#x27;2024-07-10T06:00:00.000000000&#x27;,\n       &#x27;2024-07-10T18:00:00.000000000&#x27;, &#x27;2024-07-11T06:00:00.000000000&#x27;,\n       &#x27;2024-07-11T18:00:00.000000000&#x27;, &#x27;2024-07-12T06:00:00.000000000&#x27;,\n       &#x27;2024-07-12T18:00:00.000000000&#x27;, &#x27;2024-07-13T06:00:00.000000000&#x27;,\n       &#x27;2024-07-13T18:00:00.000000000&#x27;, &#x27;2024-07-14T06:00:00.000000000&#x27;,\n       &#x27;2024-07-14T18:00:00.000000000&#x27;, &#x27;2024-07-15T06:00:00.000000000&#x27;,\n       &#x27;2024-07-15T18:00:00.000000000&#x27;, &#x27;2024-07-16T06:00:00.000000000&#x27;,\n       &#x27;2024-07-16T18:00:00.000000000&#x27;, &#x27;2024-07-17T06:00:00.000000000&#x27;,\n       &#x27;2024-07-17T18:00:00.000000000&#x27;, &#x27;2024-07-18T06:00:00.000000000&#x27;,\n       &#x27;2024-07-18T18:00:00.000000000&#x27;, &#x27;2024-07-19T06:00:00.000000000&#x27;,\n       &#x27;2024-07-19T18:00:00.000000000&#x27;, &#x27;2024-07-20T06:00:00.000000000&#x27;,\n       &#x27;2024-07-20T18:00:00.000000000&#x27;, &#x27;2024-07-21T06:00:00.000000000&#x27;,\n       &#x27;2024-07-21T18:00:00.000000000&#x27;, &#x27;2024-07-22T06:00:00.000000000&#x27;,\n       &#x27;2024-07-22T18:00:00.000000000&#x27;, &#x27;2024-07-23T06:00:00.000000000&#x27;,\n       &#x27;2024-07-23T18:00:00.000000000&#x27;, &#x27;2024-07-24T06:00:00.000000000&#x27;,\n       &#x27;2024-07-24T18:00:00.000000000&#x27;, &#x27;2024-07-25T06:00:00.000000000&#x27;,\n       &#x27;2024-07-25T18:00:00.000000000&#x27;, &#x27;2024-07-26T06:00:00.000000000&#x27;,\n       &#x27;2024-07-26T18:00:00.000000000&#x27;, &#x27;2024-07-27T06:00:00.000000000&#x27;,\n       &#x27;2024-07-27T18:00:00.000000000&#x27;, &#x27;2024-07-28T06:00:00.000000000&#x27;,\n       &#x27;2024-07-28T18:00:00.000000000&#x27;, &#x27;2024-07-29T06:00:00.000000000&#x27;,\n       &#x27;2024-07-29T18:00:00.000000000&#x27;, &#x27;2024-07-30T06:00:00.000000000&#x27;,\n       &#x27;2024-07-30T18:00:00.000000000&#x27;, &#x27;2024-07-31T06:00:00.000000000&#x27;,\n       &#x27;2024-07-31T18:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>step</span></div><div class='xr-var-dims'>(step)</div><div class='xr-var-dtype'>timedelta64[ns]</div><div class='xr-var-preview xr-preview'>01:00:00 02:00:00 ... 12:00:00</div><input id='attrs-bcb2f9aa-9128-4f7a-abd8-090d192ba4bf' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bcb2f9aa-9128-4f7a-abd8-090d192ba4bf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1648a22b-148e-4bb9-a5d0-429cb91cb9c8' class='xr-var-data-in' type='checkbox'><label for='data-1648a22b-148e-4bb9-a5d0-429cb91cb9c8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time since forecast_reference_time</dd><dt><span>standard_name :</span></dt><dd>forecast_period</dd></dl></div><div class='xr-var-data'><pre>array([ 3600000000000,  7200000000000, 10800000000000, 14400000000000,\n       18000000000000, 21600000000000, 25200000000000, 28800000000000,\n       32400000000000, 36000000000000, 39600000000000, 43200000000000],\n      dtype=&#x27;timedelta64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>surface</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0</div><input id='attrs-03d1d641-dbbb-4e83-9704-76d60420f8e1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-03d1d641-dbbb-4e83-9704-76d60420f8e1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3872883f-5dcd-4bc3-b3ea-1aaa53c73792' class='xr-var-data-in' type='checkbox'><label for='data-3872883f-5dcd-4bc3-b3ea-1aaa53c73792' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>original GRIB coordinate for key: level(surface)</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array(0.)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>latitude</span></div><div class='xr-var-dims'>(latitude)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>90.0 89.75 89.5 ... -89.75 -90.0</div><input id='attrs-ba2fbd5d-f4bc-4070-978f-70f1c3403348' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ba2fbd5d-f4bc-4070-978f-70f1c3403348' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-42edfbfe-2237-4d5d-a5d8-faef7bef98c0' class='xr-var-data-in' type='checkbox'><label for='data-42edfbfe-2237-4d5d-a5d8-faef7bef98c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>stored_direction :</span></dt><dd>decreasing</dd></dl></div><div class='xr-var-data'><pre>array([ 90.  ,  89.75,  89.5 , ..., -89.5 , -89.75, -90.  ], shape=(721,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>longitude</span></div><div class='xr-var-dims'>(longitude)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.25 0.5 ... 359.2 359.5 359.8</div><input id='attrs-c74cf76b-596d-4ed4-9072-7a4bc31b99d3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c74cf76b-596d-4ed4-9072-7a4bc31b99d3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bc0f2312-92f0-4919-83ad-74ceca77ff93' class='xr-var-data-in' type='checkbox'><label for='data-bc0f2312-92f0-4919-83ad-74ceca77ff93' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>longitude</dd></dl></div><div class='xr-var-data'><pre>array([0.0000e+00, 2.5000e-01, 5.0000e-01, ..., 3.5925e+02, 3.5950e+02,\n       3.5975e+02], shape=(1440,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>valid_time</span></div><div class='xr-var-dims'>(time, step)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f9faf935-0676-4fc1-901d-e4287496bd00' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f9faf935-0676-4fc1-901d-e4287496bd00' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5448906d-b0cd-45df-8381-048e36867dbb' class='xr-var-data-in' type='checkbox'><label for='data-5448906d-b0cd-45df-8381-048e36867dbb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>long_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>[756 values with dtype=datetime64[ns]]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e15940f9-e278-41ea-a11d-6bf4b99ea3ff' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e15940f9-e278-41ea-a11d-6bf4b99ea3ff' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>tp</span></div><div class='xr-var-dims'>(time, step, latitude, longitude)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c1ac907d-1e46-4ad3-9e91-294e49543e3d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c1ac907d-1e46-4ad3-9e91-294e49543e3d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f2681e2f-fc84-4018-afd1-71966b3012aa' class='xr-var-data-in' type='checkbox'><label for='data-f2681e2f-fc84-4018-afd1-71966b3012aa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>GRIB_paramId :</span></dt><dd>228</dd><dt><span>GRIB_dataType :</span></dt><dd>fc</dd><dt><span>GRIB_numberOfPoints :</span></dt><dd>1038240</dd><dt><span>GRIB_typeOfLevel :</span></dt><dd>surface</dd><dt><span>GRIB_stepUnits :</span></dt><dd>1</dd><dt><span>GRIB_stepType :</span></dt><dd>accum</dd><dt><span>GRIB_gridType :</span></dt><dd>regular_ll</dd><dt><span>GRIB_uvRelativeToGrid :</span></dt><dd>0</dd><dt><span>GRIB_NV :</span></dt><dd>0</dd><dt><span>GRIB_Nx :</span></dt><dd>1440</dd><dt><span>GRIB_Ny :</span></dt><dd>721</dd><dt><span>GRIB_cfName :</span></dt><dd>unknown</dd><dt><span>GRIB_cfVarName :</span></dt><dd>tp</dd><dt><span>GRIB_gridDefinitionDescription :</span></dt><dd>Latitude/Longitude Grid</dd><dt><span>GRIB_iDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_iScansNegatively :</span></dt><dd>0</dd><dt><span>GRIB_jDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_jPointsAreConsecutive :</span></dt><dd>0</dd><dt><span>GRIB_jScansPositively :</span></dt><dd>0</dd><dt><span>GRIB_latitudeOfFirstGridPointInDegrees :</span></dt><dd>90.0</dd><dt><span>GRIB_latitudeOfLastGridPointInDegrees :</span></dt><dd>-90.0</dd><dt><span>GRIB_longitudeOfFirstGridPointInDegrees :</span></dt><dd>0.0</dd><dt><span>GRIB_longitudeOfLastGridPointInDegrees :</span></dt><dd>359.75</dd><dt><span>GRIB_missingValue :</span></dt><dd>3.4028234663852886e+38</dd><dt><span>GRIB_name :</span></dt><dd>Total precipitation</dd><dt><span>GRIB_shortName :</span></dt><dd>tp</dd><dt><span>GRIB_totalNumber :</span></dt><dd>0</dd><dt><span>GRIB_units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>Total precipitation</dd><dt><span>units :</span></dt><dd>m</dd><dt><span>standard_name :</span></dt><dd>unknown</dd></dl></div><div class='xr-var-data'><pre>[784909440 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-3ab4895a-ac28-4463-98cb-a75cd3ee1081' class='xr-section-summary-in' type='checkbox'  ><label for='section-3ab4895a-ac28-4463-98cb-a75cd3ee1081' class='xr-section-summary' >Indexes: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-26244a3b-3e5f-463e-a342-7e5378a77076' class='xr-index-data-in' type='checkbox'/><label for='index-26244a3b-3e5f-463e-a342-7e5378a77076' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2024-06-30 18:00:00&#x27;, &#x27;2024-07-01 06:00:00&#x27;,\n               &#x27;2024-07-01 18:00:00&#x27;, &#x27;2024-07-02 06:00:00&#x27;,\n               &#x27;2024-07-02 18:00:00&#x27;, &#x27;2024-07-03 06:00:00&#x27;,\n               &#x27;2024-07-03 18:00:00&#x27;, &#x27;2024-07-04 06:00:00&#x27;,\n               &#x27;2024-07-04 18:00:00&#x27;, &#x27;2024-07-05 06:00:00&#x27;,\n               &#x27;2024-07-05 18:00:00&#x27;, &#x27;2024-07-06 06:00:00&#x27;,\n               &#x27;2024-07-06 18:00:00&#x27;, &#x27;2024-07-07 06:00:00&#x27;,\n               &#x27;2024-07-07 18:00:00&#x27;, &#x27;2024-07-08 06:00:00&#x27;,\n               &#x27;2024-07-08 18:00:00&#x27;, &#x27;2024-07-09 06:00:00&#x27;,\n               &#x27;2024-07-09 18:00:00&#x27;, &#x27;2024-07-10 06:00:00&#x27;,\n               &#x27;2024-07-10 18:00:00&#x27;, &#x27;2024-07-11 06:00:00&#x27;,\n               &#x27;2024-07-11 18:00:00&#x27;, &#x27;2024-07-12 06:00:00&#x27;,\n               &#x27;2024-07-12 18:00:00&#x27;, &#x27;2024-07-13 06:00:00&#x27;,\n               &#x27;2024-07-13 18:00:00&#x27;, &#x27;2024-07-14 06:00:00&#x27;,\n               &#x27;2024-07-14 18:00:00&#x27;, &#x27;2024-07-15 06:00:00&#x27;,\n               &#x27;2024-07-15 18:00:00&#x27;, &#x27;2024-07-16 06:00:00&#x27;,\n               &#x27;2024-07-16 18:00:00&#x27;, &#x27;2024-07-17 06:00:00&#x27;,\n               &#x27;2024-07-17 18:00:00&#x27;, &#x27;2024-07-18 06:00:00&#x27;,\n               &#x27;2024-07-18 18:00:00&#x27;, &#x27;2024-07-19 06:00:00&#x27;,\n               &#x27;2024-07-19 18:00:00&#x27;, &#x27;2024-07-20 06:00:00&#x27;,\n               &#x27;2024-07-20 18:00:00&#x27;, &#x27;2024-07-21 06:00:00&#x27;,\n               &#x27;2024-07-21 18:00:00&#x27;, &#x27;2024-07-22 06:00:00&#x27;,\n               &#x27;2024-07-22 18:00:00&#x27;, &#x27;2024-07-23 06:00:00&#x27;,\n               &#x27;2024-07-23 18:00:00&#x27;, &#x27;2024-07-24 06:00:00&#x27;,\n               &#x27;2024-07-24 18:00:00&#x27;, &#x27;2024-07-25 06:00:00&#x27;,\n               &#x27;2024-07-25 18:00:00&#x27;, &#x27;2024-07-26 06:00:00&#x27;,\n               &#x27;2024-07-26 18:00:00&#x27;, &#x27;2024-07-27 06:00:00&#x27;,\n               &#x27;2024-07-27 18:00:00&#x27;, &#x27;2024-07-28 06:00:00&#x27;,\n               &#x27;2024-07-28 18:00:00&#x27;, &#x27;2024-07-29 06:00:00&#x27;,\n               &#x27;2024-07-29 18:00:00&#x27;, &#x27;2024-07-30 06:00:00&#x27;,\n               &#x27;2024-07-30 18:00:00&#x27;, &#x27;2024-07-31 06:00:00&#x27;,\n               &#x27;2024-07-31 18:00:00&#x27;],\n              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>step</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-1de7e469-59f0-43c9-ba03-288ccb4851b6' class='xr-index-data-in' type='checkbox'/><label for='index-1de7e469-59f0-43c9-ba03-288ccb4851b6' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(TimedeltaIndex([&#x27;0 days 01:00:00&#x27;, &#x27;0 days 02:00:00&#x27;, &#x27;0 days 03:00:00&#x27;,\n                &#x27;0 days 04:00:00&#x27;, &#x27;0 days 05:00:00&#x27;, &#x27;0 days 06:00:00&#x27;,\n                &#x27;0 days 07:00:00&#x27;, &#x27;0 days 08:00:00&#x27;, &#x27;0 days 09:00:00&#x27;,\n                &#x27;0 days 10:00:00&#x27;, &#x27;0 days 11:00:00&#x27;, &#x27;0 days 12:00:00&#x27;],\n               dtype=&#x27;timedelta64[ns]&#x27;, name=&#x27;step&#x27;, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>latitude</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-6a8305cb-546b-4263-8686-0bc3344b7b58' class='xr-index-data-in' type='checkbox'/><label for='index-6a8305cb-546b-4263-8686-0bc3344b7b58' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([  90.0,  89.75,   89.5,  89.25,   89.0,  88.75,   88.5,  88.25,   88.0,\n        87.75,\n       ...\n       -87.75,  -88.0, -88.25,  -88.5, -88.75,  -89.0, -89.25,  -89.5, -89.75,\n        -90.0],\n      dtype=&#x27;float64&#x27;, name=&#x27;latitude&#x27;, length=721))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>longitude</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-4272c95f-eb30-4994-be66-48c21b8569f3' class='xr-index-data-in' type='checkbox'/><label for='index-4272c95f-eb30-4994-be66-48c21b8569f3' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   0.0,   0.25,    0.5,   0.75,    1.0,   1.25,    1.5,   1.75,    2.0,\n         2.25,\n       ...\n        357.5, 357.75,  358.0, 358.25,  358.5, 358.75,  359.0, 359.25,  359.5,\n       359.75],\n      dtype=&#x27;float64&#x27;, name=&#x27;longitude&#x27;, length=1440))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-022ec0e2-90a6-439a-a7e2-1ebf17d25090' class='xr-section-summary-in' type='checkbox'  checked><label for='section-022ec0e2-90a6-439a-a7e2-1ebf17d25090' class='xr-section-summary' >Attributes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>GRIB_edition :</span></dt><dd>1</dd><dt><span>GRIB_centre :</span></dt><dd>ecmf</dd><dt><span>GRIB_centreDescription :</span></dt><dd>European Centre for Medium-Range Weather Forecasts</dd><dt><span>GRIB_subCentre :</span></dt><dd>0</dd><dt><span>Conventions :</span></dt><dd>CF-1.7</dd><dt><span>institution :</span></dt><dd>European Centre for Medium-Range Weather Forecasts</dd></dl></div></li></ul></div></div>\n</pre>\n</details>\n</div>\n\n<p><br></p>\n<h1 id=\"writing-the-plotting-helper-functions\">Writing the plotting helper functions</h1>\n<p>A wise man once said, \"I love looking at graphs and heatmaps\". So let's actually, properly, plot our data (unlike last time).<br />\nLet's start with total precipitation <strong>(tp)</strong> as it was giving us the most trouble earlier. </p>\n<h2 id=\"writing-plot_tp\">Writing <code>plot_tp</code></h2>\n<p>It should be pretty obvious that we're gonna have to do it heatmap/grid style.\nSo <em>what DO we need?</em>, first we might need the <strong>data</strong> of course, but do we have it in <strong>only 2 dimensions?</strong> (i.e latitude, longitude, value). Also what are the <strong>units</strong>. For this let's take a look at the convinient xarray message:</p>\n<div class=\"output-block\">\n<details>\n<summary>Dataset 2 (Xarray Dataset)</summary>\n<pre>\n<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1f1f1f;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"\u25ba\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"\u25bc\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 3GB\nDimensions:     (time: 63, step: 12, latitude: 721, longitude: 1440)\nCoordinates:\n    number      int64 8B 0\n  * time        (time) datetime64[ns] 504B 2024-06-30T18:00:00 ... 2024-07-31...\n  * step        (step) timedelta64[ns] 96B 01:00:00 02:00:00 ... 12:00:00\n    surface     float64 8B 0.0\n  * latitude    (latitude) float64 6kB 90.0 89.75 89.5 ... -89.5 -89.75 -90.0\n  * longitude   (longitude) float64 12kB 0.0 0.25 0.5 0.75 ... 359.2 359.5 359.8\n    valid_time  (time, step) datetime64[ns] 6kB ...\nData variables:\n    tp          (time, step, latitude, longitude) float32 3GB ...\nAttributes:\n    GRIB_edition:            1\n    GRIB_centre:             ecmf\n    GRIB_centreDescription:  European Centre for Medium-Range Weather Forecasts\n    GRIB_subCentre:          0\n    Conventions:             CF-1.7\n    institution:             European Centre for Medium-Range Weather Forecasts</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-437e0f30-acfa-46f9-9a1b-b1b77947945d' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-437e0f30-acfa-46f9-9a1b-b1b77947945d' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 63</li><li><span class='xr-has-index'>step</span>: 12</li><li><span class='xr-has-index'>latitude</span>: 721</li><li><span class='xr-has-index'>longitude</span>: 1440</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-e2d87c75-0954-45b0-928b-5dfd93b85e84' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e2d87c75-0954-45b0-928b-5dfd93b85e84' class='xr-section-summary' >Coordinates: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>number</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-4ca63d3c-0d09-4cf1-a29d-6b5937610519' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4ca63d3c-0d09-4cf1-a29d-6b5937610519' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ef88c427-3baa-4af8-ae76-bb9fda30a738' class='xr-var-data-in' type='checkbox'><label for='data-ef88c427-3baa-4af8-ae76-bb9fda30a738' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>ensemble member numerical id</dd><dt><span>units :</span></dt><dd>1</dd><dt><span>standard_name :</span></dt><dd>realization</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-06-30T18:00:00 ... 2024-07-...</div><input id='attrs-00928620-7eb1-408f-b503-5c0ea45e44e6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-00928620-7eb1-408f-b503-5c0ea45e44e6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d8bdf2e1-bf1a-465c-beea-66b060d18d66' class='xr-var-data-in' type='checkbox'><label for='data-d8bdf2e1-bf1a-465c-beea-66b060d18d66' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>initial time of forecast</dd><dt><span>standard_name :</span></dt><dd>forecast_reference_time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-06-30T18:00:00.000000000&#x27;, &#x27;2024-07-01T06:00:00.000000000&#x27;,\n       &#x27;2024-07-01T18:00:00.000000000&#x27;, &#x27;2024-07-02T06:00:00.000000000&#x27;,\n       &#x27;2024-07-02T18:00:00.000000000&#x27;, &#x27;2024-07-03T06:00:00.000000000&#x27;,\n       &#x27;2024-07-03T18:00:00.000000000&#x27;, &#x27;2024-07-04T06:00:00.000000000&#x27;,\n       &#x27;2024-07-04T18:00:00.000000000&#x27;, &#x27;2024-07-05T06:00:00.000000000&#x27;,\n       &#x27;2024-07-05T18:00:00.000000000&#x27;, &#x27;2024-07-06T06:00:00.000000000&#x27;,\n       &#x27;2024-07-06T18:00:00.000000000&#x27;, &#x27;2024-07-07T06:00:00.000000000&#x27;,\n       &#x27;2024-07-07T18:00:00.000000000&#x27;, &#x27;2024-07-08T06:00:00.000000000&#x27;,\n       &#x27;2024-07-08T18:00:00.000000000&#x27;, &#x27;2024-07-09T06:00:00.000000000&#x27;,\n       &#x27;2024-07-09T18:00:00.000000000&#x27;, &#x27;2024-07-10T06:00:00.000000000&#x27;,\n       &#x27;2024-07-10T18:00:00.000000000&#x27;, &#x27;2024-07-11T06:00:00.000000000&#x27;,\n       &#x27;2024-07-11T18:00:00.000000000&#x27;, &#x27;2024-07-12T06:00:00.000000000&#x27;,\n       &#x27;2024-07-12T18:00:00.000000000&#x27;, &#x27;2024-07-13T06:00:00.000000000&#x27;,\n       &#x27;2024-07-13T18:00:00.000000000&#x27;, &#x27;2024-07-14T06:00:00.000000000&#x27;,\n       &#x27;2024-07-14T18:00:00.000000000&#x27;, &#x27;2024-07-15T06:00:00.000000000&#x27;,\n       &#x27;2024-07-15T18:00:00.000000000&#x27;, &#x27;2024-07-16T06:00:00.000000000&#x27;,\n       &#x27;2024-07-16T18:00:00.000000000&#x27;, &#x27;2024-07-17T06:00:00.000000000&#x27;,\n       &#x27;2024-07-17T18:00:00.000000000&#x27;, &#x27;2024-07-18T06:00:00.000000000&#x27;,\n       &#x27;2024-07-18T18:00:00.000000000&#x27;, &#x27;2024-07-19T06:00:00.000000000&#x27;,\n       &#x27;2024-07-19T18:00:00.000000000&#x27;, &#x27;2024-07-20T06:00:00.000000000&#x27;,\n       &#x27;2024-07-20T18:00:00.000000000&#x27;, &#x27;2024-07-21T06:00:00.000000000&#x27;,\n       &#x27;2024-07-21T18:00:00.000000000&#x27;, &#x27;2024-07-22T06:00:00.000000000&#x27;,\n       &#x27;2024-07-22T18:00:00.000000000&#x27;, &#x27;2024-07-23T06:00:00.000000000&#x27;,\n       &#x27;2024-07-23T18:00:00.000000000&#x27;, &#x27;2024-07-24T06:00:00.000000000&#x27;,\n       &#x27;2024-07-24T18:00:00.000000000&#x27;, &#x27;2024-07-25T06:00:00.000000000&#x27;,\n       &#x27;2024-07-25T18:00:00.000000000&#x27;, &#x27;2024-07-26T06:00:00.000000000&#x27;,\n       &#x27;2024-07-26T18:00:00.000000000&#x27;, &#x27;2024-07-27T06:00:00.000000000&#x27;,\n       &#x27;2024-07-27T18:00:00.000000000&#x27;, &#x27;2024-07-28T06:00:00.000000000&#x27;,\n       &#x27;2024-07-28T18:00:00.000000000&#x27;, &#x27;2024-07-29T06:00:00.000000000&#x27;,\n       &#x27;2024-07-29T18:00:00.000000000&#x27;, &#x27;2024-07-30T06:00:00.000000000&#x27;,\n       &#x27;2024-07-30T18:00:00.000000000&#x27;, &#x27;2024-07-31T06:00:00.000000000&#x27;,\n       &#x27;2024-07-31T18:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>step</span></div><div class='xr-var-dims'>(step)</div><div class='xr-var-dtype'>timedelta64[ns]</div><div class='xr-var-preview xr-preview'>01:00:00 02:00:00 ... 12:00:00</div><input id='attrs-bcb2f9aa-9128-4f7a-abd8-090d192ba4bf' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bcb2f9aa-9128-4f7a-abd8-090d192ba4bf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1648a22b-148e-4bb9-a5d0-429cb91cb9c8' class='xr-var-data-in' type='checkbox'><label for='data-1648a22b-148e-4bb9-a5d0-429cb91cb9c8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time since forecast_reference_time</dd><dt><span>standard_name :</span></dt><dd>forecast_period</dd></dl></div><div class='xr-var-data'><pre>array([ 3600000000000,  7200000000000, 10800000000000, 14400000000000,\n       18000000000000, 21600000000000, 25200000000000, 28800000000000,\n       32400000000000, 36000000000000, 39600000000000, 43200000000000],\n      dtype=&#x27;timedelta64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>surface</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0</div><input id='attrs-03d1d641-dbbb-4e83-9704-76d60420f8e1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-03d1d641-dbbb-4e83-9704-76d60420f8e1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3872883f-5dcd-4bc3-b3ea-1aaa53c73792' class='xr-var-data-in' type='checkbox'><label for='data-3872883f-5dcd-4bc3-b3ea-1aaa53c73792' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>original GRIB coordinate for key: level(surface)</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array(0.)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>latitude</span></div><div class='xr-var-dims'>(latitude)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>90.0 89.75 89.5 ... -89.75 -90.0</div><input id='attrs-ba2fbd5d-f4bc-4070-978f-70f1c3403348' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ba2fbd5d-f4bc-4070-978f-70f1c3403348' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-42edfbfe-2237-4d5d-a5d8-faef7bef98c0' class='xr-var-data-in' type='checkbox'><label for='data-42edfbfe-2237-4d5d-a5d8-faef7bef98c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>stored_direction :</span></dt><dd>decreasing</dd></dl></div><div class='xr-var-data'><pre>array([ 90.  ,  89.75,  89.5 , ..., -89.5 , -89.75, -90.  ], shape=(721,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>longitude</span></div><div class='xr-var-dims'>(longitude)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.25 0.5 ... 359.2 359.5 359.8</div><input id='attrs-c74cf76b-596d-4ed4-9072-7a4bc31b99d3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c74cf76b-596d-4ed4-9072-7a4bc31b99d3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bc0f2312-92f0-4919-83ad-74ceca77ff93' class='xr-var-data-in' type='checkbox'><label for='data-bc0f2312-92f0-4919-83ad-74ceca77ff93' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>longitude</dd></dl></div><div class='xr-var-data'><pre>array([0.0000e+00, 2.5000e-01, 5.0000e-01, ..., 3.5925e+02, 3.5950e+02,\n       3.5975e+02], shape=(1440,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>valid_time</span></div><div class='xr-var-dims'>(time, step)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f9faf935-0676-4fc1-901d-e4287496bd00' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f9faf935-0676-4fc1-901d-e4287496bd00' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5448906d-b0cd-45df-8381-048e36867dbb' class='xr-var-data-in' type='checkbox'><label for='data-5448906d-b0cd-45df-8381-048e36867dbb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>long_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>[756 values with dtype=datetime64[ns]]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e15940f9-e278-41ea-a11d-6bf4b99ea3ff' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e15940f9-e278-41ea-a11d-6bf4b99ea3ff' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>tp</span></div><div class='xr-var-dims'>(time, step, latitude, longitude)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c1ac907d-1e46-4ad3-9e91-294e49543e3d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c1ac907d-1e46-4ad3-9e91-294e49543e3d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f2681e2f-fc84-4018-afd1-71966b3012aa' class='xr-var-data-in' type='checkbox'><label for='data-f2681e2f-fc84-4018-afd1-71966b3012aa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>GRIB_paramId :</span></dt><dd>228</dd><dt><span>GRIB_dataType :</span></dt><dd>fc</dd><dt><span>GRIB_numberOfPoints :</span></dt><dd>1038240</dd><dt><span>GRIB_typeOfLevel :</span></dt><dd>surface</dd><dt><span>GRIB_stepUnits :</span></dt><dd>1</dd><dt><span>GRIB_stepType :</span></dt><dd>accum</dd><dt><span>GRIB_gridType :</span></dt><dd>regular_ll</dd><dt><span>GRIB_uvRelativeToGrid :</span></dt><dd>0</dd><dt><span>GRIB_NV :</span></dt><dd>0</dd><dt><span>GRIB_Nx :</span></dt><dd>1440</dd><dt><span>GRIB_Ny :</span></dt><dd>721</dd><dt><span>GRIB_cfName :</span></dt><dd>unknown</dd><dt><span>GRIB_cfVarName :</span></dt><dd>tp</dd><dt><span>GRIB_gridDefinitionDescription :</span></dt><dd>Latitude/Longitude Grid</dd><dt><span>GRIB_iDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_iScansNegatively :</span></dt><dd>0</dd><dt><span>GRIB_jDirectionIncrementInDegrees :</span></dt><dd>0.25</dd><dt><span>GRIB_jPointsAreConsecutive :</span></dt><dd>0</dd><dt><span>GRIB_jScansPositively :</span></dt><dd>0</dd><dt><span>GRIB_latitudeOfFirstGridPointInDegrees :</span></dt><dd>90.0</dd><dt><span>GRIB_latitudeOfLastGridPointInDegrees :</span></dt><dd>-90.0</dd><dt><span>GRIB_longitudeOfFirstGridPointInDegrees :</span></dt><dd>0.0</dd><dt><span>GRIB_longitudeOfLastGridPointInDegrees :</span></dt><dd>359.75</dd><dt><span>GRIB_missingValue :</span></dt><dd>3.4028234663852886e+38</dd><dt><span>GRIB_name :</span></dt><dd>Total precipitation</dd><dt><span>GRIB_shortName :</span></dt><dd>tp</dd><dt><span>GRIB_totalNumber :</span></dt><dd>0</dd><dt><span>GRIB_units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>Total precipitation</dd><dt><span>units :</span></dt><dd>m</dd><dt><span>standard_name :</span></dt><dd>unknown</dd></dl></div><div class='xr-var-data'><pre>[784909440 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-3ab4895a-ac28-4463-98cb-a75cd3ee1081' class='xr-section-summary-in' type='checkbox'  ><label for='section-3ab4895a-ac28-4463-98cb-a75cd3ee1081' class='xr-section-summary' >Indexes: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-26244a3b-3e5f-463e-a342-7e5378a77076' class='xr-index-data-in' type='checkbox'/><label for='index-26244a3b-3e5f-463e-a342-7e5378a77076' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2024-06-30 18:00:00&#x27;, &#x27;2024-07-01 06:00:00&#x27;,\n               &#x27;2024-07-01 18:00:00&#x27;, &#x27;2024-07-02 06:00:00&#x27;,\n               &#x27;2024-07-02 18:00:00&#x27;, &#x27;2024-07-03 06:00:00&#x27;,\n               &#x27;2024-07-03 18:00:00&#x27;, &#x27;2024-07-04 06:00:00&#x27;,\n               &#x27;2024-07-04 18:00:00&#x27;, &#x27;2024-07-05 06:00:00&#x27;,\n               &#x27;2024-07-05 18:00:00&#x27;, &#x27;2024-07-06 06:00:00&#x27;,\n               &#x27;2024-07-06 18:00:00&#x27;, &#x27;2024-07-07 06:00:00&#x27;,\n               &#x27;2024-07-07 18:00:00&#x27;, &#x27;2024-07-08 06:00:00&#x27;,\n               &#x27;2024-07-08 18:00:00&#x27;, &#x27;2024-07-09 06:00:00&#x27;,\n               &#x27;2024-07-09 18:00:00&#x27;, &#x27;2024-07-10 06:00:00&#x27;,\n               &#x27;2024-07-10 18:00:00&#x27;, &#x27;2024-07-11 06:00:00&#x27;,\n               &#x27;2024-07-11 18:00:00&#x27;, &#x27;2024-07-12 06:00:00&#x27;,\n               &#x27;2024-07-12 18:00:00&#x27;, &#x27;2024-07-13 06:00:00&#x27;,\n               &#x27;2024-07-13 18:00:00&#x27;, &#x27;2024-07-14 06:00:00&#x27;,\n               &#x27;2024-07-14 18:00:00&#x27;, &#x27;2024-07-15 06:00:00&#x27;,\n               &#x27;2024-07-15 18:00:00&#x27;, &#x27;2024-07-16 06:00:00&#x27;,\n               &#x27;2024-07-16 18:00:00&#x27;, &#x27;2024-07-17 06:00:00&#x27;,\n               &#x27;2024-07-17 18:00:00&#x27;, &#x27;2024-07-18 06:00:00&#x27;,\n               &#x27;2024-07-18 18:00:00&#x27;, &#x27;2024-07-19 06:00:00&#x27;,\n               &#x27;2024-07-19 18:00:00&#x27;, &#x27;2024-07-20 06:00:00&#x27;,\n               &#x27;2024-07-20 18:00:00&#x27;, &#x27;2024-07-21 06:00:00&#x27;,\n               &#x27;2024-07-21 18:00:00&#x27;, &#x27;2024-07-22 06:00:00&#x27;,\n               &#x27;2024-07-22 18:00:00&#x27;, &#x27;2024-07-23 06:00:00&#x27;,\n               &#x27;2024-07-23 18:00:00&#x27;, &#x27;2024-07-24 06:00:00&#x27;,\n               &#x27;2024-07-24 18:00:00&#x27;, &#x27;2024-07-25 06:00:00&#x27;,\n               &#x27;2024-07-25 18:00:00&#x27;, &#x27;2024-07-26 06:00:00&#x27;,\n               &#x27;2024-07-26 18:00:00&#x27;, &#x27;2024-07-27 06:00:00&#x27;,\n               &#x27;2024-07-27 18:00:00&#x27;, &#x27;2024-07-28 06:00:00&#x27;,\n               &#x27;2024-07-28 18:00:00&#x27;, &#x27;2024-07-29 06:00:00&#x27;,\n               &#x27;2024-07-29 18:00:00&#x27;, &#x27;2024-07-30 06:00:00&#x27;,\n               &#x27;2024-07-30 18:00:00&#x27;, &#x27;2024-07-31 06:00:00&#x27;,\n               &#x27;2024-07-31 18:00:00&#x27;],\n              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>step</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-1de7e469-59f0-43c9-ba03-288ccb4851b6' class='xr-index-data-in' type='checkbox'/><label for='index-1de7e469-59f0-43c9-ba03-288ccb4851b6' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(TimedeltaIndex([&#x27;0 days 01:00:00&#x27;, &#x27;0 days 02:00:00&#x27;, &#x27;0 days 03:00:00&#x27;,\n                &#x27;0 days 04:00:00&#x27;, &#x27;0 days 05:00:00&#x27;, &#x27;0 days 06:00:00&#x27;,\n                &#x27;0 days 07:00:00&#x27;, &#x27;0 days 08:00:00&#x27;, &#x27;0 days 09:00:00&#x27;,\n                &#x27;0 days 10:00:00&#x27;, &#x27;0 days 11:00:00&#x27;, &#x27;0 days 12:00:00&#x27;],\n               dtype=&#x27;timedelta64[ns]&#x27;, name=&#x27;step&#x27;, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>latitude</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-6a8305cb-546b-4263-8686-0bc3344b7b58' class='xr-index-data-in' type='checkbox'/><label for='index-6a8305cb-546b-4263-8686-0bc3344b7b58' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([  90.0,  89.75,   89.5,  89.25,   89.0,  88.75,   88.5,  88.25,   88.0,\n        87.75,\n       ...\n       -87.75,  -88.0, -88.25,  -88.5, -88.75,  -89.0, -89.25,  -89.5, -89.75,\n        -90.0],\n      dtype=&#x27;float64&#x27;, name=&#x27;latitude&#x27;, length=721))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>longitude</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-4272c95f-eb30-4994-be66-48c21b8569f3' class='xr-index-data-in' type='checkbox'/><label for='index-4272c95f-eb30-4994-be66-48c21b8569f3' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   0.0,   0.25,    0.5,   0.75,    1.0,   1.25,    1.5,   1.75,    2.0,\n         2.25,\n       ...\n        357.5, 357.75,  358.0, 358.25,  358.5, 358.75,  359.0, 359.25,  359.5,\n       359.75],\n      dtype=&#x27;float64&#x27;, name=&#x27;longitude&#x27;, length=1440))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-022ec0e2-90a6-439a-a7e2-1ebf17d25090' class='xr-section-summary-in' type='checkbox'  checked><label for='section-022ec0e2-90a6-439a-a7e2-1ebf17d25090' class='xr-section-summary' >Attributes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>GRIB_edition :</span></dt><dd>1</dd><dt><span>GRIB_centre :</span></dt><dd>ecmf</dd><dt><span>GRIB_centreDescription :</span></dt><dd>European Centre for Medium-Range Weather Forecasts</dd><dt><span>GRIB_subCentre :</span></dt><dd>0</dd><dt><span>Conventions :</span></dt><dd>CF-1.7</dd><dt><span>institution :</span></dt><dd>European Centre for Medium-Range Weather Forecasts</dd></dl></div></li></ul></div></div>\n</pre>\n</details>\n</div>\n\n<p>We obvserve: <strong>4 dimensions?</strong><br />\nApparently the \"time\" is divided into <strong>12 steps</strong>, and the timestamps, are only given <strong>6 hourly</strong>. So do we sum up all the values and only use the 6 hour timestamps? No. that won't be nescessary.\nGuess what this outputs:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ds2</span><span class=\"o\">.</span><span class=\"n\">tp</span><span class=\"o\">.</span><span class=\"n\">time</span>\n</code></pre></div>\n\n<p>It is:</p>\n<div class=\"output-block\">\n<details>\n<summary>xarray.DataArray 'time' (time: 63)</summary>\n<pre>\n<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=\"dark\"],\nhtml[data-theme=\"dark\"],\nbody[data-theme=\"dark\"],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1f1f1f;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n  height: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: \"\u25ba\";\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: \"\u25bc\";\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: \"(\";\n}\n\n.xr-dim-list:after {\n  content: \")\";\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: \",\";\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;time&#x27; (time: 63)&gt; Size: 504B\narray([&#x27;2024-06-30T18:00:00.000000000&#x27;, &#x27;2024-07-01T06:00:00.000000000&#x27;,\n       &#x27;2024-07-01T18:00:00.000000000&#x27;, &#x27;2024-07-02T06:00:00.000000000&#x27;,\n       &#x27;2024-07-02T18:00:00.000000000&#x27;, &#x27;2024-07-03T06:00:00.000000000&#x27;,\n       &#x27;2024-07-03T18:00:00.000000000&#x27;, &#x27;2024-07-04T06:00:00.000000000&#x27;,\n       &#x27;2024-07-04T18:00:00.000000000&#x27;, &#x27;2024-07-05T06:00:00.000000000&#x27;,\n       &#x27;2024-07-05T18:00:00.000000000&#x27;, &#x27;2024-07-06T06:00:00.000000000&#x27;,\n       &#x27;2024-07-06T18:00:00.000000000&#x27;, &#x27;2024-07-07T06:00:00.000000000&#x27;,\n       &#x27;2024-07-07T18:00:00.000000000&#x27;, &#x27;2024-07-08T06:00:00.000000000&#x27;,\n       &#x27;2024-07-08T18:00:00.000000000&#x27;, &#x27;2024-07-09T06:00:00.000000000&#x27;,\n       &#x27;2024-07-09T18:00:00.000000000&#x27;, &#x27;2024-07-10T06:00:00.000000000&#x27;,\n       &#x27;2024-07-10T18:00:00.000000000&#x27;, &#x27;2024-07-11T06:00:00.000000000&#x27;,\n       &#x27;2024-07-11T18:00:00.000000000&#x27;, &#x27;2024-07-12T06:00:00.000000000&#x27;,\n       &#x27;2024-07-12T18:00:00.000000000&#x27;, &#x27;2024-07-13T06:00:00.000000000&#x27;,\n       &#x27;2024-07-13T18:00:00.000000000&#x27;, &#x27;2024-07-14T06:00:00.000000000&#x27;,\n       &#x27;2024-07-14T18:00:00.000000000&#x27;, &#x27;2024-07-15T06:00:00.000000000&#x27;,\n       &#x27;2024-07-15T18:00:00.000000000&#x27;, &#x27;2024-07-16T06:00:00.000000000&#x27;,\n       &#x27;2024-07-16T18:00:00.000000000&#x27;, &#x27;2024-07-17T06:00:00.000000000&#x27;,\n       &#x27;2024-07-17T18:00:00.000000000&#x27;, &#x27;2024-07-18T06:00:00.000000000&#x27;,\n       &#x27;2024-07-18T18:00:00.000000000&#x27;, &#x27;2024-07-19T06:00:00.000000000&#x27;,\n       &#x27;2024-07-19T18:00:00.000000000&#x27;, &#x27;2024-07-20T06:00:00.000000000&#x27;,\n       &#x27;2024-07-20T18:00:00.000000000&#x27;, &#x27;2024-07-21T06:00:00.000000000&#x27;,\n       &#x27;2024-07-21T18:00:00.000000000&#x27;, &#x27;2024-07-22T06:00:00.000000000&#x27;,\n       &#x27;2024-07-22T18:00:00.000000000&#x27;, &#x27;2024-07-23T06:00:00.000000000&#x27;,\n       &#x27;2024-07-23T18:00:00.000000000&#x27;, &#x27;2024-07-24T06:00:00.000000000&#x27;,\n       &#x27;2024-07-24T18:00:00.000000000&#x27;, &#x27;2024-07-25T06:00:00.000000000&#x27;,\n       &#x27;2024-07-25T18:00:00.000000000&#x27;, &#x27;2024-07-26T06:00:00.000000000&#x27;,\n       &#x27;2024-07-26T18:00:00.000000000&#x27;, &#x27;2024-07-27T06:00:00.000000000&#x27;,\n       &#x27;2024-07-27T18:00:00.000000000&#x27;, &#x27;2024-07-28T06:00:00.000000000&#x27;,\n       &#x27;2024-07-28T18:00:00.000000000&#x27;, &#x27;2024-07-29T06:00:00.000000000&#x27;,\n       &#x27;2024-07-29T18:00:00.000000000&#x27;, &#x27;2024-07-30T06:00:00.000000000&#x27;,\n       &#x27;2024-07-30T18:00:00.000000000&#x27;, &#x27;2024-07-31T06:00:00.000000000&#x27;,\n       &#x27;2024-07-31T18:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)\nCoordinates:\n    number   int64 8B 0\n  * time     (time) datetime64[ns] 504B 2024-06-30T18:00:00 ... 2024-07-31T18...\n    surface  float64 8B 0.0\nAttributes:\n    long_name:      initial time of forecast\n    standard_name:  forecast_reference_time</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'time'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 63</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-aafd74da-de16-4dbb-a902-eab46037a824' class='xr-array-in' type='checkbox' checked><label for='section-aafd74da-de16-4dbb-a902-eab46037a824' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>2024-06-30T18:00:00 2024-07-01T06:00:00 ... 2024-07-31T18:00:00</span></div><div class='xr-array-data'><pre>array([&#x27;2024-06-30T18:00:00.000000000&#x27;, &#x27;2024-07-01T06:00:00.000000000&#x27;,\n       &#x27;2024-07-01T18:00:00.000000000&#x27;, &#x27;2024-07-02T06:00:00.000000000&#x27;,\n       &#x27;2024-07-02T18:00:00.000000000&#x27;, &#x27;2024-07-03T06:00:00.000000000&#x27;,\n       &#x27;2024-07-03T18:00:00.000000000&#x27;, &#x27;2024-07-04T06:00:00.000000000&#x27;,\n       &#x27;2024-07-04T18:00:00.000000000&#x27;, &#x27;2024-07-05T06:00:00.000000000&#x27;,\n       &#x27;2024-07-05T18:00:00.000000000&#x27;, &#x27;2024-07-06T06:00:00.000000000&#x27;,\n       &#x27;2024-07-06T18:00:00.000000000&#x27;, &#x27;2024-07-07T06:00:00.000000000&#x27;,\n       &#x27;2024-07-07T18:00:00.000000000&#x27;, &#x27;2024-07-08T06:00:00.000000000&#x27;,\n       &#x27;2024-07-08T18:00:00.000000000&#x27;, &#x27;2024-07-09T06:00:00.000000000&#x27;,\n       &#x27;2024-07-09T18:00:00.000000000&#x27;, &#x27;2024-07-10T06:00:00.000000000&#x27;,\n       &#x27;2024-07-10T18:00:00.000000000&#x27;, &#x27;2024-07-11T06:00:00.000000000&#x27;,\n       &#x27;2024-07-11T18:00:00.000000000&#x27;, &#x27;2024-07-12T06:00:00.000000000&#x27;,\n       &#x27;2024-07-12T18:00:00.000000000&#x27;, &#x27;2024-07-13T06:00:00.000000000&#x27;,\n       &#x27;2024-07-13T18:00:00.000000000&#x27;, &#x27;2024-07-14T06:00:00.000000000&#x27;,\n       &#x27;2024-07-14T18:00:00.000000000&#x27;, &#x27;2024-07-15T06:00:00.000000000&#x27;,\n       &#x27;2024-07-15T18:00:00.000000000&#x27;, &#x27;2024-07-16T06:00:00.000000000&#x27;,\n       &#x27;2024-07-16T18:00:00.000000000&#x27;, &#x27;2024-07-17T06:00:00.000000000&#x27;,\n       &#x27;2024-07-17T18:00:00.000000000&#x27;, &#x27;2024-07-18T06:00:00.000000000&#x27;,\n       &#x27;2024-07-18T18:00:00.000000000&#x27;, &#x27;2024-07-19T06:00:00.000000000&#x27;,\n       &#x27;2024-07-19T18:00:00.000000000&#x27;, &#x27;2024-07-20T06:00:00.000000000&#x27;,\n       &#x27;2024-07-20T18:00:00.000000000&#x27;, &#x27;2024-07-21T06:00:00.000000000&#x27;,\n       &#x27;2024-07-21T18:00:00.000000000&#x27;, &#x27;2024-07-22T06:00:00.000000000&#x27;,\n       &#x27;2024-07-22T18:00:00.000000000&#x27;, &#x27;2024-07-23T06:00:00.000000000&#x27;,\n       &#x27;2024-07-23T18:00:00.000000000&#x27;, &#x27;2024-07-24T06:00:00.000000000&#x27;,\n       &#x27;2024-07-24T18:00:00.000000000&#x27;, &#x27;2024-07-25T06:00:00.000000000&#x27;,\n       &#x27;2024-07-25T18:00:00.000000000&#x27;, &#x27;2024-07-26T06:00:00.000000000&#x27;,\n       &#x27;2024-07-26T18:00:00.000000000&#x27;, &#x27;2024-07-27T06:00:00.000000000&#x27;,\n       &#x27;2024-07-27T18:00:00.000000000&#x27;, &#x27;2024-07-28T06:00:00.000000000&#x27;,\n       &#x27;2024-07-28T18:00:00.000000000&#x27;, &#x27;2024-07-29T06:00:00.000000000&#x27;,\n       &#x27;2024-07-29T18:00:00.000000000&#x27;, &#x27;2024-07-30T06:00:00.000000000&#x27;,\n       &#x27;2024-07-30T18:00:00.000000000&#x27;, &#x27;2024-07-31T06:00:00.000000000&#x27;,\n       &#x27;2024-07-31T18:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></div></li><li class='xr-section-item'><input id='section-aeb5478e-6c5f-4bcb-b14f-cc2d87137e10' class='xr-section-summary-in' type='checkbox'  checked><label for='section-aeb5478e-6c5f-4bcb-b14f-cc2d87137e10' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>number</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-91bb87f3-e080-44e3-95c4-88a0b39a71f7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-91bb87f3-e080-44e3-95c4-88a0b39a71f7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-acc350e1-1e5b-4f7a-b261-ead071adb898' class='xr-var-data-in' type='checkbox'><label for='data-acc350e1-1e5b-4f7a-b261-ead071adb898' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>ensemble member numerical id</dd><dt><span>units :</span></dt><dd>1</dd><dt><span>standard_name :</span></dt><dd>realization</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-06-30T18:00:00 ... 2024-07-...</div><input id='attrs-de816e1f-e7dd-4739-9e38-2231804cf467' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-de816e1f-e7dd-4739-9e38-2231804cf467' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-78974141-8529-4d13-9f68-234da75d5974' class='xr-var-data-in' type='checkbox'><label for='data-78974141-8529-4d13-9f68-234da75d5974' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>initial time of forecast</dd><dt><span>standard_name :</span></dt><dd>forecast_reference_time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-06-30T18:00:00.000000000&#x27;, &#x27;2024-07-01T06:00:00.000000000&#x27;,\n       &#x27;2024-07-01T18:00:00.000000000&#x27;, &#x27;2024-07-02T06:00:00.000000000&#x27;,\n       &#x27;2024-07-02T18:00:00.000000000&#x27;, &#x27;2024-07-03T06:00:00.000000000&#x27;,\n       &#x27;2024-07-03T18:00:00.000000000&#x27;, &#x27;2024-07-04T06:00:00.000000000&#x27;,\n       &#x27;2024-07-04T18:00:00.000000000&#x27;, &#x27;2024-07-05T06:00:00.000000000&#x27;,\n       &#x27;2024-07-05T18:00:00.000000000&#x27;, &#x27;2024-07-06T06:00:00.000000000&#x27;,\n       &#x27;2024-07-06T18:00:00.000000000&#x27;, &#x27;2024-07-07T06:00:00.000000000&#x27;,\n       &#x27;2024-07-07T18:00:00.000000000&#x27;, &#x27;2024-07-08T06:00:00.000000000&#x27;,\n       &#x27;2024-07-08T18:00:00.000000000&#x27;, &#x27;2024-07-09T06:00:00.000000000&#x27;,\n       &#x27;2024-07-09T18:00:00.000000000&#x27;, &#x27;2024-07-10T06:00:00.000000000&#x27;,\n       &#x27;2024-07-10T18:00:00.000000000&#x27;, &#x27;2024-07-11T06:00:00.000000000&#x27;,\n       &#x27;2024-07-11T18:00:00.000000000&#x27;, &#x27;2024-07-12T06:00:00.000000000&#x27;,\n       &#x27;2024-07-12T18:00:00.000000000&#x27;, &#x27;2024-07-13T06:00:00.000000000&#x27;,\n       &#x27;2024-07-13T18:00:00.000000000&#x27;, &#x27;2024-07-14T06:00:00.000000000&#x27;,\n       &#x27;2024-07-14T18:00:00.000000000&#x27;, &#x27;2024-07-15T06:00:00.000000000&#x27;,\n       &#x27;2024-07-15T18:00:00.000000000&#x27;, &#x27;2024-07-16T06:00:00.000000000&#x27;,\n       &#x27;2024-07-16T18:00:00.000000000&#x27;, &#x27;2024-07-17T06:00:00.000000000&#x27;,\n       &#x27;2024-07-17T18:00:00.000000000&#x27;, &#x27;2024-07-18T06:00:00.000000000&#x27;,\n       &#x27;2024-07-18T18:00:00.000000000&#x27;, &#x27;2024-07-19T06:00:00.000000000&#x27;,\n       &#x27;2024-07-19T18:00:00.000000000&#x27;, &#x27;2024-07-20T06:00:00.000000000&#x27;,\n       &#x27;2024-07-20T18:00:00.000000000&#x27;, &#x27;2024-07-21T06:00:00.000000000&#x27;,\n       &#x27;2024-07-21T18:00:00.000000000&#x27;, &#x27;2024-07-22T06:00:00.000000000&#x27;,\n       &#x27;2024-07-22T18:00:00.000000000&#x27;, &#x27;2024-07-23T06:00:00.000000000&#x27;,\n       &#x27;2024-07-23T18:00:00.000000000&#x27;, &#x27;2024-07-24T06:00:00.000000000&#x27;,\n       &#x27;2024-07-24T18:00:00.000000000&#x27;, &#x27;2024-07-25T06:00:00.000000000&#x27;,\n       &#x27;2024-07-25T18:00:00.000000000&#x27;, &#x27;2024-07-26T06:00:00.000000000&#x27;,\n       &#x27;2024-07-26T18:00:00.000000000&#x27;, &#x27;2024-07-27T06:00:00.000000000&#x27;,\n       &#x27;2024-07-27T18:00:00.000000000&#x27;, &#x27;2024-07-28T06:00:00.000000000&#x27;,\n       &#x27;2024-07-28T18:00:00.000000000&#x27;, &#x27;2024-07-29T06:00:00.000000000&#x27;,\n       &#x27;2024-07-29T18:00:00.000000000&#x27;, &#x27;2024-07-30T06:00:00.000000000&#x27;,\n       &#x27;2024-07-30T18:00:00.000000000&#x27;, &#x27;2024-07-31T06:00:00.000000000&#x27;,\n       &#x27;2024-07-31T18:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>surface</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0</div><input id='attrs-46b8c343-8201-4ce9-9c15-fcde094a6b92' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-46b8c343-8201-4ce9-9c15-fcde094a6b92' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-373566fe-6eba-4209-b4fa-6e60addaf2d3' class='xr-var-data-in' type='checkbox'><label for='data-373566fe-6eba-4209-b4fa-6e60addaf2d3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>original GRIB coordinate for key: level(surface)</dd><dt><span>units :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>array(0.)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-de391db8-a5be-47f9-b57c-4f0c7feabc64' class='xr-section-summary-in' type='checkbox'  ><label for='section-de391db8-a5be-47f9-b57c-4f0c7feabc64' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-6724187e-b063-4a21-9c40-a6159789b005' class='xr-index-data-in' type='checkbox'/><label for='index-6724187e-b063-4a21-9c40-a6159789b005' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2024-06-30 18:00:00&#x27;, &#x27;2024-07-01 06:00:00&#x27;,\n               &#x27;2024-07-01 18:00:00&#x27;, &#x27;2024-07-02 06:00:00&#x27;,\n               &#x27;2024-07-02 18:00:00&#x27;, &#x27;2024-07-03 06:00:00&#x27;,\n               &#x27;2024-07-03 18:00:00&#x27;, &#x27;2024-07-04 06:00:00&#x27;,\n               &#x27;2024-07-04 18:00:00&#x27;, &#x27;2024-07-05 06:00:00&#x27;,\n               &#x27;2024-07-05 18:00:00&#x27;, &#x27;2024-07-06 06:00:00&#x27;,\n               &#x27;2024-07-06 18:00:00&#x27;, &#x27;2024-07-07 06:00:00&#x27;,\n               &#x27;2024-07-07 18:00:00&#x27;, &#x27;2024-07-08 06:00:00&#x27;,\n               &#x27;2024-07-08 18:00:00&#x27;, &#x27;2024-07-09 06:00:00&#x27;,\n               &#x27;2024-07-09 18:00:00&#x27;, &#x27;2024-07-10 06:00:00&#x27;,\n               &#x27;2024-07-10 18:00:00&#x27;, &#x27;2024-07-11 06:00:00&#x27;,\n               &#x27;2024-07-11 18:00:00&#x27;, &#x27;2024-07-12 06:00:00&#x27;,\n               &#x27;2024-07-12 18:00:00&#x27;, &#x27;2024-07-13 06:00:00&#x27;,\n               &#x27;2024-07-13 18:00:00&#x27;, &#x27;2024-07-14 06:00:00&#x27;,\n               &#x27;2024-07-14 18:00:00&#x27;, &#x27;2024-07-15 06:00:00&#x27;,\n               &#x27;2024-07-15 18:00:00&#x27;, &#x27;2024-07-16 06:00:00&#x27;,\n               &#x27;2024-07-16 18:00:00&#x27;, &#x27;2024-07-17 06:00:00&#x27;,\n               &#x27;2024-07-17 18:00:00&#x27;, &#x27;2024-07-18 06:00:00&#x27;,\n               &#x27;2024-07-18 18:00:00&#x27;, &#x27;2024-07-19 06:00:00&#x27;,\n               &#x27;2024-07-19 18:00:00&#x27;, &#x27;2024-07-20 06:00:00&#x27;,\n               &#x27;2024-07-20 18:00:00&#x27;, &#x27;2024-07-21 06:00:00&#x27;,\n               &#x27;2024-07-21 18:00:00&#x27;, &#x27;2024-07-22 06:00:00&#x27;,\n               &#x27;2024-07-22 18:00:00&#x27;, &#x27;2024-07-23 06:00:00&#x27;,\n               &#x27;2024-07-23 18:00:00&#x27;, &#x27;2024-07-24 06:00:00&#x27;,\n               &#x27;2024-07-24 18:00:00&#x27;, &#x27;2024-07-25 06:00:00&#x27;,\n               &#x27;2024-07-25 18:00:00&#x27;, &#x27;2024-07-26 06:00:00&#x27;,\n               &#x27;2024-07-26 18:00:00&#x27;, &#x27;2024-07-27 06:00:00&#x27;,\n               &#x27;2024-07-27 18:00:00&#x27;, &#x27;2024-07-28 06:00:00&#x27;,\n               &#x27;2024-07-28 18:00:00&#x27;, &#x27;2024-07-29 06:00:00&#x27;,\n               &#x27;2024-07-29 18:00:00&#x27;, &#x27;2024-07-30 06:00:00&#x27;,\n               &#x27;2024-07-30 18:00:00&#x27;, &#x27;2024-07-31 06:00:00&#x27;,\n               &#x27;2024-07-31 18:00:00&#x27;],\n              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ad20e0c7-e59a-47f2-aa7e-9faf9e3c96c3' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ad20e0c7-e59a-47f2-aa7e-9faf9e3c96c3' class='xr-section-summary' >Attributes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>initial time of forecast</dd><dt><span>standard_name :</span></dt><dd>forecast_reference_time</dd></dl></div></li></ul></div></div>\n</pre>\n</details>\n</div>\n\n<p>Eh? That didn't say much&mdash; how about:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ds2</span><span class=\"o\">.</span><span class=\"n\">tp</span><span class=\"o\">.</span><span class=\"n\">isel</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"o\">=</span><span class=\"mi\">8</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"o\">.</span><span class=\"n\">shape</span>\n</code></pre></div>\n\n<p>Output:</p>\n<div class=\"codehilite\"><pre><span></span><code>(12, 721, 1440)\n</code></pre></div>\n\n<p>Interesting! So all the steps can be indexed into after doing the isel.</p>\n<p>like:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">ds2</span><span class=\"o\">.</span><span class=\"n\">tp</span><span class=\"o\">.</span><span class=\"n\">isel</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"o\">=</span><span class=\"mi\">8</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n</code></pre></div>\n\n<p>Sloppy but works. \nAlso the website says that the precipitation value is in <strong>metres (m)</strong>. Anyways let's get to plotting!</p>\n<p>First I made <code>helpers/plotter.py</code> to act as a helper script so we can use the functions in any notebook.</p>\n<p>Let's define <code>plot_tp</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">plot_tp</span><span class=\"p\">(</span>\n    <span class=\"n\">data</span><span class=\"p\">:</span> <span class=\"n\">xr</span><span class=\"o\">.</span><span class=\"n\">Dataset</span><span class=\"p\">,</span>\n    <span class=\"n\">time</span><span class=\"p\">,</span>\n    <span class=\"n\">lat_range</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">,</span>\n    <span class=\"n\">lon_range</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">,</span>\n    <span class=\"n\">cmap</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;viridis&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">step</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">Figure</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Plot total precipitation (tp) at a specified time.</span>\n\n<span class=\"sd\">    Parameters</span>\n<span class=\"sd\">    ----------</span>\n<span class=\"sd\">    data : xarray.Dataset</span>\n<span class=\"sd\">        Must contain variable &#39;tp&#39; with dims (time, step, latitude, longitude).</span>\n<span class=\"sd\">    time : str or numpy.datetime64</span>\n<span class=\"sd\">        Timestamp to select (nearest match).</span>\n<span class=\"sd\">    lat_range : tuple (min_lat, max_lat), optional</span>\n<span class=\"sd\">        Latitude subsetting range.</span>\n<span class=\"sd\">    lon_range : tuple (min_lon, max_lon), optional</span>\n<span class=\"sd\">        Longitude subsetting range.</span>\n<span class=\"sd\">    cmap : str or Colormap, default &#39;viridis&#39;</span>\n<span class=\"sd\">        Colormap for precipitation shading.</span>\n\n<span class=\"sd\">    Returns</span>\n<span class=\"sd\">    -------</span>\n<span class=\"sd\">    plt.Figure</span>\n<span class=\"sd\">        The Matplotlib Figure object of the precipitation plot.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n</code></pre></div>\n\n<p>Then we just select the time from the array:</p>\n<div class=\"codehilite\"><pre><span></span><code>    <span class=\"n\">da</span> <span class=\"o\">=</span> <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">tp</span><span class=\"o\">.</span><span class=\"n\">sel</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"o\">=</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s1\">&#39;nearest&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"n\">da</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"k\">if</span> <span class=\"n\">step</span> <span class=\"k\">else</span> <span class=\"p\">(</span><span class=\"n\">da</span><span class=\"o\">.</span><span class=\"n\">fillna</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">sum</span><span class=\"p\">(</span><span class=\"n\">dim</span><span class=\"o\">=</span><span class=\"s1\">&#39;step&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">1000</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">compute</span><span class=\"p\">()</span>\n</code></pre></div>\n\n<p>Why the <code>.compute()</code>? I'll explain later, it was mainly for debugging but I decided to leave it in there.\nAlso the next part was done over a lot of trial and error, and in retrospect has grown way too complex, but it works, with edge cases too so I don't want to break it.</p>\n<div class=\"codehilite\"><pre><span></span><code>    <span class=\"k\">if</span> <span class=\"n\">lat_range</span><span class=\"p\">:</span>\n        <span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">sel</span><span class=\"p\">(</span><span class=\"n\">latitude</span><span class=\"o\">=</span><span class=\"n\">_slice_coord</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">lat_range</span><span class=\"p\">))</span>\n    <span class=\"k\">if</span> <span class=\"n\">lon_range</span><span class=\"p\">:</span>\n        <span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">sel</span><span class=\"p\">(</span><span class=\"n\">longitude</span><span class=\"o\">=</span><span class=\"n\">_slice_coord</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">lon_range</span><span class=\"p\">))</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">size</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n        <span class=\"n\">msg</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n            <span class=\"sa\">f</span><span class=\"s2\">&quot;Empty selection: lat </span><span class=\"si\">{</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">\u2013</span><span class=\"si\">{</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">, &quot;</span>\n            <span class=\"sa\">f</span><span class=\"s2\">&quot;lon </span><span class=\"si\">{</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">\u2013</span><span class=\"si\">{</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span>\n        <span class=\"p\">)</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">ValueError</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">isnan</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)):</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">ValueError</span><span class=\"p\">(</span><span class=\"s2\">&quot;All values are NaN for this time/region.&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"n\">vmin</span><span class=\"p\">,</span> <span class=\"n\">vmax</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">(),</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span>\n    <span class=\"n\">norm</span> <span class=\"o\">=</span> <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">Normalize</span><span class=\"p\">(</span><span class=\"n\">vmin</span><span class=\"o\">=</span><span class=\"n\">vmin</span><span class=\"p\">,</span> <span class=\"n\">vmax</span><span class=\"o\">=</span><span class=\"n\">vmax</span><span class=\"p\">)</span> <span class=\"k\">if</span> <span class=\"n\">vmax</span> <span class=\"o\">&gt;</span> <span class=\"n\">vmin</span> <span class=\"k\">else</span> <span class=\"kc\">None</span>\n</code></pre></div>\n\n<p>Pretty straight forward error handling (Maybe not, it took me a few days to get right so&mdash;).\n<strong>cleaning NaNs</strong>, <strong>No empty Selections</strong> etc. </p>\n<p>What is <code>_slice_coord()</code>? It's to deal with <strong>wrap arounds</strong> (No idea why I added this, I'm the only one who is going to use it anyway). Here is the code:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">_slice_coord</span><span class=\"p\">(</span>\n    <span class=\"n\">coord</span><span class=\"p\">:</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">ndarray</span><span class=\"p\">,</span>\n    <span class=\"n\">min_val</span><span class=\"p\">:</span> <span class=\"nb\">float</span><span class=\"p\">,</span>\n    <span class=\"n\">max_val</span><span class=\"p\">:</span> <span class=\"nb\">float</span>\n<span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">slice</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Compute a robust slice for an array of coordinate values that may be</span>\n<span class=\"sd\">    in ascending or descending order.</span>\n\n<span class=\"sd\">    Parameters</span>\n<span class=\"sd\">    ----------</span>\n<span class=\"sd\">    coord : 1D numpy array</span>\n<span class=\"sd\">        Coordinate values (e.g., latitude or longitude).</span>\n<span class=\"sd\">    min_val : float</span>\n<span class=\"sd\">        Desired minimum coordinate.</span>\n<span class=\"sd\">    max_val : float</span>\n<span class=\"sd\">        Desired maximum coordinate.</span>\n\n<span class=\"sd\">    Returns</span>\n<span class=\"sd\">    -------</span>\n<span class=\"sd\">    slice</span>\n<span class=\"sd\">        Slice object for selecting the desired range from an xarray DataArray.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"n\">ascending</span> <span class=\"o\">=</span> <span class=\"n\">coord</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">&lt;</span> <span class=\"n\">coord</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n\n    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">ascending</span><span class=\"p\">:</span>\n        <span class=\"n\">rev</span> <span class=\"o\">=</span> <span class=\"n\">coord</span><span class=\"p\">[::</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n        <span class=\"n\">i_min</span> <span class=\"o\">=</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">coord</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"mi\">1</span> <span class=\"o\">-</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">searchsorted</span><span class=\"p\">(</span><span class=\"n\">rev</span><span class=\"p\">,</span> <span class=\"n\">min_val</span><span class=\"p\">,</span> <span class=\"s1\">&#39;left&#39;</span><span class=\"p\">)</span>\n        <span class=\"n\">i_max</span> <span class=\"o\">=</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">coord</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"mi\">1</span> <span class=\"o\">-</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">searchsorted</span><span class=\"p\">(</span><span class=\"n\">rev</span><span class=\"p\">,</span> <span class=\"n\">max_val</span><span class=\"p\">,</span> <span class=\"s1\">&#39;right&#39;</span><span class=\"p\">)</span>\n        <span class=\"n\">start</span><span class=\"p\">,</span> <span class=\"n\">stop</span> <span class=\"o\">=</span> <span class=\"nb\">sorted</span><span class=\"p\">((</span><span class=\"n\">coord</span><span class=\"p\">[</span><span class=\"n\">i_min</span><span class=\"p\">],</span> <span class=\"n\">coord</span><span class=\"p\">[</span><span class=\"n\">i_max</span><span class=\"p\">]),</span> <span class=\"n\">reverse</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"n\">i_min</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">searchsorted</span><span class=\"p\">(</span><span class=\"n\">coord</span><span class=\"p\">,</span> <span class=\"n\">min_val</span><span class=\"p\">,</span> <span class=\"s1\">&#39;left&#39;</span><span class=\"p\">)</span>\n        <span class=\"n\">i_max</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">searchsorted</span><span class=\"p\">(</span><span class=\"n\">coord</span><span class=\"p\">,</span> <span class=\"n\">max_val</span><span class=\"p\">,</span> <span class=\"s1\">&#39;right&#39;</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"mi\">1</span>\n        <span class=\"n\">start</span><span class=\"p\">,</span> <span class=\"n\">stop</span> <span class=\"o\">=</span> <span class=\"nb\">sorted</span><span class=\"p\">((</span><span class=\"n\">coord</span><span class=\"p\">[</span><span class=\"n\">i_min</span><span class=\"p\">],</span> <span class=\"n\">coord</span><span class=\"p\">[</span><span class=\"n\">i_max</span><span class=\"p\">]))</span>\n\n    <span class=\"k\">return</span> <span class=\"nb\">slice</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">,</span> <span class=\"n\">stop</span><span class=\"p\">)</span>\n</code></pre></div>\n\n<p>Now the plotting part: (We're back in <code>plot_tp()</code>)</p>\n<div class=\"codehilite\"><pre><span></span><code>    <span class=\"n\">lons2d</span><span class=\"p\">,</span> <span class=\"n\">lats2d</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">meshgrid</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"p\">)</span>\n    <span class=\"n\">fig</span> <span class=\"o\">=</span> <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">figure</span><span class=\"p\">(</span><span class=\"n\">figsize</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">))</span>\n    <span class=\"n\">ax</span> <span class=\"o\">=</span> <span class=\"n\">fig</span><span class=\"o\">.</span><span class=\"n\">add_subplot</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">projection</span><span class=\"o\">=</span><span class=\"n\">ccrs</span><span class=\"o\">.</span><span class=\"n\">PlateCarree</span><span class=\"p\">())</span>\n    <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">coastlines</span><span class=\"p\">(</span><span class=\"n\">resolution</span><span class=\"o\">=</span><span class=\"s1\">&#39;50m&#39;</span><span class=\"p\">,</span> <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"s1\">&#39;gray&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">add_feature</span><span class=\"p\">(</span><span class=\"n\">cfeature</span><span class=\"o\">.</span><span class=\"n\">BORDERS</span><span class=\"p\">,</span> <span class=\"n\">linestyle</span><span class=\"o\">=</span><span class=\"s1\">&#39;:&#39;</span><span class=\"p\">,</span> <span class=\"n\">linewidth</span><span class=\"o\">=</span><span class=\"mf\">0.5</span><span class=\"p\">)</span>\n\n    <span class=\"n\">pcm</span> <span class=\"o\">=</span> <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">pcolormesh</span><span class=\"p\">(</span>\n        <span class=\"n\">lons2d</span><span class=\"p\">,</span> <span class=\"n\">lats2d</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span>\n        <span class=\"n\">transform</span><span class=\"o\">=</span><span class=\"n\">ccrs</span><span class=\"o\">.</span><span class=\"n\">PlateCarree</span><span class=\"p\">(),</span> <span class=\"n\">cmap</span><span class=\"o\">=</span><span class=\"n\">cmap</span><span class=\"p\">,</span>\n        <span class=\"n\">norm</span><span class=\"o\">=</span><span class=\"n\">norm</span><span class=\"p\">,</span> <span class=\"n\">shading</span><span class=\"o\">=</span><span class=\"s1\">&#39;auto&#39;</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"n\">cbar</span> <span class=\"o\">=</span> <span class=\"n\">fig</span><span class=\"o\">.</span><span class=\"n\">colorbar</span><span class=\"p\">(</span><span class=\"n\">pcm</span><span class=\"p\">,</span> <span class=\"n\">ax</span><span class=\"o\">=</span><span class=\"n\">ax</span><span class=\"p\">,</span> <span class=\"n\">orientation</span><span class=\"o\">=</span><span class=\"s1\">&#39;vertical&#39;</span><span class=\"p\">,</span> <span class=\"n\">pad</span><span class=\"o\">=</span><span class=\"mf\">0.02</span><span class=\"p\">)</span>\n    <span class=\"n\">cbar</span><span class=\"o\">.</span><span class=\"n\">set_label</span><span class=\"p\">(</span><span class=\"s1\">&#39;Total Precipitation (mm)&#39;</span><span class=\"p\">)</span>\n\n    <span class=\"n\">time_actual</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">datetime_as_string</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"n\">unit</span><span class=\"o\">=</span><span class=\"s1\">&#39;h&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_title</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">&#39;Total Precipitation for </span><span class=\"si\">{</span><span class=\"n\">time_actual</span><span class=\"si\">}</span><span class=\"s1\">&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">lat_range</span> <span class=\"ow\">or</span> <span class=\"n\">lon_range</span><span class=\"p\">:</span>\n        <span class=\"n\">extent</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">(),</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">(),</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">(),</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()]</span>\n        <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_extent</span><span class=\"p\">(</span><span class=\"n\">extent</span><span class=\"p\">,</span> <span class=\"n\">crs</span><span class=\"o\">=</span><span class=\"n\">ccrs</span><span class=\"o\">.</span><span class=\"n\">PlateCarree</span><span class=\"p\">())</span>\n\n    <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">tight_layout</span><span class=\"p\">()</span>\n    <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">show</span><span class=\"p\">()</span>\n    <span class=\"k\">return</span> <span class=\"n\">fig</span>\n</code></pre></div>\n\n<p>Most of this is pretty standard procedure&mdash; Again I added the normalization and stuff but I think it was just fine without.</p>\n<p>So finally our complicated function looks something like:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">plot_tp</span><span class=\"p\">(</span>\n    <span class=\"n\">data</span><span class=\"p\">:</span> <span class=\"n\">xr</span><span class=\"o\">.</span><span class=\"n\">Dataset</span><span class=\"p\">,</span>\n    <span class=\"n\">time</span><span class=\"p\">,</span>\n    <span class=\"n\">lat_range</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">,</span>\n    <span class=\"n\">lon_range</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span> <span class=\"o\">=</span> <span class=\"kc\">None</span><span class=\"p\">,</span>\n    <span class=\"n\">cmap</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;viridis&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">step</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n<span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">Figure</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Plot total precipitation (tp) at a specified time.</span>\n\n<span class=\"sd\">    Parameters</span>\n<span class=\"sd\">    ----------</span>\n<span class=\"sd\">    data : xarray.Dataset</span>\n<span class=\"sd\">        Must contain variable &#39;tp&#39; with dims (time, step, latitude, longitude).</span>\n<span class=\"sd\">    time : str or numpy.datetime64</span>\n<span class=\"sd\">        Timestamp to select (nearest match).</span>\n<span class=\"sd\">    lat_range : tuple (min_lat, max_lat), optional</span>\n<span class=\"sd\">        Latitude subsetting range.</span>\n<span class=\"sd\">    lon_range : tuple (min_lon, max_lon), optional</span>\n<span class=\"sd\">        Longitude subsetting range.</span>\n<span class=\"sd\">    cmap : str or Colormap, default &#39;viridis&#39;</span>\n<span class=\"sd\">        Colormap for precipitation shading.</span>\n\n<span class=\"sd\">    Returns</span>\n<span class=\"sd\">    -------</span>\n<span class=\"sd\">    plt.Figure</span>\n<span class=\"sd\">        The Matplotlib Figure object of the precipitation plot.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"n\">da</span> <span class=\"o\">=</span> <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">tp</span><span class=\"o\">.</span><span class=\"n\">sel</span><span class=\"p\">(</span><span class=\"n\">time</span><span class=\"o\">=</span><span class=\"n\">time</span><span class=\"p\">,</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s1\">&#39;nearest&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"n\">da</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"k\">if</span> <span class=\"n\">step</span> <span class=\"k\">else</span> <span class=\"p\">(</span><span class=\"n\">da</span><span class=\"o\">.</span><span class=\"n\">fillna</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">sum</span><span class=\"p\">(</span><span class=\"n\">dim</span><span class=\"o\">=</span><span class=\"s1\">&#39;step&#39;</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"mi\">1000</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">compute</span><span class=\"p\">()</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">lat_range</span><span class=\"p\">:</span>\n        <span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">sel</span><span class=\"p\">(</span><span class=\"n\">latitude</span><span class=\"o\">=</span><span class=\"n\">_slice_coord</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">lat_range</span><span class=\"p\">))</span>\n    <span class=\"k\">if</span> <span class=\"n\">lon_range</span><span class=\"p\">:</span>\n        <span class=\"n\">arr</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">sel</span><span class=\"p\">(</span><span class=\"n\">longitude</span><span class=\"o\">=</span><span class=\"n\">_slice_coord</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">lon_range</span><span class=\"p\">))</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">size</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n        <span class=\"n\">msg</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n            <span class=\"sa\">f</span><span class=\"s2\">&quot;Empty selection: lat </span><span class=\"si\">{</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">\u2013</span><span class=\"si\">{</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">, &quot;</span>\n            <span class=\"sa\">f</span><span class=\"s2\">&quot;lon </span><span class=\"si\">{</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">\u2013</span><span class=\"si\">{</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span>\n        <span class=\"p\">)</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">ValueError</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">isnan</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"p\">)):</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">ValueError</span><span class=\"p\">(</span><span class=\"s2\">&quot;All values are NaN for this time/region.&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"n\">vmin</span><span class=\"p\">,</span> <span class=\"n\">vmax</span> <span class=\"o\">=</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">(),</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">item</span><span class=\"p\">()</span>\n    <span class=\"n\">norm</span> <span class=\"o\">=</span> <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">Normalize</span><span class=\"p\">(</span><span class=\"n\">vmin</span><span class=\"o\">=</span><span class=\"n\">vmin</span><span class=\"p\">,</span> <span class=\"n\">vmax</span><span class=\"o\">=</span><span class=\"n\">vmax</span><span class=\"p\">)</span> <span class=\"k\">if</span> <span class=\"n\">vmax</span> <span class=\"o\">&gt;</span> <span class=\"n\">vmin</span> <span class=\"k\">else</span> <span class=\"kc\">None</span>\n\n    <span class=\"n\">lons2d</span><span class=\"p\">,</span> <span class=\"n\">lats2d</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">meshgrid</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"p\">)</span>\n\n    <span class=\"n\">fig</span> <span class=\"o\">=</span> <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">figure</span><span class=\"p\">(</span><span class=\"n\">figsize</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">12</span><span class=\"p\">,</span> <span class=\"mi\">6</span><span class=\"p\">))</span>\n    <span class=\"n\">ax</span> <span class=\"o\">=</span> <span class=\"n\">fig</span><span class=\"o\">.</span><span class=\"n\">add_subplot</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">projection</span><span class=\"o\">=</span><span class=\"n\">ccrs</span><span class=\"o\">.</span><span class=\"n\">PlateCarree</span><span class=\"p\">())</span>\n    <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">coastlines</span><span class=\"p\">(</span><span class=\"n\">resolution</span><span class=\"o\">=</span><span class=\"s1\">&#39;50m&#39;</span><span class=\"p\">,</span> <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"s1\">&#39;gray&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">add_feature</span><span class=\"p\">(</span><span class=\"n\">cfeature</span><span class=\"o\">.</span><span class=\"n\">BORDERS</span><span class=\"p\">,</span> <span class=\"n\">linestyle</span><span class=\"o\">=</span><span class=\"s1\">&#39;:&#39;</span><span class=\"p\">,</span> <span class=\"n\">linewidth</span><span class=\"o\">=</span><span class=\"mf\">0.5</span><span class=\"p\">)</span>\n\n    <span class=\"n\">pcm</span> <span class=\"o\">=</span> <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">pcolormesh</span><span class=\"p\">(</span>\n        <span class=\"n\">lons2d</span><span class=\"p\">,</span> <span class=\"n\">lats2d</span><span class=\"p\">,</span> <span class=\"n\">arr</span><span class=\"p\">,</span>\n        <span class=\"n\">transform</span><span class=\"o\">=</span><span class=\"n\">ccrs</span><span class=\"o\">.</span><span class=\"n\">PlateCarree</span><span class=\"p\">(),</span> <span class=\"n\">cmap</span><span class=\"o\">=</span><span class=\"n\">cmap</span><span class=\"p\">,</span>\n        <span class=\"n\">norm</span><span class=\"o\">=</span><span class=\"n\">norm</span><span class=\"p\">,</span> <span class=\"n\">shading</span><span class=\"o\">=</span><span class=\"s1\">&#39;auto&#39;</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"n\">cbar</span> <span class=\"o\">=</span> <span class=\"n\">fig</span><span class=\"o\">.</span><span class=\"n\">colorbar</span><span class=\"p\">(</span><span class=\"n\">pcm</span><span class=\"p\">,</span> <span class=\"n\">ax</span><span class=\"o\">=</span><span class=\"n\">ax</span><span class=\"p\">,</span> <span class=\"n\">orientation</span><span class=\"o\">=</span><span class=\"s1\">&#39;vertical&#39;</span><span class=\"p\">,</span> <span class=\"n\">pad</span><span class=\"o\">=</span><span class=\"mf\">0.02</span><span class=\"p\">)</span>\n    <span class=\"n\">cbar</span><span class=\"o\">.</span><span class=\"n\">set_label</span><span class=\"p\">(</span><span class=\"s1\">&#39;Total Precipitation (mm)&#39;</span><span class=\"p\">)</span>\n\n    <span class=\"n\">time_actual</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">datetime_as_string</span><span class=\"p\">(</span><span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">,</span> <span class=\"n\">unit</span><span class=\"o\">=</span><span class=\"s1\">&#39;h&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_title</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">&#39;Total Precipitation for </span><span class=\"si\">{</span><span class=\"n\">time_actual</span><span class=\"si\">}</span><span class=\"s1\">&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">lat_range</span> <span class=\"ow\">or</span> <span class=\"n\">lon_range</span><span class=\"p\">:</span>\n        <span class=\"n\">extent</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">(),</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">longitude</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">(),</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">min</span><span class=\"p\">(),</span> <span class=\"n\">arr</span><span class=\"o\">.</span><span class=\"n\">latitude</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()]</span>\n        <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_extent</span><span class=\"p\">(</span><span class=\"n\">extent</span><span class=\"p\">,</span> <span class=\"n\">crs</span><span class=\"o\">=</span><span class=\"n\">ccrs</span><span class=\"o\">.</span><span class=\"n\">PlateCarree</span><span class=\"p\">())</span>\n\n    <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">tight_layout</span><span class=\"p\">()</span>\n    <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">show</span><span class=\"p\">()</span>\n    <span class=\"k\">return</span> <span class=\"n\">fig</span>\n</code></pre></div>\n\n<p>And finally some plots:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">helpers.plotter</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"n\">plot_tp</span><span class=\"p\">(</span><span class=\"n\">ds2</span><span class=\"p\">,</span> <span class=\"s2\">&quot;2024-07-02T18:00:00&quot;</span><span class=\"p\">,</span> <span class=\"n\">lat_range</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mf\">5.0</span><span class=\"p\">,</span> <span class=\"mf\">40.0</span><span class=\"p\">),</span> <span class=\"n\">lon_range</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">60</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">),</span> <span class=\"n\">step</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"n\">plot_tp</span><span class=\"p\">(</span><span class=\"n\">ds2</span><span class=\"p\">,</span> <span class=\"s2\">&quot;2024-07-02T18:00:00&quot;</span><span class=\"p\">)</span>\n</code></pre></div>\n\n<p><br></p>\n<p><img src=\"/static/images/Weatherai/wai-2-tp-2024-07-02T18.png\" class=\"invertible\">\n<img src=\"/static/images/Weatherai/wai-2-tp-2024-07-02T18-global.png\" class=\"invertible\"></p>\n<p><br></p>\n<p>Yeah the global one isn't the best.</p>\n<p>Anyways we can do the same for <strong>t2m</strong> and <strong>tcc</strong>, just removing the step functionality.</p>\n<p>Here are some plots I got:</p>\n<p><br>\n<img src=\"/static/images/Weatherai/wai-2-t2m-1.png\" class=\"invertible\">\n<img src=\"/static/images/Weatherai/wai-2-t2m-2.png\" class=\"invertible\">\n<img src=\"/static/images/Weatherai/wai-2-tcc-1.png\" class=\"invertible\">\n<img src=\"/static/images/Weatherai/wai-2-tcc-2.png\" class=\"invertible\"></p>\n<h1 id=\"problem-2-too-big-grib-no-work\">Problem 2: Too Big GRIB No Work.</h1>\n<p>[I still haven't tackled this problem, but it's more of just chunking the dataset, and I'm gonna figure that out later while dataloading anyways]</p>\n<p>You might've noticed that we never indexed above <strong>2nd July 2024</strong>, even though we downloaded the entire month's data? Let's try that, say we <strong>take 15th July 2024</strong>, with something like:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">helpers.plotter</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"o\">*</span>\n\n<span class=\"n\">plot_tp</span><span class=\"p\">(</span><span class=\"n\">ds2</span><span class=\"p\">,</span> <span class=\"s2\">&quot;2024-07-15T18:00:00&quot;</span><span class=\"p\">,</span> <span class=\"n\">lat_range</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mf\">5.0</span><span class=\"p\">,</span> <span class=\"mf\">40.0</span><span class=\"p\">),</span> <span class=\"n\">lon_range</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">60</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">),</span> <span class=\"n\">step</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n</code></pre></div>\n\n<p><br></p>\n<p>we get this error:</p>\n<div class=\"error-block\">\n<details>\n<summary>OSError: [Errno 22] Invalid argument</summary>\n<pre>\n---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\nCell In[7], line 3\n      1 from helpers.plotter import *\n----> 3 plot_tp(ds2, \"2024-07-15T18:00:00\", lat_range=(5.0, 40.0), lon_range=(60, 100), step=0)\n\nFile c:\\dev\\weather\\helpers\\plotter.py:136, in plot_tp(data, time, lat_range, lon_range, cmap, step)\n    114 \"\"\"\n    115 Plot total precipitation (tp) at a specified time.\n    116 \n   (...)    133     The Matplotlib Figure object of the precipitation plot.\n    134 \"\"\"\n    135 da = data.tp.sel(time=time, method='nearest')\n--> 136 arr = da[0] if step else (da.fillna(0).sum(dim='step') * 1000).compute()\n    138 if lat_range:\n    139     arr = arr.sel(latitude=_slice_coord(data.latitude.values, *lat_range))\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\dataarray.py:3525, in DataArray.fillna(self, value)\n   3520 if utils.is_dict_like(value):\n   3521     raise TypeError(\n   3522         \"cannot provide fill value as a dictionary with \"\n   3523         \"fillna on a DataArray\"\n   3524     )\n-> 3525 out = ops.fillna(self, value)\n   3526 return out\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\ops.py:148, in fillna(data, other, join, dataset_join)\n    124 \"\"\"Fill missing values in this object with data from the other object.\n    125 Follows normal broadcasting and alignment rules.\n    126 \n   (...)    144     - \"right\": take only variables from the last object\n    145 \"\"\"\n    146 from xarray.core.computation import apply_ufunc\n--> 148 return apply_ufunc(\n    149     duck_array_ops.fillna,\n    150     data,\n    151     other,\n    152     join=join,\n    153     dask=\"allowed\",\n    154     dataset_join=dataset_join,\n    155     dataset_fill_value=np.nan,\n    156     keep_attrs=True,\n    157 )\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\computation.py:1265, in apply_ufunc(func, input_core_dims, output_core_dims, exclude_dims, vectorize, join, dataset_join, dataset_fill_value, keep_attrs, kwargs, dask, output_dtypes, output_sizes, meta, dask_gufunc_kwargs, on_missing_core_dim, *args)\n   1263 # feed DataArray apply_variable_ufunc through apply_dataarray_vfunc\n   1264 elif any(isinstance(a, DataArray) for a in args):\n-> 1265     return apply_dataarray_vfunc(\n   1266         variables_vfunc,\n   1267         *args,\n   1268         signature=signature,\n   1269         join=join,\n   1270         exclude_dims=exclude_dims,\n   1271         keep_attrs=keep_attrs,\n   1272     )\n   1273 # feed Variables directly through apply_variable_ufunc\n   1274 elif any(isinstance(a, Variable) for a in args):\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\computation.py:307, in apply_dataarray_vfunc(func, signature, join, exclude_dims, keep_attrs, *args)\n    302 result_coords, result_indexes = build_output_coords_and_indexes(\n    303     args, signature, exclude_dims, combine_attrs=keep_attrs\n    304 )\n    306 data_vars = [getattr(a, \"variable\", a) for a in args]\n--> 307 result_var = func(*data_vars)\n    309 out: tuple[DataArray, ...] | DataArray\n    310 if signature.num_outputs > 1:\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\computation.py:729, in apply_variable_ufunc(func, signature, exclude_dims, dask, output_dtypes, vectorize, keep_attrs, dask_gufunc_kwargs, *args)\n    722 broadcast_dims = tuple(\n    723     dim for dim in dim_sizes if dim not in signature.all_core_dims\n    724 )\n    725 output_dims = [broadcast_dims + out for out in signature.output_core_dims]\n    727 input_data = [\n    728     (\n--> 729         broadcast_compat_data(arg, broadcast_dims, core_dims)\n    730         if isinstance(arg, Variable)\n    731         else arg\n    732     )\n    733     for arg, core_dims in zip(args, signature.input_core_dims, strict=True)\n    734 ]\n    736 if any(is_chunked_array(array) for array in input_data):\n    737     if dask == \"forbidden\":\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\computation.py:650, in broadcast_compat_data(variable, broadcast_dims, core_dims)\n    645 def broadcast_compat_data(\n    646     variable: Variable,\n    647     broadcast_dims: tuple[Hashable, ...],\n    648     core_dims: tuple[Hashable, ...],\n    649 ) -> Any:\n--> 650     data = variable.data\n    652     old_dims = variable.dims\n    653     new_dims = broadcast_dims + core_dims\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\variable.py:474, in Variable.data(self)\n    472     return self._data\n    473 elif isinstance(self._data, indexing.ExplicitlyIndexed):\n--> 474     return self._data.get_duck_array()\n    475 else:\n    476     return self.values\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\indexing.py:840, in MemoryCachedArray.get_duck_array(self)\n    839 def get_duck_array(self):\n--> 840     self._ensure_cached()\n    841     return self.array.get_duck_array()\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\indexing.py:837, in MemoryCachedArray._ensure_cached(self)\n    836 def _ensure_cached(self):\n--> 837     self.array = as_indexable(self.array.get_duck_array())\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\indexing.py:794, in CopyOnWriteArray.get_duck_array(self)\n    793 def get_duck_array(self):\n--> 794     return self.array.get_duck_array()\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\indexing.py:657, in LazilyIndexedArray.get_duck_array(self)\n    653     array = apply_indexer(self.array, self.key)\n    654 else:\n    655     # If the array is not an ExplicitlyIndexedNDArrayMixin,\n    656     # it may wrap a BackendArray so use its __getitem__\n--> 657     array = self.array[self.key]\n    659 # self.array[self.key] is now a numpy array when\n    660 # self.array is a BackendArray subclass\n    661 # and self.key is BasicIndexer((slice(None, None, None),))\n    662 # so we need the explicit check for ExplicitlyIndexed\n    663 if isinstance(array, ExplicitlyIndexed):\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\cfgrib\\xarray_plugin.py:163, in CfGribArrayWrapper.__getitem__(self, key)\n    159 def __getitem__(\n    160     self,\n    161     key: xr.core.indexing.ExplicitIndexer,\n    162 ) -> np.ndarray:\n--> 163     return xr.core.indexing.explicit_indexing_adapter(\n    164         key, self.shape, xr.core.indexing.IndexingSupport.BASIC, self._getitem\n    165     )\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\xarray\\core\\indexing.py:1018, in explicit_indexing_adapter(key, shape, indexing_support, raw_indexing_method)\n    996 \"\"\"Support explicit indexing by delegating to a raw indexing method.\n    997 \n    998 Outer and/or vectorized indexers are supported by indexing a second time\n   (...)   1015 Indexing result, in the form of a duck numpy-array.\n   1016 \"\"\"\n   1017 raw_key, numpy_indices = decompose_indexer(key, shape, indexing_support)\n-> 1018 result = raw_indexing_method(raw_key.tuple)\n   1019 if numpy_indices.tuple:\n   1020     # index the loaded np.ndarray\n   1021     indexable = NumpyIndexingAdapter(result)\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\cfgrib\\xarray_plugin.py:172, in CfGribArrayWrapper._getitem(self, key)\n    167 def _getitem(\n    168     self,\n    169     key: T.Tuple[T.Any, ...],\n    170 ) -> np.ndarray:\n    171     with self.datastore.lock:\n--> 172         return self.array[key]\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\cfgrib\\dataset.py:373, in OnDiskArray.__getitem__(self, item)\n    371     continue\n    372 # NOTE: fill a single field as found in the message\n--> 373 message = self.index.get_field(message_ids[0])  # type: ignore\n    374 values = get_values_in_order(message, array_field[tuple(array_field_indexes)].shape)\n    375 array_field.__getitem__(tuple(array_field_indexes)).flat[:] = values\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\cfgrib\\messages.py:488, in FieldsetIndex.get_field(self, message_id)\n    487 def get_field(self, message_id: T.Any) -> abc.Field:\n--> 488     return ComputedKeysAdapter(self.fieldset[message_id], self.computed_keys)\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\cfgrib\\messages.py:345, in FileStream.__getitem__(self, item)\n    343 def __getitem__(self, item: T.Optional[OffsetType]) -> Message:\n    344     with open(self.path, \"rb\") as file:\n--> 345         return self.message_from_file(file, offset=item)\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\cfgrib\\messages.py:341, in FileStream.message_from_file(self, file, offset, **kwargs)\n    339 def message_from_file(self, file, offset=None, **kwargs):\n    340     # type: (T.IO[bytes], T.Optional[OffsetType], T.Any) -> Message\n--> 341     return Message.from_file(file, offset, **kwargs)\n\nFile c:\\Users\\*****\\anaconda3\\envs\\era5_env\\Lib\\site-packages\\cfgrib\\messages.py:94, in Message.from_file(cls, file, offset, **kwargs)\n     92     offset, field_in_message = offset\n     93 if offset is not None:\n---> 94     file.seek(offset)\n     95 codes_id = None\n     96 if field_in_message == 0:\n\n**OSError: [Errno 22] Invalid argument**\n</pre>\n</details>\n</div>\n\n<p>What? Why? I rechecked, even redownloaded the dataset... so we definitely DO have the data. Then what went wrong? </p>\n<p>It has something to do with <strong>how cfgrib works</strong> (on windows especially)<br />\nYou see, cfgrib uses <code>eccodes</code>, a <strong>C library</strong> under the hood. What's the problem with that? Quite a big one actually. </p>\n<p>So first of all, we should notice that whenever cfgrib loads our dataset it creates an <strong>index file</strong>, like <code>era5_july2024_global_hourly.grib.5b7b6.idx</code>. Now a plausible explanation might be that they are still using the <code>long</code> datatype instead of fixed ones. This would actually cause a lot quirky platform problems. On Windows this might mean <strong>32-bit</strong> offsets, which roughly translates to <strong>&lt;2GB</strong> of data. So whenever we seek past 2GB, it overflows, possibly goes negative, hence the error. This is highly speculative though, and my rudimentary C++ skills should not be relied on.</p>\n<p>I mentioned <code>.compute()</code> before, this is why it was needed. I was trying to test whether we can actually carry out computations on data beyond 5th july, it would also force xarray to not lazy load it. But either way it didn't work.</p>\n<p><br></p>\n<blockquote>\n<p>Random Rant:\n<em>Ok so I accidentally deleted the 19GB dataset I downloaded for the 4th time now- This has cost me more time than all the actual coding combined! I was trying to write a demo notebook to show how to download it using the API, but guess what I executed the cell, out of muscle memory, and when I stopped it, I realized it was too late because it had already deleted the file with the same name... True Horror story based on real events. I really need to add some fail-safes, yep let's add that to the agenda next time (Future me: It happened again, this time I fat fingered in the command prompt itself)</em></p>\n</blockquote>\n<p><br></p>\n<p>Ok back to the topic. So I don't want to bother fixing this right now as we won't be loading data this way anyways, we will be chunking it in the future and trying to feed it to <code>pytorch DataLoader</code> and what not.</p>\n<h1 id=\"conclusion-plans\">Conclusion &amp; Plans</h1>\n<p>In this post we explored the actual structure of the data, and also touched up on some plotting, solving a few errors along the way.  </p>\n<p>I have realized that it is imperative that we must first draft up a <strong>Project-Spec</strong>, so I will be doing that next time. Next-to-Next time, I want to try to set up <strong>WandB</strong> (Never used it before, but I'm willing to join the cult), and possibly get to <strong>DataLoading</strong>. Of course, we must also cover the augmentation of data with stuff like solar angle, and topology/geopotential, for <strong>physics-informed loss</strong> purposes.</p>\n<p><strong>You can read the next part <a href=\"#\">here (Not Released Yet)</a></strong></p>","metadata":{"date":"Thu, 24 Apr 2025 00:00:00 GMT","slug":"weather-ai-part-2","tags":["python","blog","weather"],"title":"Forecasting Weather (Part 2): Fighting the Data"},"slug":"weather-ai-part-2","toc":"<div class=\"toc\">\n<ul>\n<li><a href=\"#overview\">Overview</a></li>\n<li><a href=\"#the-right-data\">The Right Data</a></li>\n<li><a href=\"#problem-1-heterogenous-data\">Problem 1: Heterogenous Data</a></li>\n<li><a href=\"#writing-the-plotting-helper-functions\">Writing the plotting helper functions</a><ul>\n<li><a href=\"#writing-plot_tp\">Writing plot_tp</a></li>\n</ul>\n</li>\n<li><a href=\"#problem-2-too-big-grib-no-work\">Problem 2: Too Big GRIB No Work.</a></li>\n<li><a href=\"#conclusion-plans\">Conclusion &amp; Plans</a></li>\n</ul>\n</div>\n"},{"content_html":"<h1 id=\"what-is-this\">What is this?</h1>\n<p>It's a <strong>personal post. Please Ignore.</strong>  <br />\nI've decided to start this series as a way to identify <strong>time sinks</strong>, and where I'm going wrong with my planning, with major projects put on hold due to a supposed \"lack of time\".  <br />\nWhy make it public then? You see, I'm quite the lazy person. If I did just limit this to a personal diary, I would immediately stop after a few days. So I'm making this <strong>End of Week Report (EoWR)</strong> series public for everyone to see. Maybe the shame and guilt might motivate me to actually continue making progress no matter how small. </p>\n<p>The <strong>End of Day Reports (EoDRs)</strong> for the week, are posted here along with a Week Review.</p>\n<p><br></p>\n<hr>\n<p><br></p>\n<h1 id=\"week-1-june\">Week 1, June</h1>\n<h2 id=\"week-review\">Week Review</h2>\n<p>Not much was achieved this week, projects were on break, and only the IITM project was done, which I failed to submit on time. Must improve from next week onwards.\n<br></p>\n<hr>\n<p><br></p>\n<h2 id=\"eodr-01-06-2025\">EoDR 01-06-2025</h2>\n<h3 id=\"jee\">JEE</h3>\n<p>Gave MT 5 adv.<br />\nIdentified weak areas: Electrostatics, Equilibrium, ElectroChem. \nSignificant Time management errors.</p>\n<h3 id=\"projects\">PROJECTS</h3>\n<p>Break.</p>\n<h3 id=\"ec\">EC</h3>\n<p>Unable to begin working on IITM project.</p>\n<p><br></p>\n<hr>\n<p><br></p>\n<h2 id=\"eodr-02-06-2025\">EoDR 02-06-2025</h2>\n<h3 id=\"jee_1\">JEE</h3>\n<p>Revision: Integration\nBooklet Solving: Integration (10Q)</p>\n<h3 id=\"projects_1\">PROJECTS</h3>\n<p>Break.\nExplored ideas of DIY Radio Telescope, and Galvanic cell, to measure $ E^0 $ values.</p>\n<h3 id=\"ec_1\">EC</h3>\n<p>Exploring ways to go about IITM project\n<br></p>\n<hr>\n<p><br></p>\n<h2 id=\"eodr-03-06-2025\">EoDR 03-06-2025</h2>\n<h3 id=\"jee_2\">JEE</h3>\n<p>Class: Complex Numbers started, HydroCarbons started, POM finished Viscosity \nBooklet Solving: Integration</p>\n<h3 id=\"projects_2\">PROJECTS</h3>\n<p>Break.</p>\n<h3 id=\"ec_2\">EC</h3>\n<p>Made preparations and got tools ready to start IITM project tomorrow.</p>\n<p><br></p>\n<hr>\n<p><br></p>\n<h2 id=\"eodr-04-06-2025\">EoDR 04-06-2025</h2>\n<h3 id=\"jee_3\">JEE</h3>\n<p>Booklet Solving: Integration (few)\nNote much done in light of IITM Project.</p>\n<h3 id=\"projects_3\">PROJECTS</h3>\n<p>Break.</p>\n<h3 id=\"ec_3\">EC</h3>\n<p>Made a 21-Page Presentation using Canva, for IITM Project. (<a href=\"https://drive.google.com/file/d/1HxisRUoK3HzYRxLGaGnpgd659MZVKc4a/view?usp=sharing\">link</a>) <br />\nMade Jupyter Notebook and Uploaded to github for implementation details.\nMade Blog Post with relevant links and scheduled to have content in the future for the in-depth implementations of kNN and kmeans, as well as linear algebra and optimization.<br />\nMight have failed to meet deadline due to website glitch. Email drafted.\n<br></p>\n<hr>\n<p><br></p>\n<h2 id=\"eodr-05-06-2025\">EoDR 05-06-2025</h2>\n<h3 id=\"jee_4\">JEE</h3>\n<p>Class: POM finished Surface Tension, Solid State started.\nBooklet Solving: Integration 2B</p>\n<h3 id=\"projects_4\">PROJECTS</h3>\n<p>Break.</p>\n<h3 id=\"ec_4\">EC</h3>\n<p>Sent Email to the support team requesting the acceptance of late submission. (Refused)<br />\nProject might not be considered for grading (that's sad).\n<br></p>\n<hr>\n<p><br></p>","metadata":{"date":"Sat, 07 Jun 2025 00:00:00 GMT","slug":"eowr-07-06-2025","tags":["maths","blog","quant"],"title":"[EoWR] Week 1, June"},"slug":"eowr-07-06-2025","toc":"<div class=\"toc\">\n<ul>\n<li><a href=\"#what-is-this\">What is this?</a></li>\n<li><a href=\"#week-1-june\">Week 1, June</a><ul>\n<li><a href=\"#week-review\">Week Review</a></li>\n<li><a href=\"#eodr-01-06-2025\">EoDR 01-06-2025</a><ul>\n<li><a href=\"#jee\">JEE</a></li>\n<li><a href=\"#projects\">PROJECTS</a></li>\n<li><a href=\"#ec\">EC</a></li>\n</ul>\n</li>\n<li><a href=\"#eodr-02-06-2025\">EoDR 02-06-2025</a><ul>\n<li><a href=\"#jee_1\">JEE</a></li>\n<li><a href=\"#projects_1\">PROJECTS</a></li>\n<li><a href=\"#ec_1\">EC</a></li>\n</ul>\n</li>\n<li><a href=\"#eodr-03-06-2025\">EoDR 03-06-2025</a><ul>\n<li><a href=\"#jee_2\">JEE</a></li>\n<li><a href=\"#projects_2\">PROJECTS</a></li>\n<li><a href=\"#ec_2\">EC</a></li>\n</ul>\n</li>\n<li><a href=\"#eodr-04-06-2025\">EoDR 04-06-2025</a><ul>\n<li><a href=\"#jee_3\">JEE</a></li>\n<li><a href=\"#projects_3\">PROJECTS</a></li>\n<li><a href=\"#ec_3\">EC</a></li>\n</ul>\n</li>\n<li><a href=\"#eodr-05-06-2025\">EoDR 05-06-2025</a><ul>\n<li><a href=\"#jee_4\">JEE</a></li>\n<li><a href=\"#projects_4\">PROJECTS</a></li>\n<li><a href=\"#ec_4\">EC</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n"},{"content_html":"<h1 id=\"work-in-progress\">WORK IN PROGRESS</h1>\n<h1 id=\"some-links\">SOME LINKS:</h1>\n<ol>\n<li><a href=\"https://github.com/kyuQee/predicting_student_dropout/blob/main/student_dropout_analysis.ipynb\">Jupyter Notebook</a></li>\n<li><a href=\"https://drive.google.com/file/d/1HxisRUoK3HzYRxLGaGnpgd659MZVKc4a/view?usp=sharing\">Project Report PDF</a></li>\n</ol>","metadata":{"date":"Wed, 04 Jun 2025 00:00:00 GMT","slug":"predicting-student-dropout","tags":["maths","blog","AI"],"title":"Predicting Student Dropout Rates"},"slug":"predicting-student-dropout","toc":"<div class=\"toc\">\n<ul>\n<li><a href=\"#work-in-progress\">WORK IN PROGRESS</a></li>\n<li><a href=\"#some-links\">SOME LINKS:</a></li>\n</ul>\n</div>\n"},{"content_html":"<h1 id=\"hello-world\"><strong>HELLO WORLD</strong>.</h1>\n<h1 id=\"who-am-i\">Who am I?</h1>\n<p>I'm a 16-year-old aspiring to break into CS/AI and quantitative finance, but what really matters is that- \nI'm simply someone who has grown to love graphs and data, and the idea of information and analysis.</p>\n<h1 id=\"where-im-coming-from\">Where I'm coming from:</h1>\n<p>I've been coding (ashamed to call it programming) since I was 11, though I often struggled to see projects through to completion. It wasn't for a lack of ideas- it was a lack of <strong>discipline</strong>. \nTo illustrate the challenges I faced, here are some of my past projects:</p>\n<h2 id=\"project-nosea\">Project: NoSea</h2>\n<p>This was an overly ambitious one for sure-</p>\n<h3 id=\"the-idea\">The Idea:</h3>\n<p>I wanted to make an <strong>operating system (OS) all by myself</strong>... Sounds pretty stupid, right? \nWell it wasn't just another \"Ubuntu reskin\", I wanted to write the kernel and all, by myself. From scratch. <br />\nMy thoughts back then went something like:</p>\n<blockquote>\n<p>If we could have a lightweight, open-source, multi-platform OS (For mobile and PCs), that was the exact same on both platforms (unlike Linux, and android which is based on linux but basically completely different), it would be <strong>\"THE NEXT BIG THING\"</strong></p>\n</blockquote>\n<h3 id=\"resources\">Resources:</h3>\n<p>Although my project itself wasn't useful at all the resources I used, were.<br />\nSo here are some of them for reference (I can't find all of them as I deleted the repo, and the files. I wasn't logging any of my activities so I can only rely on my memory for this-).    </p>\n<ol>\n<li><a href=\"https://www.youtube.com/playlist?list=PLHh55M_Kq4OApWScZyPl5HhgsTJS9MZ6M\">Write Your Own Operating System (Youtube)</a>: Teaches most of the fundamental and gives an idea about the true complexity of it all. But it's pretty old now, still mostly how systems work- but pretty old.</li>\n<li><a href=\"https://www.youtube.com/playlist?list=PLZQftyCk7_SeZRitx5MjBKzTtvk0pHMtp\">Write Your Own 64-bit Operating System (Youtube - CodePulse)</a>: This is where I made my first mistake. It is a really good example, but I followed it blindly at first, doing exactly what he was without understand the <em>WHY?</em> and the underlying theory. </li>\n<li><a href=\"https://www.youtube.com/playlist?list=PLm3B56ql_akNcvH8vvJRYOc7TbYhRs19M\">Making an OS(x86)</a>: Again a really good resource... but I found it later- after I had nearly given up.   </li>\n<li><a href=\"https://wiki.osdev.org/Expanded_Main_Page\">OSDEV wiki</a>: Literally the Bible for OS dev. Back then, I didnt really understand all the computer stuff and didn't put in enough effort to learn... so I was really confused. Looking back now I can see why it's so highly regarded. </li>\n</ol>\n<h3 id=\"the-plan\">The Plan:</h3>\n<p>I didn't have a solid plan at first and ended up failing about 5 or 6 times. (An OS as my first big project was a REALLY BAD idea.) But after all those mess-ups and way too much pondering when I should've been studying, I came up with something. (I'm writing this now, so it's all from memory-I might've made it a bit better by accident, but I've tried to keep the original idea, flaws included.)</p>\n<p><img src=\"/static/images/NoSea-architecture-hello-world.png\" class=\"invertible\">  </p>\n<p>[\n    If you're seeing this- it means I couldn't meet the deadline (01/04/2025), and am too busy/lazy to finish the whole thing. I may update it in the future, but right now my current projects take priority. I hope whatever is written atleast gave you a rough idea about me.\n]</p>","metadata":{"date":"Tue, 01 Apr 2025 00:00:00 GMT","slug":"hello-world","tags":["python","blog"],"title":"Hello World"},"slug":"hello-world","toc":"<div class=\"toc\">\n<ul>\n<li><a href=\"#hello-world\">HELLO WORLD.</a></li>\n<li><a href=\"#who-am-i\">Who am I?</a></li>\n<li><a href=\"#where-im-coming-from\">Where I'm coming from:</a><ul>\n<li><a href=\"#project-nosea\">Project: NoSea</a><ul>\n<li><a href=\"#the-idea\">The Idea:</a></li>\n<li><a href=\"#resources\">Resources:</a></li>\n<li><a href=\"#the-plan\">The Plan:</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n"},{"content_html":"<h1 id=\"work-in-progress\">WORK IN PROGRESS</h1>\n<h1 id=\"introduction\">Introduction</h1>\n<p>High school curricula typically introduce basic probability concepts; however, probability theory applied in financial mathematics and statistics requires significantly advanced techniques. To enhance my understanding and proficiency, I will undertake an in-depth exploration of probability theory, encompassing distributions such as Binomial, Gaussian, and Poisson, as well as concepts including random variables, sigma algebras, and probability spaces.</p>\n<p>This is by no means a proper text, or learning resource. This is simply what <strong>I would've wanted to read</strong>, when I was getting started with these topics. Here are the resources I used to learn these topics (still learning, but more or less understood the basics).</p>\n<h2 id=\"resources\">Resources</h2>\n<ol>\n<li><strong>MIT OCW 18.S096</strong>: <a href=\"https://www.youtube.com/playlist?list=PLUl4u3cNGP63ctJIEC1UnZ0btsphnnoHR\">youtube link</a>, <a href=\"https://ocw.mit.edu/courses/18-s096-topics-in-mathematics-with-applications-in-finance-fall-2013/\">website link</a>. It's pretty good, but required a lot of previous undergrad knowledge so the learning curve was quite steep. It did however introduce me to the right topics to learn, and I learnt them all individually from different resources.</li>\n<li><strong>Probability and Stochastics for finance, NPTEL</strong>: <a href=\"https://www.youtube.com/@probabilityandstochasticsf5278\">youtube link</a>, Extremely good, especially since it starts right from the highschool level. This is also where I got the inspiration for the Bertrand Paradox, presented ahead.</li>\n<li><strong>Quantitative Finance 101, FEBS IIT Bhubaneshwar</strong>: <a href=\"https://www.youtube.com/playlist?list=PLX5wiDP8rz62dRofitFcP10iqLTjLKfmq\">youtube link</a>. This made me understand sigma algebras, atleast at a level where I can apply them reasonably. It doesn't really assume zero knowledge, but is pretty in depth.    </li>\n<li><strong>Shreve Stochastic Calculus for Finance II: Continuous-Time Models</strong>: <a href=\"https://g.co/kgs/n3SQKnz\">link</a>. This book was recommended multiple times, no matter where I looked on the internet. It is in-fact the go-to book for this topic. </li>\n</ol>\n<p>Apart from these I've used several other miscellaneous sources, which I won't state here for the sake of brevity.</p>\n<h2 id=\"prerequisites-for-reading\">Prerequisites for Reading</h2>\n<p><strong>High School Math:</strong> A solid foundation in algebra, coordinate geometry, trigonometry, and basic probability (e.g., AP Calculus/Statistics, JEE Advanced, IB Math HL, or A-Level Mathematics). </p>\n<p><strong>Set Notation:</strong> Comfort with basic set notation (e.g., describing points in a plane or intervals).    </p>\n<p><strong>Geometric Intuition:</strong> Ability to visualize geometric shapes like circles and chords. </p>\n<p><strong>Curiosity:</strong> An interest in exploring advanced probability concepts, such as sigma algebras and probability spaces, introduced in an accessible way.  </p>\n<p>No prior knowledge of measure theory or advanced probability is needed&mdash;we'll build from intuitive ideas to formal concepts together!</p>\n<h2 id=\"the-paradox\">The Paradox</h2>\n<p>Let's start with a question that seems pretty simple, but is deceptively paradoxical with the math taught in high school.   </p>\n<p>According to <a href=\"https://en.wikipedia.org/wiki/Bertrand_paradox_(probability)\">Wikipedia</a> it may be formulated as follows: </p>\n<blockquote>\n<p>\"Consider an equilateral triangle that is inscribed in a circle. Suppose a chord of the circle is chosen at random. What is the probability that the chord is longer than a side of the triangle?\"</p>\n</blockquote>\n<p>This formulation makes it seem like quite an abstract question,   </p>\n<p>So we may present it alternatively as: </p>\n<blockquote>\n<p>Consider two concentric circles with <code>A</code> and <code>B</code> with radius <code>R</code> and <code>2R</code>. Given a chord of the circle <code>B</code> is picked at random, find the probability that this chord intersects, the inner circle <code>A</code>.</p>\n</blockquote>\n<p><br></p>\n<p><img src=\"/static/images/mathforquant/math-for-quant-part-1-1.svg\" style=\"height: 300px !important\" class=\"invertible\"></p>\n<p><br></p>\n<p>This reformulation may model practical scenarios, such as piercing a padded sphere to assess whether it impacts an inner core, though this is merely a contextual preference and does not alter the mathematical problem.</p>\n<p>Now typically there are <strong>Three methods</strong> of tackling this problem. </p>\n<h3 id=\"method-1-random-midpoint-method\">Method 1: Random Midpoint Method</h3>\n<p>This is the method that occurred to me, when I tried to solve this problem. </p>\n<p>If one plays around with the problem long enough, drawing multiple sketches, we might notice this&mdash;</p>\n<p><br>\n<img src=\"/static/images/mathforquant/math-for-quant-part-1-2.svg\" style=\"height: 300px !important\"  class=\"invertible\">\n<br></p>\n<p>The <strong>midpoints</strong> of all chords that intersect the inner circle, <strong>must lie inside the inner circle</strong>.  </p>\n<p>Since any chord $ AB $ of the outer circle that intersects the inner circle must have its perpendicular distance $ d \\leq R $, its midpoint $ M $ (at distance $ d $ from $ O $) must lie within or on the inner circle.</p>\n<p>Now one can definitely prove this rigorously (and it is a trivial geometric proof), but for our case, let's just say it is true, visually.</p>\n<p>Now if we take only the mid points into consideration, and define a coordinate system with the origin at the centre of $ A , B $, we get a sample space that looks like this&mdash;</p>\n<p><br>\n<img src=\"/static/images/mathforquant/math-for-quant-part-1-3.svg\" style=\"height: 300px !important\"  class=\"invertible\">\n<br></p>\n<p>And if we draw our required event on it, we get&mdash;</p>\n<p><br>\n<img src=\"/static/images/mathforquant/math-for-quant-part-1-4.svg\" style=\"height: 300px !important\"  class=\"invertible\">\n<br></p>\n<p>So for some formal definitions&mdash; <br />\n$$\n\\begin{aligned}\n\\Omega &amp;= \\{(x,y) \\in \\mathbb{R}^2 \\mid x^2 + y^2 \\leq (2R)^2\\} \\newline\n\\mathbb{E} &amp;= \\{(x,y) \\in \\mathbb{R}^2 \\mid x^2 + y^2 \\leq R^2\\}\n\\end{aligned}\n$$</p>\n<p>Now, to calculate $ P(\\mathbb{E}) $ we can simply do&mdash; </p>\n<p>$$ \nP(\\mathbb{E}) = \\frac{\\pi(R)^2}{\\pi(2R)^2} = \\frac{1}{4}\n$$</p>\n<p>So our $ P(\\mathbb{E}) $ is &mdash;</p>\n<p>$$\nP(\\mathbb{E}) = \\boxed{\\frac{1}{4}}\n$$</p>\n<h3 id=\"method-2-diameter-method\">Method 2: Diameter Method</h3>\n<p>We may also try a more methodical way&mdash;</p>\n<p>We first pick a point on the circumference of $ B $, say $ P $,  then we draw a <strong>diameter</strong> passing through the center. Now we may vary this line, by an angle $ \\theta $ and get all possible chords that pass through the point $ P $. Similarly we may do this for every point on the circumference of $ B $. </p>\n<p>here is what it looks like&mdash;</p>\n<p><br>\n<img src=\"/static/images/mathforquant/math-for-quant-part-1-5.svg\" style=\"height: 300px !important\"  class=\"invertible\">\n<br></p>\n<p>here is the visualization of $ \\Omega $ and $ \\mathbb{E} $ (NOTE: here X is the distance along the circumference of B)</p>\n<p><br>\n<img src=\"/static/images/mathforquant/math-for-quant-part-1-6.svg\" style=\"height: 300px !important\"  class=\"invertible\">\n<br></p>\n<p>Why $ \\frac{\\pi}{6} $?<br />\nWe can clearly see that a right angled triangle is formed when the chord just touches the inner circle (it is tangent). The hypotenuse is $ 2R $ and the base is $ R $. So we may do $ \\cos(\\theta) = \\frac{R}{2R} $ and then inverse it to get $ \\theta = \\frac{\\pi}{6}$.  </p>\n<p>Formally&mdash;\n$$\n\\begin{aligned}\n\\Omega &amp;= \\{(X, \\theta) \\in \\mathbb{R}^2 \\mid X \\in (-2\\pi R, 2\\pi R), \\theta \\in (0, \\pi/2)\\} \\newline\n\\mathbb{E} &amp;= \\{(X, \\theta) \\in \\mathbb{R}^2 \\mid X \\in (-2\\pi R, 2\\pi R), \\theta \\in (0, \\pi/6)\\}\n\\end{aligned}\n$$</p>\n<p>Or&mdash;\n$$\n\\begin{aligned}\n\\Omega &amp;= (-2\\pi R, 2\\pi R) \\times (0, \\pi/2) \\newline\n\\mathbb{E} &amp;= (-2\\pi R, 2\\pi R) \\times (0, \\pi/6)\n\\end{aligned}\n$$</p>\n<p>We can now calculate the probability, like&mdash;\n$$\n\\begin{aligned}\nP(\\mathbb{E}) &amp;= \\frac{4\\pi R \\cdot (\\pi/6)}{4\\pi R \\cdot (\\pi/2)} = \\frac{1}{3} \\newline\nP(\\mathbb{E}) &amp;= \\boxed{\\frac{1}{3}}\n\\end{aligned}\n$$</p>\n<h3 id=\"method-3-radius-method\">Method 3: Radius Method</h3>\n<p>Take a chord passing through the center at an elevation $ \\theta $ from the horizontal. Now we may consider all parallel chords to the diameter, at that elevation, their perpedicular distance from the center being $ x $. We get&mdash;</p>\n<p><br>\n<img src=\"/static/images/mathforquant/math-for-quant-part-1-7.svg\" style=\"height: 300px !important\"  class=\"invertible\">\n<br></p>\n<p>and the visualization&mdash;\n<br>\n<img src=\"/static/images/mathforquant/math-for-quant-part-1-8.svg\" style=\"height: 300px !important\"  class=\"invertible\">\n<br></p>\n<p>The rest of it is elementary, and $ P(\\mathbb{E}) $ comes out to&mdash;\n$$\nP(\\mathbb{E}) = \\boxed{\\frac{1}{2}}\n$$</p>\n<h3 id=\"the-contradiction\">The Contradiction</h3>\n<p>So, we have <strong>Three answers</strong>. This is clearly a contradiction. It means somewhere along the way, our approach with <strong>highschool math</strong> was <strong>flawed</strong>. This problem is called the <strong>Bertrand Paradox</strong>. To correct this we would need an even deeper understanding of probability theory, beyond the typical highschool math.  <br />\nIn reality it is the question that may be misunderstood, the right interpretation is crucial to finding the solution to this paradox. We must realise that <strong>the choice of our random chord can impact the probability measure</strong>. There are <strong>different kinds of random</strong>.  </p>\n<p>Unfortunately, we need the proper \"advanced probability theory\" to properly discuss the resolution, which is what we'll be exploring in this article. I might write a follow-up post for the resolution as this post is already going to get pretty long. If you really want to know the in-depth reason you can check out the <a href=\"https://en.wikipedia.org/wiki/Bertrand_paradox_(probability)\">Wikipedia Page</a> <br />\n(HINT: the answer, for uniform distributions, is $ \\frac{1}{2} $)</p>\n<h1 id=\"terms-and-definitions\">Terms and Definitions</h1>\n<p>Understanding the terms and notation is the most crucial part to understanding probability. </p>\n<p>Let's try to intuitively find out what are the terms required to make a reasonable comment on the probability of an event.  </p>\n<h2 id=\"what-is-probability\">What is Probability?</h2>\n<p>One could call it the <strong>likelihood or chance</strong>, of a certain event happening. (not to be confused with plausibility)    </p>\n<p>What information would we need to comment on such a matter? Usually we would need to know what it is, whose outcome we are trying to determine&mdash; Is it a coin flip? a horse race? a cricket match?&mdash; This is is called the <strong>Random Experiment (RE)</strong>.    </p>\n<p>Say we want to determine the probability that a grain of sand ends up exactly on top of a treasure chest, on a beach, after being washed away. Obviously we cannot make any reasonably accurate prediction of such an event. Why is that so? It is because we <strong>do not know</strong> the set of <strong>all possible outcomes</strong> of our random experiment (RE). So to make an accurate comment on the probability of an event, we must also know the set of all possible outcomes of our RE. This set is called the <strong>Sample Space</strong> ($ \\Omega $)</p>\n<h2 id=\"sample-space\">Sample Space</h2>\n<p>Now the sample space space could be something like&mdash;</p>\n<p>$$\n\\Omega = \\{Heads, Tails\\}\n$$</p>\n<p>for a coin flip to something like&mdash;</p>\n<p>$$\n\\Omega = \\{1,2,3,4,5,6 \\}\n$$</p>\n<p>for a dice roll.    </p>\n<p>It may also be something complex like&mdash;</p>\n<p>$$\n\\Omega = \\{(x,y) \\in \\mathbb{R}^2 \\mid 0 \\leq x \\leq 1, 0 \\leq y \\leq 1\\}\n$$</p>\n<p>i.e any random point on a unit square. Even more complex &mdash;</p>\n<p>$$\n\\Omega = \\{(x,y) \\in \\mathbb{R}^2 \\mid 0.25 \\leq x^2 + y^2 \\leq 1\\}\n$$</p>\n<p>i.e any random point on a unit disc, that is atleast 0.5 units away from the center. It could also be visualized as a ring. </p>\n<p>Finally, can you guess what this represents &mdash;</p>\n<p>$$\n\\Omega = \\{(x,y,z) \\in \\mathbb{R}^3 \\mid x^2 + y^2 + z^2 = 1, z \\geq 0, \\sqrt{x^2 + y^2 + (z-1)^2} \\leq 1\\}\n$$</p>\n<p>Kind of scary isn't it?\n( HINT: it's a sphere, with a special condition.)   </p>\n<p>This should give an idea as to <em>why</em> we need a formal notation for something so intuitive. As we will see later, the theory builds on this and becomes powerful enough to over-take the intuitive approach.</p>\n<h2 id=\"sigma-algebra\">Sigma Algebra</h2>\n<p>Typically this is part of <strong>measure theory</strong>, so we'll only cover what we absolutely need to know.</p>\n<p>Again <a href=\"https://en.wikipedia.org/wiki/%CE%A3-algebra\">Wikipedia</a> says:</p>\n<blockquote>\n<p>In formal terms, a $\\sigma$-algebra on a set $ X $ is a nonempty collection $ \\Sigma $ of subsets of $ X $ closed under complement, countable unions, and countable intersections. The ordered pair ( $ X $, $ \\Sigma $) is called a measurable space.</p>\n</blockquote>\n<p>Too Complicated, Didn't Understand (TC;DU)</p>\n<p>Let's start with the simple problem of trying to have complete knowledge of all events that can possibly occur. How do we find this? simple its just all possible subsets of our sample space $ \\Omega $&mdash; But can we assign probabilities to <strong>all</strong> of these events? </p>\n<p>In some cases, no, we can't.</p>\n<p>To put it simply think of something like this&mdash;</p>\n<p>we have $ \\Omega = [0,1] $, now if we say that we want an event ($ E $) where the <strong>length of the interval is 0.5</strong>.  <br />\nHow many such subsets do you think there are? infinite. It could be $ [0.2, 0.7] $, $ [0.3, 0.8] $, and so on.  </p>\n<p>Now whats $ P(E)_{[0.2 , 0.7]} $? \nCommon sense would say its <strong>0.5</strong> (which is correct) since it covers exactly half of the sample space. But this is where intuition breaks down, for example let's try the <strong>vitali set</strong>&mdash;</p>\n<p>(NOTE: In hindsight, the exploration coming up wasn't necessary, you may skip it if you like.)</p>\n<p><br></p>\n<hr>\n<p><br></p>\n<h3 id=\"vitali-set-deep-dive\">Vitali Set (Deep Dive)</h3>\n<p>Suppose we organize the numbers $(x,y)$ from $[0,1]$ into groups based on a set condition, i.e, $ x - y \\in \\mathbb{Q} $, the difference must be rational. So we could have $0.7 - 0.2 = 0.5$, in the same group, and $0.8 - 0.3 = 0.5$ in the same group.<br />\nThis splits $[0,1]$ into a <strong>uncountably many groups</strong>, for instance, one group might include $0.2, 0.7, 0.2 + 1/3, 0.7 + 1/3,$ and so on, as long as the differences are rational. </p>\n<p>Suppose, we pick <em>exactly one</em> number from each group to create a set $ V $, called the Vitali set. The rule is that the numbers we pick must not differ by a rational number, because if they did (like 0.2 and 0.7), they'd be in the same group, and we're only allowed one number per group. So something like $ 0.2 $, and $ 1/\\sqrt{2} $ etc. This is tricky because there are uncountably many groups, and we rely on the axiom of choice to ensure we can pick one number from each.    </p>\n<p>So, we've got our Vitali set $ V $, a collection of numbers, one from each group, where no two numbers differ by a rational. Why does this cause trouble? Let's try to assign it a probability $ P(V) = a $. To check if this works, we shift $ V $ by all rational numbers in $ [0, 1] $, like 0, 0.1, 0.2, 0.3, and so on. For each rational $ q $, the set $ V + q $ (where we add $ q $ to each number in $ V $, wrapping around to stay in $ [0, 1] $) is a shifted copy of $ V $. These shifted sets are <strong>disjoint</strong>&mdash;they don't overlap. Why? If some number appeared in both $ V + q_1 $ and $ V + q_2 $, say $ x + q_1 = y + q_2 $, then $ x - y = q_2 - q_1 $, a rational number, which would mean $ x $ and $ y $ are in the same group, contradicting the fact that $ V $ has only one number per group.</p>\n<p>The union of all these shifted sets $ V + q $, over all rational $ q \\in [0, 1] $, covers all of $ [0, 1] $. Why? Every number in $ [0, 1] $ belongs to some group, and by shifting $ V $'s representative from each group by all possible rational numbers, we hit every number in every group. Since $ P([0, 1]) = 1 $, the probability of this union should be 1. By our probability rule of countable additivity, the probability of the union is the sum of the probabilities of these disjoint sets:</p>\n<p>$$ P\\left( \\bigcup_{q} (V + q) \\right) = \\sum_{q} P(V + q) $$</p>\n<p>Since shifting by a rational doesn't change the \"size\" of the set (in a uniform measure), each $ V + q $ should have the same probability as $ V $, so $ P(V + q) = a $. There are countably many rational numbers in $ [0, 1] $, so the sum is:</p>\n<p>$$ \\sum_{q} P(V + q) = \\sum_{q} a $$</p>\n<p>Now, we're stuck:</p>\n<ul>\n<li>If $ a &gt; 0 $, the sum $ a + a + \\dots $ over countably many terms is infinite, which can't equal 1. That's a contradiction.</li>\n<li>If $ a = 0 $, the sum is 0, which also can't equal 1. Another contradiction.</li>\n</ul>\n<p>This shows we <em>can't</em> assign a probability to $ V $ without breaking our probability rules. The Vitali set is <strong>non-measurable</strong>-it's too strange to fit into our probability framework. This is why we can't assign probabilities to <em>every</em> subset of $ \\Omega = [0, 1] $. We need a <strong>sigma algebra</strong> to limit ourselves to subsets that play nice.\n<br></p>\n<hr>\n<p><br>\nA sigma algebra $ \\mathcal{F} $ is our curated list of \"good\" subsets-events we can assign probabilities to consistently. It follows three rules:</p>\n<ol>\n<li><strong>The whole space is included</strong>: $ \\Omega \\in \\mathcal{F} $. We need to say \"something happens\" with probability 1.</li>\n<li><strong>Closed under complements</strong>: If $ A \\in \\mathcal{F} $, then $ \\Omega \\setminus A \\in \\mathcal{F} $ ($\\Omega - A$). If \"the number is in $ [0.2, 0.7] $\" is an event, \"the number is <em>not</em> in $ [0.2, 0.7] $\" (i.e., $ [0, 0.2) \\cup (0.7, 1] $) is too.</li>\n<li><strong>Closed under countable unions</strong>: If $ A_1, A_2, \\dots \\in \\mathcal{F} $, then $ \\bigcup_{i=1}^\\infty A_i \\in \\mathcal{F} $. This lets us combine events like $ [0.1, 0.2] \\cup [0.3, 0.4] $.</li>\n</ol>\n<p>For $ \\Omega = [0, 1] $, a sigma algebra includes nice subsets like intervals, their unions, and complements, but leaves out non-measurable sets like the Vitali set.</p>\n<p>But for our intents and purposes, one may think of this as a <strong>power set</strong>, for simplicity.</p>\n<h2 id=\"the-borel-sigma-algebra\">The Borel Sigma Algebra</h2>\n<p><strong>TL:DR</strong> It's just a sigma algebra but open intervals.</p>\n<p>So, what's a <strong>Borel sigma algebra</strong>? It's the standard sigma algebra for continuous spaces like $ [0, 1] $, $ \\mathbb{R} $, or $ \\mathbb{R}^2 $, used in problems like the Bertrand paradox. Think of it as the ultimate collection of measurable subsets that makes probability calculations safe and practical.</p>\n<p>The Borel sigma algebra, denoted $ \\mathcal{B} $, starts with all <strong>open sets</strong> in your space. In $ \\Omega = [0, 1] $, open sets are intervals like $ (0.2, 0.5) $ (not including endpoints). In $ \\mathbb{R}^2 $, they're open disks, rectangles, or shapes with smooth boundaries. The Borel sigma algebra is the smallest sigma algebra that contains all these open sets, built by:</p>\n<ol>\n<li>Including all open sets.</li>\n<li>Adding their complements (closed sets, like $ [0.2, 0.5] $).</li>\n<li>Adding all countable unions and intersections of these sets.</li>\n</ol>\n<p>This creates a huge collection of measurable sets (called <strong>Borel Sets</strong>), including:</p>\n<ul>\n<li>Intervals: $ [0.2, 0.5] $, $ (0, 1) $, or single points like $ {0.42} $.</li>\n<li>Unions of intervals: $ [0.1, 0.3] \\cup [0.5, 0.7] $.</li>\n</ul>\n<h2 id=\"probability-measures-and-probability-spaces\">Probability Measures and Probability Spaces</h2>\n<h3 id=\"probability-measures\">Probability Measures</h3>\n<p>So we laid down most of the formal stuff, now to actually define our <strong>Probability measure</strong>, we may take a function&mdash;</p>\n<p>$$\nP: \\mathcal{F} \\to [0,1]\n$$</p>\n<p>From domain = $\\mathcal{F}$, to codomain/range = $[0,1]$. Note this assigns probabilities to <strong>events in</strong> $ \\mathcal{F} $(similar to what is covered in highschool), and <strong>is different from PMFs and PDFs</strong> covered later on. \nIt must satisfy:    </p>\n<ol>\n<li>$P(\\Omega) = 1$  </li>\n<li>$P(\\phi) = 0$</li>\n<li><strong>Countable additivity</strong>: For a countable collection of <strong>disjoint</strong> sets, $A_1, A_2, \\dots \\in \\mathcal{F}$, $$  P(\\bigcup_{i=1}^\\infty A_i) = \\Sigma_{i=1}^\\infty P(A_i) $$</li>\n</ol>\n<p>If all of this seems obvious, good. But in most cases it would be advisable to think of continuous probability as different from discrete probability.</p>\n<h3 id=\"probability-spaces\">Probability Spaces</h3>\n<p>So from the terms we defined above, now we can finally define our \"world\", a probability space. Let's simply package all the relevant stuff into a triple of $(\\Omega, \\mathcal{F}, P)$.    </p>\n<p>For example, for a (single) fair coin flip&mdash;</p>\n<p>$$\n\\begin{aligned}\n\\Omega &amp;= \\{H, T\\} \\newline\n\\mathcal{F} &amp;= \\{\\phi, \\{H\\}, \\{T\\}, \\{H, T\\}\\} \\newline\nP&amp;(\\{H\\}) = 0.5 , P({\\{T\\}}) = 0.5\n\\end{aligned}\n$$</p>\n<h2 id=\"random-variables\">Random Variables</h2>\n<p>So we have a sample space, but doing calculations on it could be quite difficult, especially because we don't really have any set <strong>ordering</strong>. We typically want something in terms of <strong>numbers</strong> to do anything practical with it. So we introduce <strong>Random Variables (RVs)</strong>, that solve this problem.</p>\n<p>Despite the name, a Random Variable is actually a <strong>function</strong>&mdash; <br />\n$$\nX: \\Omega \\to \\mathbb{R}\n$$</p>\n<p>It assigns a <strong>Real Number</strong> ($\\mathbb{R}$) to every outcome in the sample space ($\\Omega$).  <br />\nNow obviously we can have <strong>two types</strong> of random variables.    </p>\n<h3 id=\"discrete-random-variables\">Discrete Random Variables</h3>\n<p>It usually takes countable values, for example let's take a dice rolled 3 times. Then&mdash;</p>\n<p>$$\n\\Omega = \\{(i,j,k): i,j,k \\in {1,2,3,4,5,6}\\}\n$$</p>\n<p>and suppose our random variable ($X$) is the number of 6s, rolled in the 3 tries&mdash;</p>\n<p>$$\nX: \\Omega \\to \\{0,1,2,3\\}\n$$</p>\n<p>and also&mdash;</p>\n<p>$$\nX(\\omega \\in \\Omega) = \\text{ number of sixes}\n$$</p>\n<p>More formally&mdash;</p>\n<p>$$\nX((i,j,k)) = \\Sigma_{m\\in\\{i,j,k\\}} 1_{\\{6\\}}(m)\n$$</p>\n<p>where $1_{\\{6\\}}(m)$ is an indicator function, defined as:    </p>\n<p>$$\n1_{\\{6\\}}(m) = \n\\begin{cases} \n1 &amp; \\text{if } m = 6, \\newline\n0 &amp; \\text{if } m \\neq 6\n\\end{cases}\n$$</p>\n<p>But anyways, there are many ways to define a RV.    </p>\n<p>Then where is the $\\sigma$-algebra ($\\mathcal{F}$)? This is the question that confused me for a long time.<br />\nThink of it something like this&mdash;<br />\nIn the dice roll example above, if we want the probability of the event that the RV takes the value $X=1$ (i.e $P(X=1)$)  <br />\nWe would want the probability of the event defined by the set&mdash;\n$$\n\\{\\omega \\in \\Omega: X(\\omega) = 1\\}\n$$  </p>\n<p>This looks some thing like $\\{(2,6,4),(4,6,5) \\dots\\}$. Now this set must belong to $\\mathcal{F}$, i.e, <br />\n$$\n\\{\\omega \\in \\Omega: X(\\omega) = 1\\} \\in \\mathcal{F}\n$$</p>\n<p>This ensures our event is <strong>measurable</strong> (refer to the Vitali set above for the counter example). But when applied to most real-world scenarios, one doesn't have to actively check for this statement to be true.  </p>\n<p>Also note, here the $ X $ maps from $ \\Omega $ to a <strong>Borel Set</strong>, in this case $\\{0,1,2,3\\}$</p>\n<h3 id=\"continuous-random-variables\">Continuous Random Variables</h3>\n<p>More or less similar to the discrete type, except&mdash;</p>\n<p>$$\nX: \\Omega \\to \\mathbb{R}^n \\text{ Where }  n \\in \\mathbb{Z}\n$$</p>\n<p>The rest can be inferred. Maybe try to guess what the RV was in the Bertrand Paradox stated earlier.</p>\n<h1 id=\"probability-distributions\">Probability distributions</h1>\n<h2 id=\"the-pmf-and-the-pdf\">The PMF and the PDF</h2>\n<p>So, we've defined random variables, which turn outcomes in $\\Omega$ into numbers, and we've set up our probability space ($\\Omega, \\mathcal{F}, P$) to assign probabilities to events. But how do we figure out the likelihood of a random variable taking specific values, like \"exactly one 6 in three dice rolls\" or \"the chord's midpoint in the inner circle\"? \nThis is where <strong>probability distributions</strong> come in&mdash;they describe how probabilities are spread across the values of a random variable.    </p>\n<p>The <strong>probability measure</strong> $ P $, assigns probabilities to <strong>events</strong> in $ \\mathcal{F} $, but as we've seen before RVs aren't events. So just to compute the <strong>probability of the subset of events the RV takes</strong> directly (like $P(X=1)$), we introduce tools like the <strong>PMF and PDF</strong>.</p>\n<h3 id=\"probability-mass-function-pmf\">Probability Mass Function (PMF)</h3>\n<p>For a <strong>discrete random variable</strong>, which takes countable values (like the number of 6s in three dice rolls), the probability mass function (PMF) gives the probability of each possible value: </p>\n<p>$$\nP(X = x)\n$$  </p>\n<p>Let's revisit our dice example. The sample space is&mdash;</p>\n<p>$$\n\\Omega = \\{(i,j,k): i,j,k \\in {1,2,3,4,5,6}\\}\n$$</p>\n<p>And $X((i,j,k)) = \\Sigma_{m\\in\\{i,j,k\\}} 1_{\\{6\\}}(m)$, where $1_{\\{6\\}}(m)$ is&mdash;    </p>\n<p>$$\n1_{\\{6\\}}(m) = \n\\begin{cases} \n1 &amp; \\text{if } m = 6, \\newline\n0 &amp; \\text{if } m \\neq 6\n\\end{cases}\n$$</p>\n<p>Here the PMF tells us probabilities like&mdash; $ P(X=1) $, i.e only one 6 is rolled, in three tries. Now for simple stuff like this dice roll, even highschool math will suffice, but just to put it out there, $X$ follows a <strong>binomial distribution</strong> (Will be covered ahead). So the PMF looks something like&mdash; </p>\n<p>$$\nP(X=k) = \\binom{3}{k}\\cdot\\left(\\frac{1}{6}\\right)^k\\cdot\\left(\\frac{5}{6}\\right)^{3-k}  \\text{ where }   k \\in \\{0,1,2,3\\} \n$$</p>\n<p>Here $k = 1$ gives&mdash;</p>\n<p>$$\nP(X=1) = \\binom{3}{1}\\cdot\\left(\\frac{1}{6}\\right)^1\\cdot\\left(\\frac{5}{6}\\right)^{2} = \\frac{75}{216} \\approx 0.347\n$$  </p>\n<h3 id=\"probability-density-function-pdf\">Probability Density Function (PDF)</h3>\n<p>For a <strong>continuous random variable</strong>, which takes values in a continuum (like the coordinates of a chord's midpoint in the Bertrand paradox), we can't assign probabilities to specific values because $ P(X = x) = 0 $. So what, do we do? Is it just not possible? Of course not! We take an interval of values, like $ P(a \\leq X \\leq b) $. This should give us the probability that $ X $ lies in the interval $ [a , b] $, which usually won't be zero (To serve as an abstraction, one can think of this as taking a <strong>small section</strong> of a line, rather than a <strong>point</strong> on a line. The point will have no length on the line, which makes defining probabilities for it quite difficult, but the small section has some finite length, however small it may be).   </p>\n<p>How do we do this though? Simple. We define another function, called the <strong>probability density function (PDF)</strong> ( $ f(x) $ ). We want this function to be some kind of a \"density map\" of sorts.    </p>\n<p>So obviously to find the probability of a specific part we'd do&mdash;  </p>\n<p>$$\nP(a \\leq X \\leq b) = \\frac{\\int_{a}^{b} f(x)dx}{\\int_{-\\infty}^{\\infty} f(x)dx}\n$$</p>\n<p>But that does not look pretty, especially since $ f(x) $ is not <strong>normalized</strong>. So we conviniently define $ f(x) $ in such a way that&mdash;    </p>\n<p>$$\n\\int_{-\\infty}^{\\infty} f(x)dx = 1\n$$</p>\n<p>So now we get&mdash;</p>\n<p>$$\nP(a \\leq X \\leq b) = \\int_{a}^{b} f(x)dx\n$$</p>\n<p>Also it must be <strong>non-negative</strong> for all $x$. i.e $f(x)\\geq 0 \\forall x$ (try to justify this claim, it's pretty intuitive, but the proof is still quite long and excluded for brevity).    </p>\n<p>Let's do some examples because abstract definitions like this make no sense.    </p>\n<hr />\n<h4 id=\"example-1-uniform-distribution-on-an-interval-1d\">Example 1: Uniform Distribution on an Interval (1D)</h4>\n<p><strong>Scenario</strong>: Suppose you're waiting for a bus that arrives randomly between 0 and 10 minutes from now. Let $X$ be the waiting time in minutes, uniformly distributed over $[0, 10]$.</p>\n<p><strong>PDF</strong>: Since $X$ is equally likely to take any value in $[0, 10]$, the PDF is constant over that interval. The total area under the PDF must be 1:</p>\n<p>$$\nf(x) = \\frac{1}{10}, \\quad 0 \\leq x \\leq 10\n$$</p>\n<p>(Outside $[0, 10]$, $f(x) = 0$.) Check: $\\int_0^{10} \\frac{1}{10} \\, dx = \\frac{10}{10} = 1$.</p>\n<p><strong>Probability</strong>: What's the probability you wait between 2 and 5 minutes ($P(2 \\leq X \\leq 5)$)?</p>\n<p>$$\nP(2 \\leq X \\leq 5) = \\int_2^5 \\frac{1}{10} \\, dx = \\frac{5 - 2}{10} = \\frac{3}{10} = 0.3\n$$</p>\n<p><strong>Intuition</strong>: The PDF is a flat line at height $\\frac{1}{10}$. The interval $[2, 5]$ has length 3, so the area is $3 \\cdot \\frac{1}{10} = 0.3$.</p>\n<p>It looks something like&mdash;</p>\n<p><br></p>\n<p><img src=\"/static/images/mathforquant/math-for-quant-part-1-9.svg\" style=\"height: 300px !important\" class=\"invertible\"></p>\n<p><br>\n<br></p>\n<hr />\n<p><br>\nFor the sake of brevity, we'll go straight to the named distributions from here, but maybe try to think up a few more examples, before we do. Maybe try to get an exponential distribution (i.e in terms of $e^k \\text{ or } a^k$)? (Remember you must normalize them in some way to get $f(x)$)</p>\n<h2 id=\"the-binomial-distribution\">The Binomial distribution</h2>\n<p>We've already seen the binomial distribution sneak into our dice example, where we calculated the probability of rolling exactly one 6 in three tries. But what exactly is this distribution, and why is it so important? Let's break it down.  </p>\n<p>Let's start with the main question:</p>\n<blockquote>\n<p>Given a fixed number of trials (<code>n</code>), flipping a fair coin, calculate the probability of getting exactly 1 heads in these <code>n</code> trials.</p>\n</blockquote>\n<p>Simple high school math right?<br />\nBut let's visualize it&mdash;</p>\n<p><br>\n<img src=\"/static/images/mathforquant/math-for-quant-part-1-10.svg\" style=\"height: 300px !important\" class=\"invertible\">\n<br></p>\n<p>Notice that if we select a path all the way down to the bottom, the probabilities of each branch get <strong>multiplied</strong>. In our case, as it's a fair coin, $ p = (1-p) = 0.5 $.\nhere we <strong>only need 1 heads</strong>, so we must continue on the rightmost branch, and select the place where we get our heads. We can select the \"branch\" where we make the split with&mdash;</p>\n<p>$$\n\\binom{n}{1} = n\n$$</p>\n<p>And our final probability will look like&mdash;</p>\n<p>$$\n\\binom{n}{1}\\cdot(0.5)^1\\cdot(0.5)^{(n-1)}\n$$</p>\n<p>So to generalize this:<br />\n$$\n\\begin{aligned}\np:&amp; \\text{ Probability of success.} \\newline\nn:&amp; \\text{ Number of trials} \\newline\nk:&amp; \\text{ Required number of successes}\n\\end{aligned}\n$$</p>\n<p>So we get a RV, $X$, and&mdash;\n$$\nP(X=k) = \\binom{n}{k}\\cdot(p)^k\\cdot(1-p)^{(n-k)}\n$$\n&mdash;Is the PMF. Here, $\\binom{n}{k}$ counts the ways to choose $k$ successes out of $n$ trials, $p^k$ is the probability of $k$ successes, and $(1 - p)^{n - k}$ covers the failures.\nHere is the graph ($n=10, p=0.5$)&mdash;\n<br></p>\n<iframe src=\"https://www.desmos.com/calculator/uwq5nondpt?embed\" width=\"100%\"  height=\"500\" style=\"border: 1px solid #ccc;border-radius:5px\" frameborder=0></iframe>\n<p><br></p>\n<p>The green lines are the floored values of $X$, i.e Integers, where as the red curve is the extension of this binomial distribution. Can you point out what's wrong with it? yeah. The red graph may cause confusion, as the binomial distribution is <strong>discrete</strong> in nature, so it shouldn't have a continuous graph. So the real binomial distribution is the <strong>green lines only</strong>, or more accurately, only the points corresponding to integral values of $X$.   </p>\n<p>By the way, if $X$ <strong>follows a Binomial distribution</strong>, we say $ X \\sim \\text{Binomial}(n, p) $, in math language. Now the fun part&mdash;</p>\n<h3 id=\"mean-expected-value\">Mean (Expected Value)</h3>\n<p>We want the expected value, $E[X]$, which is like the average number of successes we'd expect over many, many trials. The probability of getting exactly $k$ successes is given by the binomial probability mass function (PMF):</p>\n<p>$$\nP(X = k) = \\binom{n}{k} \\cdot p^k \\cdot (1 - p)^{n - k}\n$$</p>\n<p>To find $E[X]$, we weigh each possible number of successes $k$ by its probability:</p>\n<p>$$\nE[X] = \\sum_{k=0}^n k \\cdot \\binom{n}{k} \\cdot p^k \\cdot (1 - p)^{n - k}\n$$</p>\n<p>Notice that when $k = 0$, the term is $0 \\cdot P(X = 0) = 0$, so it contributes nothing. Let's skip it and start from $k = 1$:</p>\n<p>$$\nE[X] = \\sum_{k=1}^n k \\cdot \\binom{n}{k} \\cdot p^k \\cdot (1 - p)^{n - k}\n$$</p>\n<p>Now, that $k \\cdot \\binom{n}{k}$ looks a bit tricky. Let's play with it. There's a neat identity, taught in highschool, that can be used here:</p>\n<p>$$k \\cdot \\binom{n}{k} = n \\cdot \\binom{n-1}{k-1}$$</p>\n<p>Let's actually use it:</p>\n<p>$$\nE[X] = \\sum_{k=1}^n \\left[ n \\cdot \\binom{n-1}{k-1} \\right] \\cdot p^k \\cdot (1 - p)^{n - k} = n \\sum_{k=1}^n \\binom{n-1}{k-1} \\cdot p^k \\cdot (1 - p)^{n - k}\n$$</p>\n<p>To make this sum friendlier, let's shift the index. Set $j = k - 1$. When $k = 1$, $j = 0$; when $k = n$, $j = n-1$. Also, adjust the exponents: $p^k = p^{j+1} = p \\cdot p^j$ and $(1 - p)^{n - k} = (1 - p)^{(n-1) - j}$. So the sum becomes:</p>\n<p>$$\nE[X] = n \\sum_{j=0}^{n-1} \\binom{n-1}{j} \\cdot (p \\cdot p^j) \\cdot (1 - p)^{(n-1) - j} = n p \\sum_{j=0}^{n-1} \\binom{n-1}{j} \\cdot p^j \\cdot (1 - p)^{(n-1) - j}\n$$</p>\n<p>That sum looks familiar&mdash;it's the total probability of a binomial random variable with $n-1$ trials and probability $p$, which sums to 1 (since it's the sum of all probabilities for a $\\text{Binomial}(n-1, p)$ distribution). So:</p>\n<p>$$\n\\sum_{j=0}^{n-1} \\binom{n-1}{j} \\cdot p^j \\cdot (1 - p)^{(n-1) - j} = 1\n$$</p>\n<p>Thus:</p>\n<p>$$\nE[X] = n p \\cdot 1 = n p\n$$</p>\n<p>$$\n\\boxed{E[X] = n p}\n$$</p>\n<p>That looks like something we'd expect, right? If you flip a coin $n$ times with success probability $p$, you expect $n p$ successes on average. Like, if you flip a fair coin ($p = 0.5$) 10 times, you'd expect about 5 heads.</p>\n<h3 id=\"variance\">Variance</h3>\n<p>Now for the variance, $\\text{Var}(X) = E[X^2] - (E[X])^2$, which tells us how spread out our number of successes is. Calculating $E[X^2]$ directly is a bit messy, so let's be clever and compute $E[X(X-1)]$ first, which is like looking at pairs of successes. Then we'll relate it to $E[X^2]$. Start with:</p>\n<p>$$\nE[X(X-1)] = \\sum_{k=0}^n k (k-1) \\cdot \\binom{n}{k} \\cdot p^k \\cdot (1 - p)^{n - k}\n$$</p>\n<p>When $k = 0$ or $k = 1$, $k(k-1) = 0$, so those terms vanish. Start at $k = 2$:</p>\n<p>$$\nE[X(X-1)] = \\sum_{k=2}^n k (k-1) \\cdot \\binom{n}{k} \\cdot p^k \\cdot (1 - p)^{n - k}\n$$</p>\n<p>Another cool identity: $k (k-1) \\cdot \\binom{n}{k} = n (n-1) \\cdot \\binom{n-2}{k-2}$. (Just kidding, its the same thing applied twice)\n$$\n\\begin{aligned}\nE[X(X-1)] =&amp; \\sum_{k=2}^n \\left[ n (n-1) \\cdot \\binom{n-2}{k-2} \\right] \\cdot p^k \\cdot (1 - p)^{n - k} \\newline  <br />\n=&amp; n (n-1) \\sum_{k=2}^n \\binom{n-2}{k-2} \\cdot p^k \\cdot (1 - p)^{n - k}\n\\end{aligned}\n$$</p>\n<p>Reindex with $j = k - 2$. When $k = 2$, $j = 0$; when $k = n$, $j = n-2$. Exponents adjust: $p^k = p^{j+2} = p^2 \\cdot p^j$, and $(1 - p)^{n - k} = (1 - p)^{(n-2) - j}$. So:</p>\n<p>$$\nE[X(X-1)] = n (n-1) p^2 \\sum_{j=0}^{n-2} \\binom{n-2}{j} \\cdot p^j \\cdot (1 - p)^{(n-2) - j}\n$$</p>\n<p>That sum is the total probability for a $\\text{Binomial}(n-2, p)$, which equals 1:</p>\n<p>$$\nE[X(X-1)] = n (n-1) p^2 \\cdot 1 = n (n-1) p^2\n$$</p>\n<p>Now, relate $E[X(X-1)]$ to $E[X^2]$:</p>\n<p>$$\nE[X(X-1)] = E[X^2 - X] = E[X^2] - E[X]\n$$</p>\n<p>So:</p>\n<p>$$\nE[X^2] = E[X(X-1)] + E[X] = n (n-1) p^2 + n p\n$$</p>\n<p>Now compute the variance:</p>\n<p>$$\n\\text{Var}(X) = E[X^2] - (E[X])^2 = \\left[ n (n-1) p^2 + n p \\right] - (n p)^2\n$$</p>\n<p>Simplify:</p>\n<p>$$\n= n (n-1) p^2 + n p - n^2 p^2 = n^2 p^2 - n p^2 + n p - n^2 p^2 = n p - n p^2 = n p (1 - p)\n$$</p>\n<p>$$\n\\boxed{\\text{Var}(X) = n p (1 - p)}\n$$</p>\n<p>Interesting! The variance $n p (1 - p)$ is highest when $p = 0.5$, meaning the outcome is most uncertain when success and failure are equally likely. For $p$ close to 0 or 1, the variance shrinks, as the outcome is more predictable.</p>\n<p>So, our final answers are:</p>\n<p>$$\n\\begin{aligned}\nE[X] &amp;= \\boxed{n p} \\newline\n\\text{Var}(X) &amp;= \\boxed{n p (1 - p)}\n\\end{aligned}\n$$</p>\n<h2 id=\"the-poisson-distribution\">The Poisson distribution</h2>\n<p>Imagine we're running a website, and we're interested in the number of visitors arriving in a given hour, and possibly predict average traffic and future probabilities of extreme traffic with it. (for e.g how likely 10k visitors are, etc)  <br />\nHow do we model this, with the math we've learnt? How about we make every second a RV ($X$)? We'd have two possibilities:   </p>\n<ol>\n<li>A user visits the site (success)</li>\n<li>No one visits the site (failure) </li>\n</ol>\n<p>Looks familiar? That's because $X$ follows a <strong>binomial distribution</strong>! But clearly anyone can see the limitations here&mdash;  </p>\n<ol>\n<li>What if two users visit in 1 second.</li>\n<li>Computationally infeasible. (we're evaluating the binomial formula. every. single. second. i.e 3600 times an hour, or even higher for finer precision)</li>\n<li>$P(\\text{success})$ is tiny.</li>\n</ol>\n<p>So instead, how about we calculate the <strong>average rate</strong> of visitors (the mean), say $\\lambda$, and try to do something with that&mdash;   <br />\nBut what exactly? We mainly want to model the probability of getting $k$ (5 or 10 or 20) visitors an hour, simply from the fact that we know that on average there are $\\lambda$ visitors an hour. Let's start with the binomial version&mdash; </p>\n<p>$$\nP_{\\text{binomial}}(X=k) = \\binom{n}{k}\\cdot(p)^{k}\\cdot(1-p)^{n-k}\n$$  </p>\n<p>But now our no. of trials $n \\to \\infty$ , and our probability of success $p \\to 0$. With limits, that'd look something like&mdash; </p>\n<p>$$\nP_{\\text{poisson}}(X=k) = \\lim_{n \\to \\infty ;\\text{  } p \\to 0} \\binom{n}{k}\\cdot(p)^{k}\\cdot(1-p)^{n-k}\n$$  </p>\n<p>Now even writing it out looks, funky, so we must find a way to reduce this to <strong>one variable</strong>. Recall that the mean of a binomial was $np$. But we set the average rate of visitors to $\\lambda$, so&mdash;</p>\n<p>$$\n\\begin{aligned}\nnp &amp;= \\lambda \\newline\np &amp;= \\frac{\\lambda}{n}\n\\end{aligned}\n$$</p>\n<p>Now let's put this back in that limit, so&mdash;</p>\n<p>$$\nP_{\\text{poisson}}(X=k) = \\lim_{n \\to \\infty} \\binom{n}{k}\\cdot\\left(\\frac{\\lambda}{n}\\right)^{k}\\cdot\\left(1-\\frac{\\lambda}{n}\\right)^{n-k}\n$$  </p>\n<p>Looks a bit easier now... Oh, let's expand the combination to it's factorial notation&mdash;</p>\n<p>$$\nP_{\\text{poisson}}(X=k) = \\lim_{n \\to \\infty} \\left(\\frac{n!}{k!(n-k)!} \\right) \\cdot \\left(\\frac{\\lambda}{n}\\right)^{k} \\cdot \\left(1-\\frac{\\lambda}{n}\\right)^{n-k}\n$$  </p>\n<p>So we have three terms we have to deal with&mdash;</p>\n<p>$$\n\\begin{aligned}\n\\lim_{n \\to \\infty} &amp;\\left(\\frac{n!}{k!(n-k)!} \\right) \\newline\n\\lim_{n \\to \\infty} &amp;\\left(\\frac{\\lambda}{n}\\right)^{k} \\newline\n\\lim_{n \\to \\infty} &amp;\\left(1-\\frac{\\lambda}{n}\\right)^{n-k}\n\\end{aligned}\n$$</p>\n<p>Expand the first one&mdash;</p>\n<p>$$\n\\lim_{n \\to \\infty} \\left(\\frac{n(n-1)(n-2) \\dots (n-k+1)\\cdot(n-k)(n-k-1)\\dots}{k!(n-k)(n-k-1)\\dots} \\right) \n$$</p>\n<p>Notice how everything after the dot gets cancelled with the denominator? But also notice, that $n \\to \\infty$, so $n \\approx (n-1) \\approx (n-k+1)$. Yes, there is a proper mathematical way to do it, but let's just keep it intuitive and move on. So now our expression is&mdash;</p>\n<p>$$\n\\lim_{n \\to \\infty} \\left(\\frac{n^k}{k!} \\right) \n$$  </p>\n<p>Do you see it? Let's bring back the second part&mdash;</p>\n<p>$$\n\\lim_{n \\to \\infty} \\left(\\frac{n^k}{k!} \\right)\\cdot \\left(\\frac{\\lambda}{n}\\right)^{k}\n$$</p>\n<p>It gets cancelled! So together we're only left with normal variables for the first and second part, i.e &mdash;\n$$\n\\lim_{n \\to \\infty} \\left(\\frac{\\lambda^k}{k!} \\right)\n$$</p>\n<p>For the last part, we have to get a little creative (although it's a simple trick taught in JEE prep. and stuff). Let $L$ be the limit for the 3rd part.  </p>\n<p>$$\nL = \\lim_{n \\to \\infty} \\left(1-\\frac{\\lambda}{n}\\right)^{n-k}\n$$</p>\n<p>Taking <strong>natural log</strong> on both sides we get&mdash;</p>\n<p>$$\n\\ln(L) = \\lim_{n \\to \\infty}  (n-k)\\ln\\left(1-\\frac{\\lambda}{n}\\right)\n$$</p>\n<p>Of course, there are a few nuances to this step, but let's not bother. Rewriting it to get $0/0$ form&mdash;</p>\n<p>$$\n\\ln(L) = \\lim_{n \\to \\infty}  \\frac{\\ln\\left(1-\\frac{\\lambda}{n}\\right)}{\\frac{1}{(n-k)}}\n$$</p>\n<p>What do we do next? L'Hopital of course, because we're lazy&mdash;</p>\n<p>$$\n\\ln(L) = \\lim_{n \\to \\infty}  \\frac{\\frac{1}{1-\\frac{\\lambda}{n}}\\cdot\\frac{\\lambda}{n^2}}{\\frac{-1}{(n-k)^2}}\n$$</p>\n<p>Hm&mdash; $(n-k)^2 \\approx n^2$ so let's just cancel them, and put $\\lambda / n = 0$. And with that we've got rid of the limit&mdash;</p>\n<p>$$\n\\ln(L) = -\\lambda\n$$</p>\n<p>So&mdash;\n$$\nL = e^{-\\lambda}\n$$</p>\n<p>Put it all back together&mdash;\n$$\n\\boxed{P_{\\text{poisson}}(X=k) = \\frac{\\lambda^k \\cdot e^{-\\lambda}}{k!}}\n$$</p>\n<p>Where, $X \\sim \\text{Poisson}(\\lambda) $</p>\n<p>And here is the graph($\\lambda = 2$) &mdash;</p>\n<p><br>\n<br></p>\n<iframe src=\"https://www.desmos.com/calculator/tirmhififj?embed\"width=\"100%\"  height=\"500\" style=\"border: 1px solid #ccc;border-radius:5px\" frameborder=0></iframe>\n<p><br>\n<br></p>\n<p>Of course the red graph is wrong, and the green one is the true graph (floored). Notice something peculiar? Getting $\\lambda - 1$ has the same probability as getting $ \\lambda $ visitors (when $\\lambda$ is an integer, which it always is in our case).</p>\n<h3 id=\"mean-expected-value-variance\">Mean (Expected Value) &amp; Variance</h3>\n<p>To save time, I'll just say it (Feel free to derive it on your own, it's not that hard). The mean and variance are&mdash;</p>\n<p>$$\n\\begin{aligned}\nE[X] &amp;= \\lambda \\newline\n\\text{Var}(X) &amp;= \\lambda\n\\end{aligned}\n$$</p>\n<p>The mean is understandable because that's what we assumed, but <strong>why does the variance depend on the mean?</strong>  <br />\nWhat does our expected value, have to do with spread? Think about it.</p>\n<h2 id=\"the-gaussian-normal-distribution\">The Gaussian (Normal) distribution</h2>\n<p>Take a look at this mark distribution for JEE:</p>\n<p><img src=\"/static/images/mathforquant/math-for-quant-part-1-11.png\" style=\"height: 300px !important\" class=\"invertible\"></p>\n<p><br>\nOr this marathon finish-time distribution&mdash;</p>\n<p><a href=\"https://www.researchgate.net/figure/Histogram-showing-the-finishing-times-of-all-40-year-old-runners-The-curve-represents-a_fig6_277089242\"><img src=\"https://www.researchgate.net/profile/Niklas-Lehto/publication/277089242/figure/fig6/AS:269869983727616@1441353426784/Histogram-showing-the-finishing-times-of-all-40-year-old-runners-The-curve-represents-a.png\" alt=\"Histogram showing the finishing times of all 40-year-old runners. The curve represents a fit of a normal distribution to the measured distribution.\"/></a></p>\n<p><br>\nOr stock prices (random walk) over a long time&mdash;\n<a href=\"https://stats.stackexchange.com/questions/159650/why-does-the-variance-of-the-random-walk-increase\"><img src=\"/static/images/mathforquant/math-for-quant-part-1-12.png\"/></a></p>\n<p><br></p>\n<p>Did you spot it? exactly all of them look kind of \"bell-shaped\". That's called a normal/gaussian distribution&mdash;  <br />\nBut what exactly is the question it is trying to answer? It tries to answer this question:   </p>\n<blockquote>\n<p>What's the likelihood that a continuous random variable, shaped by many small, independent random effects, falls within a specific range?</p>\n</blockquote>\n<p>This applies to scenarios like test scores, where individual strengths and weaknesses average out, or stock prices, where daily fluctuations accumulate. Unlike the binomial (discrete trials) or Poisson (rare events), the Gaussian handles <strong>continuous</strong> data with a characteristic bell shape, which turns out to be pretty useful in real-world applications, beyond just recreational mathematics.</p>\n<h3 id=\"deriving-the-gaussian-from-the-binomial\">Deriving the Gaussian from the Binomial</h3>\n<p>(NOTE: Heavy math incoming, it scares me too. It's better to derive it by yourself, which also makes it easier to understand. When starting out, it's better to just memorize the formula and learn to apply it before getting into this derivation, as it involves a lot of complicated approximations)</p>\n<p>The binomial distribution models the number of successes in $n$ trials, each with success probability $p$. Suppose we're flipping a fair coin ($p = 0.5$) many times, say $n = 1000$, and we want the probability of getting $k$ heads. The PMF is:</p>\n<p>$$\nP(X = k) = \\binom{n}{k} p^k (1 - p)^{n - k}\n$$</p>\n<p>For large $n$, computing $\\binom{n}{k}$ directly is a nightmare. Plus, the distribution starts to look smooth, almost like a continuous curve (remember the green lines in the binomial graph?). Let's explore what happens when $n \\to \\infty$.    </p>\n<p>(NOTE: Unlike the poisson distribution, here $p$ does not tend to 0)</p>\n<p>First, let's \"center\" the distribution. The mean of a binomial is $E[X] = n p$, and the variance is $\\text{Var}(X) = n p (1 - p)$. For $p = 0.5$, the mean is $n/2$, and the standard deviation is $\\sqrt{n \\cdot 0.5 \\cdot 0.5} = \\sqrt{n/4} = \\sqrt{n}/2$. Let's <strong>standardize</strong> the random variable $X$ to see its behavior:</p>\n<p>$$\nZ = \\frac{X - n p}{\\sqrt{n p (1 - p)}}\n$$</p>\n<p>Wait, what exactly did we do? why \"standardize\" it?   <br />\nRemember how we normalized continuous RVs? exactly. We'd prefer a more standardized way to represent the same distribution, which would make it easier to compare to other such distributions. So we ask it: \"<strong>How far is $ X $ from its average, relative to its typical spread?</strong>\".  </p>\n<p>Here, $Z$ measures how many standard deviations $X$ is from the mean, which answers the first question.    </p>\n<p>Now, We want the probability density of $Z$ as $n$ grows large. To do this, let's approximate $P(X = k)$ for large $n$ using <a href=\"https://en.wikipedia.org/wiki/Stirling%27s_approximation\"><strong>Stirling's approximation</strong></a>, which simplifies factorials:</p>\n<p>$$\nn! \\approx \\sqrt{2 \\pi n} \\left( \\frac{n}{e} \\right)^n\n$$</p>\n<p>For the binomial coefficient:</p>\n<p>$$\n\\binom{n}{k} = \\frac{n!}{k! (n - k)!} \\approx \\frac{\\sqrt{2 \\pi n} \\left( \\frac{n}{e} \\right)^n}{\\sqrt{2 \\pi k} \\left( \\frac{k}{e} \\right)^k \\sqrt{2 \\pi (n - k)} \\left( \\frac{n - k}{e} \\right)^{n - k}}\n$$</p>\n<p>Simplify:</p>\n<p>$$\n\\binom{n}{k} \\approx \\frac{\\sqrt{2 \\pi n}}{\\sqrt{2 \\pi k} \\sqrt{2 \\pi (n - k)}} \\cdot \\frac{\\frac{n^n}{e^n}}{\\frac{k^k (n - k)^{n - k}}{e^k e^{n - k}}} = \\sqrt{\\frac{n}{2 \\pi k (n - k)}} \\cdot \\frac{n^n}{k^k (n - k)^{n - k}}\n$$</p>\n<p>Now, the binomial PMF is:</p>\n<p>$$\nP(X = k) = \\binom{n}{k} p^k (1 - p)^{n - k} \\approx \\sqrt{\\frac{n}{2 \\pi k (n - k)}} \\cdot \\frac{n^n}{k^k (n - k)^{n - k}} \\cdot p^k (1 - p)^{n - k}\n$$</p>\n<p>Let's express $k$ around the mean: set $k = n p + x \\sqrt{n p (1 - p)}$, so $x$ represents deviations in standard deviation units (like $Z$). Then:</p>\n<p>$$\nn - k = n - (n p + x \\sqrt{n p (1 - p)}) = n (1 - p) - x \\sqrt{n p (1 - p)}\n$$</p>\n<p>For large $n$, assume $k \\approx n p$, so $k (n - k) \\approx (n p) (n (1 - p)) = n^2 p (1 - p)$. The square root term becomes:</p>\n<p>$$\n\\sqrt{\\frac{n}{2 \\pi k (n - k)}} \\approx \\sqrt{\\frac{n}{2 \\pi n^2 p (1 - p)}} = \\frac{1}{\\sqrt{2 \\pi n p (1 - p)}}\n$$</p>\n<p>Now tackle the rest. The term $\\frac{n^n}{k^k (n - k)^{n - k}} p^k (1 - p)^{n - k}$ needs careful handling. Take its logarithm to simplify:</p>\n<p>$$\n\\ln \\left( \\frac{n^n p^k (1 - p)^{n - k}}{k^k (n - k)^{n - k}} \\right) = n \\ln n + k \\ln p + (n - k) \\ln (1 - p) - k \\ln k - (n - k) \\ln (n - k)\n$$</p>\n<p>(NOTE: After this, writing out the rest of it will simply look messy. So it's better to do it by oneself.)  </p>\n<p>Substitute $k = n p + x \\sqrt{n p (1 - p)}$ and use Taylor expansions around the mean. This gets messy, so let's focus on the exponent. For large $n$, the binomial PMF approximates a density. After substituting and simplifying (using normal approximation techniques), we get:</p>\n<p>$$\n\\boxed{P(X = k) \\approx \\frac{1}{\\sqrt{2 \\pi n p (1 - p)}} e^{-\\frac{(k - n p)^2}{2 n p (1 - p)}}}\n$$</p>\n<p>For the standardized variable $Z$, the density of $Z \\approx x$ is:</p>\n<p>$$\nf(z) = \\frac{1}{\\sqrt{2 \\pi}} e^{-\\frac{z^2}{2}}\n$$</p>\n<p>This is the <strong>standard normal distribution</strong>, $Z \\sim \\mathcal{N}(0, 1)$, with mean 0 and variance 1. For a general normal distribution $X \\sim \\mathcal{N}(\\mu, \\sigma^2)$, where $\\mu$ is the mean and $\\sigma^2$ is the variance, we transform $Z = \\frac{X - \\mu}{\\sigma}$, so the PDF of $X$ is:</p>\n<p>$$\n\\boxed{f(x) = \\frac{1}{\\sqrt{2 \\pi \\sigma^2}} e^{-\\frac{(x - \\mu)^2}{2 \\sigma^2}}}\n$$</p>\n<p>Let's verify it integrates to 1:</p>\n<p>$$\n\\int_{-\\infty}^{\\infty} \\frac{1}{\\sqrt{2 \\pi \\sigma^2}} e^{-\\frac{(x - \\mu)^2}{2 \\sigma^2}} dx\n$$</p>\n<p>Substitute $u = \\frac{x - \\mu}{\\sigma}$, so $x = \\mu + \\sigma u$, $dx = \\sigma du$:</p>\n<p>$$\n\\int_{-\\infty}^{\\infty} \\frac{1}{\\sqrt{2 \\pi \\sigma^2}} e^{-\\frac{u^2}{2}} \\sigma du = \\frac{1}{\\sqrt{2 \\pi}} \\int_{-\\infty}^{\\infty} e^{-\\frac{u^2}{2}} du = 1\n$$</p>\n<p>(The integral equals $\\sqrt{2 \\pi}$, so it normalizes correctly.) The PDF is non-negative, satisfying all requirements.</p>\n<p>Here's the graph for $\\mathcal{N}(0, 1)$:</p>\n<p><br></p>\n<iframe src=\"https://www.desmos.com/calculator/kdgkdzq2qx?embed\" width=\"100%\" height=\"500\" style=\"border: 1px solid #ccc;border-radius:5px\" frameborder=0></iframe>\n<p><br></p>\n<h3 id=\"mean-and-variance\">Mean and Variance</h3>\n<p>The mean of $X \\sim \\mathcal{N}(\\mu, \\sigma^2)$ is:</p>\n<p>$$\nE[X] = \\int_{-\\infty}^{\\infty} x \\cdot \\frac{1}{\\sqrt{2 \\pi \\sigma^2}} e^{-\\frac{(x - \\mu)^2}{2 \\sigma^2}} dx\n$$</p>\n<p>Substitute $u = \\frac{x - \\mu}{\\sigma}$, so $x = \\mu + \\sigma u$, $dx = \\sigma du$:</p>\n<p>$$\nE[X] = \\int_{-\\infty}^{\\infty} (\\mu + \\sigma u) \\cdot \\frac{1}{\\sqrt{2 \\pi}} e^{-\\frac{u^2}{2}} du = \\mu \\int_{-\\infty}^{\\infty} \\frac{1}{\\sqrt{2 \\pi}} e^{-\\frac{u^2}{2}} du + \\sigma \\int_{-\\infty}^{\\infty} u \\cdot \\frac{1}{\\sqrt{2 \\pi}} e^{-\\frac{u^2}{2}} du\n$$</p>\n<p>The first integral is 1 (total probability). The second is 0 (since $u e^{-\\frac{u^2}{2}}$ is odd). So:</p>\n<p>$$\nE[X] = \\mu\n$$</p>\n<p>For variance, compute $E[(X - \\mu)^2]$:</p>\n<p>$$\n\\text{Var}(X) = \\int_{-\\infty}^{\\infty} (x - \\mu)^2 \\cdot \\frac{1}{\\sqrt{2 \\pi \\sigma^2}} e^{-\\frac{(x - \\mu)^2}{2 \\sigma^2}} dx\n$$</p>\n<p>Using $u = \\frac{x - \\mu}{\\sigma}$:</p>\n<p>$$\n\\text{Var}(X) = \\int_{-\\infty}^{\\infty} (\\sigma u)^2 \\cdot \\frac{1}{\\sqrt{2 \\pi}} e^{-\\frac{u^2}{2}} du = \\sigma^2 \\int_{-\\infty}^{\\infty} u^2 \\cdot \\frac{1}{\\sqrt{2 \\pi}} e^{-\\frac{u^2}{2}} du\n$$</p>\n<p>The integral is the variance of a standard normal, which is 1 (by definition or computation). Thus:</p>\n<p>$$\n\\text{Var}(X) = \\sigma^2\n$$</p>\n<p>So:</p>\n<p>$$\n\\begin{aligned}\nE[X] &amp;= \\boxed{\\mu} \\newline\n\\text{Var}(X) &amp;= \\boxed{\\sigma^2}\n\\end{aligned}\n$$</p>\n<p>[TODO]</p>","metadata":{"date":"Sat, 17 May 2025 00:00:00 GMT","slug":"math-for-quant-part-1","tags":["maths","blog","quant"],"title":"Beyond High School Probability: Unlocking Binomial, Gaussian, and More"},"slug":"math-for-quant-part-1","toc":"<div class=\"toc\">\n<ul>\n<li><a href=\"#work-in-progress\">WORK IN PROGRESS</a></li>\n<li><a href=\"#introduction\">Introduction</a><ul>\n<li><a href=\"#resources\">Resources</a></li>\n<li><a href=\"#prerequisites-for-reading\">Prerequisites for Reading</a></li>\n<li><a href=\"#the-paradox\">The Paradox</a><ul>\n<li><a href=\"#method-1-random-midpoint-method\">Method 1: Random Midpoint Method</a></li>\n<li><a href=\"#method-2-diameter-method\">Method 2: Diameter Method</a></li>\n<li><a href=\"#method-3-radius-method\">Method 3: Radius Method</a></li>\n<li><a href=\"#the-contradiction\">The Contradiction</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#terms-and-definitions\">Terms and Definitions</a><ul>\n<li><a href=\"#what-is-probability\">What is Probability?</a></li>\n<li><a href=\"#sample-space\">Sample Space</a></li>\n<li><a href=\"#sigma-algebra\">Sigma Algebra</a><ul>\n<li><a href=\"#vitali-set-deep-dive\">Vitali Set (Deep Dive)</a></li>\n</ul>\n</li>\n<li><a href=\"#the-borel-sigma-algebra\">The Borel Sigma Algebra</a></li>\n<li><a href=\"#probability-measures-and-probability-spaces\">Probability Measures and Probability Spaces</a><ul>\n<li><a href=\"#probability-measures\">Probability Measures</a></li>\n<li><a href=\"#probability-spaces\">Probability Spaces</a></li>\n</ul>\n</li>\n<li><a href=\"#random-variables\">Random Variables</a><ul>\n<li><a href=\"#discrete-random-variables\">Discrete Random Variables</a></li>\n<li><a href=\"#continuous-random-variables\">Continuous Random Variables</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#probability-distributions\">Probability distributions</a><ul>\n<li><a href=\"#the-pmf-and-the-pdf\">The PMF and the PDF</a><ul>\n<li><a href=\"#probability-mass-function-pmf\">Probability Mass Function (PMF)</a></li>\n<li><a href=\"#probability-density-function-pdf\">Probability Density Function (PDF)</a><ul>\n<li><a href=\"#example-1-uniform-distribution-on-an-interval-1d\">Example 1: Uniform Distribution on an Interval (1D)</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#the-binomial-distribution\">The Binomial distribution</a><ul>\n<li><a href=\"#mean-expected-value\">Mean (Expected Value)</a></li>\n<li><a href=\"#variance\">Variance</a></li>\n</ul>\n</li>\n<li><a href=\"#the-poisson-distribution\">The Poisson distribution</a><ul>\n<li><a href=\"#mean-expected-value-variance\">Mean (Expected Value) &amp; Variance</a></li>\n</ul>\n</li>\n<li><a href=\"#the-gaussian-normal-distribution\">The Gaussian (Normal) distribution</a><ul>\n<li><a href=\"#deriving-the-gaussian-from-the-binomial\">Deriving the Gaussian from the Binomial</a></li>\n<li><a href=\"#mean-and-variance\">Mean and Variance</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n"}]}
